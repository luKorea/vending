/*! 版权所有，翻版必究 */!function(e){function t(t){for(var a,l,r=t[0],s=t[1],d=t[2],u=0,p=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(c&&c(t);p.length;)p.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={34:0},i=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window.webpackJsonp=window.webpackJsonp||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=s;i.push([266,0]),n()}({266:function(e,t,n){"use strict";n.r(t);n(640);layui.use(["table","form","layer","laydate","tree"],function(){var e=window.parent.permissionsData1(),t=+sessionStorage.machineID,n=permissionsVal1({436:!1,437:!1,446:!1},e);function a(){n[436]?$(".addSalesBtn").removeClass("hide"):$(".addSalesBtn").addClass("hide"),n[437]?$(".pushImportBtn").removeClass("hide"):$(".pushImportBtn").addClass("hide"),n[446]?$(".delBtn").removeClass("hide"):$(".delBtn").addClass("hide")}a();var o=layui.table,i=layui.layer,l=(layui.laydate,layui.tree),r=sessionStorage.token;$(".sidebar i").click(function(){$(".left-mian").hide(),$(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$(".playHeader .close").click(function(){u(),$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()}),$(".refreshBtn").click(function(){location.reload()});var s=o.render({elem:"#salesTable",method:"post",url:"".concat(vApi,"/sales_manager/getSalesManager"),contentType:"application/json",headers:{token:r},cols:[[{field:"sm_no",title:"编号",align:"center"},{field:"sm_name",title:"姓名",align:"center"},{field:"sm_phone",title:"电话号",align:"center"},{field:"sm_classify",title:"类别",align:"center"},{field:"create_name",title:"创建人",align:"center"},{field:"create_time",align:"center",title:"创建时间",templet:function(e){return e.create_time?timeStamp(e.create_time):"-"}},{field:"operation",align:"center",title:"操作",toolbar:"#barDemo"}]],id:"salesId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:t},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show(),a()}}),d=null,c=null;function u(){$('.addSalesCont input[name="sm_no"]').val(""),$('.addSalesCont input[name="name"]').val(""),$('.addSalesCont input[name="phone"]').val(""),$('.addSalesCont input[name="merchants"]').val("")}o.on("tool(salesTable)",function(e){if(d=e.data,event.stopPropagation(),$('.editInput input[name="userName"]').val(d.name),"operation"===e.event){if(c==e.data.id)return $(".ListOperation").fadeOut(),void(c=null);c=e.data.id,$(".ListOperation").fadeIn(),$(".ListOperation").css({left:$(this).offset().left-35+"px",top:$(this).offset().top+35+"px"})}}),$(".queryBtn").click(function(){s.reload({where:{keyword:$(".KyeText").val()}})}),$(".addSalesBtn").click(function(){1,$(".text").html("新增接收方"),popupShow("addSalesCont","addSalesBox")}),$(".ListOperation .edit").click(function(){2,$(".text").html("编辑接收方"),popupShow("addSalesCont","addSalesBox")}),$(".ListOperation .del").click(function(){console.log(d),i.confirm("确定删除？",function(e){i.close(e)})}),$(".addSalesCont .confirmBtn").click(function(){if($('.addSalesCont input[name="sm_no"]').val()&&$('.addSalesCont input[name="name"]').val()&&$('.addSalesCont input[name="phone"]').val()&&$('.addSalesCont input[name="merchants"]').val()){var e=JSON.stringify({sm_no:$('.addSalesCont input[name="sm_no"]').val(),merchant_id:t,sm_name:$('.addSalesCont input[name="name"]').val(),sm_phone:$('.addSalesCont input[name="phone"]').val(),sm_classify:$('.addSalesCont input[name="merchants"]').val()});console.log(JSON.parse(e))}else i.msg("带*号未必填",{icon:7})}),$(".addSalesCont .cancelBtn").click(function(){u(),popupHide("addSalesCont","addSalesBox")});var p=treeList();function f(e,n,a,o){e.render({elem:"#".concat(n),id:"treelist",showLine:!0,onlyIconControl:!0,data:o,spread:!0,text:{defaultNodeName:"无数据",none:"您没有权限，请联系管理员授权!"},click:function(e){console.log(e),t=e.data.id,a.reload({where:{merchantId:e.data.id}});for(var o=$("#".concat(n," .layui-tree-txt")),i=0;i<o.length;i++)o[i].innerHTML===e.data.title?o[i].style.color="#be954a":o[i].style.color="#555"}})}$(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(p)?(f(l,"testGoods",s,p=e),s.reload({where:{merchantId:t}}),i.msg("已刷新",{icon:1})):i.msg("已刷新",{icon:1})}),f(l,"testGoods",s,p),$("body").click(function(){$(".ListOperation").fadeOut(),c=null})})}});