/*! 版权所有，翻版必究 */!function(t){function e(e){for(var o,s,c=e[0],d=e[1],l=e[2],u=0,p=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);for(r&&r(e);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,c=1;c<n.length;c++){var d=n[c];0!==i[d]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={5:0},a=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var r=d;a.push([580,0]),n()}({580:function(t,e,n){"use strict";n.r(e);n(658);var o=n(0),i=!1;var a=window.parent;$(".topHeader .back").click(function(){a.hideChild()});var s=a.machindID(),c=a.merchantsID();function d(t){Object(o.e)("加载中...");var e=JSON.stringify({machineId:t});Object(o.d)("/machine/getGoodWay","post",sessionStorage.token,e,"mask").then(function(t){r(t)}).catch(function(t){console.log(t)})}d(s);var l=[];function r(t){l=[],t.data.forEach(function(t){t.row&&(l[t.row-1]?l[t.row-1].push(t):(l[t.row-1]=[],l[t.row-1].push(t)))}),function(t){var e="";t.forEach(function(t,o){e+='<ul class="aisleList flex">\n                        <li class="listIndex">\n                            <span>'.concat(o+1,"</span>\n                        </li>"),t.forEach(function(t,i){e+=' <li class="aisleNumderGoods" fireIndex="'.concat(o+","+i,'" >\n                            <div class="delCheckbox">\n                            <div>\n                                <input type="checkbox" class="delChoose" value="').concat(t.id,'" style="width: 20px;height: 20px;">\n                                <span class="hui-icons hui-icons-toast "></span>\n                            </div>\n                        </div>\n                            <div class="numberTop">\n                                <img src="').concat(t.goods_images?t.goods_images:n(102),'" alt="">\n                                <span>').concat(t.way,'</span>\n                            </div>\n                            <div class="price">价格:').concat(function(t){""===t&&(t=0),t=t.toString().replace(/[^\d\.-]/g,""),isNaN(t)&&(t="0");var e=t==(t=Math.abs(t)),n=(t=Math.floor(100*t+.50000000001))%100;n=n<10?"0"+n:n,t=Math.floor(t/100).toString();for(var o=0;o<Math.floor((t.length-(1+o))/3);o++)t=t.substring(0,t.length-(4*o+3))+","+t.substring(t.length-(4*o+3));return"￥"+(e?"":"-")+t+"."+n}(t.price),'</div>\n                            <div class="numderBottom flex">\n                                <div class="').concat(1==t.open?"status1":"status2",' ">\n                                    \n                                    ').concat(1==t.open?"正常":"禁用","\n                                </div>\n                                <div >\n                                    数量:").concat(t.count,"\n                                </div>\n                            </div>\n                            <p>\n                            ").concat(1==t.mail?"(邮寄)":"").concat(t.goods_Name?t.goods_Name:"-","\n                            </p>\n                        </li>")}),e+="</ul>"}),document.getElementById("aisleCont").innerHTML=e,$("#aisleCont input").attr("checked",!1)}(l)}Object(o.h)("/role/findUserPermission","post",sessionStorage.token).then(function(t){t.data.forEach(function(t){"424"==t.id&&!0})}).catch(function(t){console.log(t)}),$(".validationContent .close").click(function(){Object(o.a)(this,"top50")});$(".validationContent .confirmBtn").click(function(){var t=this;if($('.validationBody input[name="oldPass"]').val()){Object(o.e)("正在验证，请稍后");var e=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())});Object(o.d)("/user/verifyAlonePwd","post",sessionStorage.token,e,"mask").then(function(e){if(console.log(e),Object(o.a)(t,"top50"),sessionStorage.independentPass="true",b)Object(o.j)(".addNumContent",".addNumBox","top50");else if(g){h=[],Object(o.e)("正在删除，请稍后！");var n=$('.aisleCont input[type="checkbox"]');$.each(n,function(t,e){console.log(e.checked),e.checked&&h.push(Number(e.value))}),v(JSON.stringify({machineId:s,ways:h}))}else p&&(O(),N(),!1,i=!0,Object(o.j)(".editAisleContent",".editAisleBox","top50"))}).catch(function(t){Object(o.m)(t.message,"error")})}else Object(o.m)("请输入独立密码！","warn")}),$(".validationBox").click(function(){event.stopPropagation()}),$(".validationContent").click(function(){Object(o.b)(this,"top50")}),$("input").attr("autocomplete","off");var u=null,p=null;$(".aisleCont").on("click",".aisleNumderGoods",function(){j(),u=$(this).attr("fireIndex").split(","),p=1,i=!1,b=null,g=null,N(),Object(o.j)(".editAisleContent",".editAisleBox","top50")});var m=0;function f(){1,m=0,$(".numberTop span").show(),$(".delCheckbox").hide(),$(".delFooter").removeClass("height"),$(".addAisle").fadeIn(),$(".delCheckbox span").removeClass("delCheckboxTrue"),$(".delCheckbox .delChoose").prop("checked",!1)}$(".cancelBtn").click(function(){f()});var h=[],g=null;function v(t){Object(o.d)("api/machine/deleteGoodWay","post",sessionStorage.token,t,"mask").then(function(t){f(),Object(o.m)(t.message,"success"),r(t)}).catch(function(t){Object(o.m)(t.message,"error")})}$(".delFooter .delBtn").click(function(){0==m?hui.alert("请选择需要删除的货道！","好的",function(){}):(h=[],hui.confirm("确定删除？",["取消","确定"],function(){if(g=1,b=null,p=null,sessionStorage.independentPass){Object(o.e)("正在删除，请稍后！");var t=$('.aisleCont input[type="checkbox"]');$.each(t,function(t,e){console.log(e.checked),e.checked&&h.push(Number(e.value))}),v(JSON.stringify({machineId:s,ways:h}))}else Object(o.j)(".validationContent",".validationBox","top50")},function(){}))});var b=null;$(".aisleCont").on("click",".addAisle",function(){b=1,g=null,p=null,$(this).attr("indexVal"),Object(o.j)(".addNumContent",".addNumBox","top50")}),$(".addNumContent .close").click(function(){Object(o.a)(this,"top50")}),$('.addNumBody input[name="addNumber"]').keyup(function(){Object(o.o)(this)}),$(".addNumBox").click(function(){event.stopPropagation()}),$(".addNumContent").click(function(){Object(o.b)(this,"top50")}),$(".editAisleContent .close").click(function(){Object(o.a)(this,"top50")}),$(".editAisleBox").click(function(){event.stopPropagation()}),$(".editAisleContent").click(function(){Object(o.b)(this,"top50")});var y=null,k=null;function O(){$('input[name="price"]').attr("disabled",!1),$('input[name="count"]').attr("disabled",!1),$('input[name="total"]').attr("disabled",!1),$(".sumbitBtn").show(),$(".confirmBtn").hide()}function j(){$('input[name="goodsName"]').attr("disabled",!0),$('input[name="price"]').attr("disabled",!0),$('input[name="count"]').attr("disabled",!0),$('input[name="total"]').attr("disabled",!0),$(".sumbitBtn").hide(),$(".confirmBtn").show()}function N(){y=l[u[0]][u[1]],console.log(y),$('.editiAsleBody input[name="goodsName"]').val(1==y.mail?"(邮寄)"+y.goods_Name:y.goods_Name),$('.editiAsleBody input[name="goodsName"]').attr("IVal",y.goods_Id),$('.editiAsleBody input[name="price"]').val(y.price),$('.editiAsleBody input[name="count"]').val(y.count),$('.editiAsleBody input[name="total"]').val(y.total),$('.editiAsleBody input[name="openText"]').val(1==y.open?"是":"否"),$('.editiAsleBody input[name="openVal"]').val(y.open)}Object(o.d)("/machine/findMachineIdUser?machineId="+s,"get",sessionStorage.token).then(function(t){k=t.data,console.log(t.data,"test")}).catch(function(t){k=0}),$(".editAisleContent").click(function(){1!=k&&j()}),$(".pickerChoose").click(function(){1===k||Object(o.m)("您不是该设备管理员！","warn")});var C=new huiPicker(".pickerChoose",function(){var t=C.getVal(0),e=C.getText(0);$('.pickerChoose input[name="openVal"]').val(t),$('.pickerChoose input[name="openText"]').val(e)});C.bindData(0,[{value:1,text:"是"},{value:0,text:"否"}]),$(".editAisleContent .goodsChoose").click(function(){i&&(1===k?(I=!1,B=1,$(".goodsWrap").html('<div class="goodsList flexThree" id="goodsList"></div>'),$(".goodsList").empty(),Object(o.j)(".goodsContnet",".goodsBox","top50"),_()):Object(o.m)("您不是该设备管理员！","warn"))}),$(".goodsContnet .close").click(function(){Object(o.a)(this,"top50")}),$(".goodsBox").click(function(){event.stopPropagation()}),$(".goodsContnet").click(function(){Object(o.b)(this,"top50")});var B=1,w=10,x="";function A(t){var e=JSON.stringify({pageNum:B,pageSize:w,condition:c,conditionFour:"1",conditionTwo:x});B++,Object(o.d)("/goods/findAll","post",sessionStorage.token,e,"mask").then(function(t){10!=t.data.list.length&&(I=!0),t.data.list.length>0&&function(t){var e="";t.forEach(function(t,n){e+='<div class="chooseList myScale3d" mail="'.concat(t.mail,'" gID="').concat(t.goods_Id,'" gName="').concat(t.goods_Name,'" gPrice="').concat(t.goods_Price,'" >\n                        <div class="goodsImg">\n                            <img src="').concat(t.goods_images,'"\n                                alt="">\n                        </div>\n                        <div class="goodsInformation">\n                            <p>').concat(1==t.mail?"(邮寄)"+t.goods_Name:t.goods_Name,"</p>\n                            <p>").concat(t.classifyName,'</p>\n                            <div class="flexThree">\n                                <p>编号</p>\n                                <span>').concat(t.goods_Core,'</span>\n                            </div>\n                            <div class="flexThree">\n                                <p>销售价</p>\n                                <span>￥').concat(t.goods_Price,"</span>\n                            </div>\n                        </div>\n                    </div>")}),$(".goodsList").append(e)}(t.data.list)}).catch(function(e){t(),I=!0})}var I=!1;function _(){$(".goodsWrap").dropload({scrollArea:$(".goodsWrap"),domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">上拉加载更多</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>',domNoData:'<div class="dropload-noData">已加载全部数据</div>'},loadDownFn:function(t){setTimeout(function(){if(I)return t.resetload(),t.lock(),t.noData(),void t.resetload();A(t.resetload),t.resetload()},500)}})}$(".goodsWrap").on("click",".chooseList",function(){console.log($(this).attr("gName")),$('.editiAsleBody input[name="goodsName"]').val(1==$(this).attr("mail")?"(邮寄)"+$(this).attr("gName"):$(this).attr("gName")),$('.editiAsleBody input[name="goodsName"]').attr("IVal",$(this).attr("gID")),$('.editiAsleBody input[name="price"]').val($(this).attr("gPrice")),Object(o.a)(this,"top50")}),$(".editAisleContent .confirmBtn").click(function(){if(1!==k)return j(),void Object(o.m)("您不是该设备管理员！","warn");sessionStorage.independentPass?(i=!0,O()):Object(o.j)(".validationContent",".validationBox","top50")}),$(".editAisleContent .sumbitBtn").click(function(){if($('.editiAsleBody input[name="goodsName"]').attr("IVal"))if($('.editiAsleBody input[name="count"]').val()&&$('.editiAsleBody input[name="total"]').val())if(Number($('.editiAsleBody input[name="total"]').val())>=Number($('.editiAsleBody input[name="count"]').val())){Object(o.e)("正在修改，请稍后！");var t=JSON.stringify({machineId:s,way:y.way,goodId:Number(y.goods_Id?y.goods_Id:$('.editiAsleBody input[name="goodsName"]').attr("IVal")),newGoodId:Number($('.editiAsleBody input[name="goodsName"]').attr("IVal")),replenish:y.goods_Id?y.count:0,count:Number($('.editiAsleBody input[name="count"]').val()),total:Number(y.goods_Id?y.total:0),newTotal:Number($('.editiAsleBody input[name="total"]').val()),status:y.open,newStatus:Number($('.editiAsleBody input[name="openVal"]').val()),newPrice:$('.editAisleContent input[name="price"]').val(),price:y.goods_Id?y.price+"":"0"});Object(o.d)("/machine/updateGoodWay","post",sessionStorage.token,t,"mask",".editAisleContent","top50").then(function(t){d(s),Object(o.m)(t.message,"success")}).catch(function(t){Object(o.m)(t.message,"error")})}else Object(o.m)("货道容量不能小于当前数量","warn");else Object(o.m)("数量和容量为为必填","warn");else Object(o.m)("请选择商品","warn")}),$(".goodsContnet .confirmBtn").click(function(){Object(o.e)("正在加载，请稍后！"),x=$('.goodsContnet input[name="editName"]').val(),I=!1,B=1,$(".goodsWrap").html('<div class="goodsList flexThree" id="goodsList"></div>'),$(".goodsList").empty(),_()}),$("#footer").load("M_footerNav.html")},658:function(t,e){}});