/*! 版权所有，翻版必究 */!function(s){function e(e){for(var n,t,o=e[0],a=e[1],i=e[2],r=0,c=[];r<o.length;r++)t=o[r],Object.prototype.hasOwnProperty.call(u,t)&&u[t]&&c.push(u[t][0]),u[t]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n]);for(p&&p(e);c.length;)c.shift()();return d.push.apply(d,i||[]),l()}function l(){for(var e,n=0;n<d.length;n++){for(var t=d[n],o=!0,a=1;a<t.length;a++){var i=t[a];0!==u[i]&&(o=!1)}o&&(d.splice(n--,1),e=r(r.s=t[0]))}return e}var t={},u={3:0},d=[];function r(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return s[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=s,r.c=t,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)r.d(t,o,function(e){return n[e]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="";var n=window.webpackJsonp=window.webpackJsonp||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var a=0;a<n.length;a++)e(n[a]);var p=o;d.push([338,0]),l()}({338:function(e,n,t){"use strict";t.r(n);var n=t(354),l=t(1);layui.use(["table","form","layer","tree","util","transfer"],function(){var e=layui.table,t=layui.layer,o=sessionStorage.token,a=e.render({elem:"#tableTest",url:"".concat(Vapi,"/user/getUser"),method:"post",contentType:"application/json",headers:{token:o},align:"center",cols:[[{field:"username",width:180,title:"用户名",align:"center"},{field:"name",width:150,title:"姓名",align:"center"},{field:"company",width:300,title:"公司名",align:"center",templet:function(e){return e.company?e.company.companyName:""}},{field:"lockCount",width:150,title:"状态",align:"center",templet:function(e){return 0===e.lockCount||2===e.lockCount?"启用":"禁用"}},{field:"addUser",width:150,title:"创建人",align:"center",templet:function(e){return e.addUser?e.addUser.username:""}},{field:"addTime",width:180,title:"创建时间",align:"center"},{field:"updateUser",width:150,title:"更改人",align:"center",templet:function(e){return e.updateUser?e.updateUser.username:""}},{field:"updateTime",width:180,title:"更改时间",align:"center"},{field:"operation",fixed:"right",align:"center",right:0,width:150,title:"操作",toolbar:"#barDemo"}]],id:"tableId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID},parseData:function(e){return Object(l.c)(),200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}});$(".queryBtnClick ").click(function(){a.reload({where:{conditionTwo:$('.mian input[name="keyMerchants"]').val()}})});var n=null,i=layui.form,r=null,c=null;function s(e,n){var t=$(e).val();t&&(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,.\/]).{6,64}$/.test(t)||(n.msg("密码必须包含英文和数字以及特殊字符且不少于6位数",{icon:7}),$(e).val("")))}e.on("tool(test)",function(e){event.stopPropagation(),n=e.data,e.data,"operation"===e.event&&($(".ListOperation").fadeIn(),$(".ListOperation").css({left:$(this).offset().left-35+"px",top:$(this).offset().top+35+"px"}))}),$.ajax({url:"".concat(Vapi,"/company/getAll"),type:"get",headers:{"Content-Type":"application/json",token:o},success:function(e){console.log(e);var t="";$("#companyType").empty(),$.each(e.data,function(e,n){t+='<option value="'.concat(n.companyId,'">').concat(n.companyName,"</option>")}),$("#companyType").append(t),i.render("select")},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),t.msg("请求服务器超时",{icon:2})}}),$(".delete").click(function(){c=n.id,n.username===sessionStorage.username?t.msg("该用户为当前登陆用户，不可删除！！",{icon:2}):t.confirm("确定删除？",function(n){console.log(n),$.ajax({type:"get",url:"".concat(Vapi,"/user/deleteUserById"),headers:{token:o},data:{uId:c},success:function(e){200===e.code?(a.reload({where:{}}),t.msg(e.message,{icon:1}),t.close(n)):403===e.code?window.parent.location.href="login.html":t.msg(e.message,{icon:2})}})})}),$(".addBtn").click(function(){$(".switchOpen").hide(),Object(l.j)(".MemberOperation",".MemberContent"),r=$(this).attr("typeID"),$(".OperationHeader span").html("添加用户"),i.val("information",{id:"",username:"",name:"",password:"",companyId:""}),$(".checkCont").empty(),$(".roleCont").hide()}),$(".ListOperation .edit").click(function(){c=n.id,$(".switchOpen").show(),$('.switchOpen input[name="open"]').prop("checked",2===n.lockCount||0===n.lockCount),$(".OperationHeader span").html("编辑用户"),r=2,Object(l.j)(".MemberOperation",".MemberContent"),i.val("information",{username:n.username,name:n.name,password:"      ",companyId:n.company.companyId,lockCount:n.lockCount}),console.log(n,"test"),i.render("select")}),$(".submit_btn").click(function(){var e=i.val("information"),n=null;console.log(e),e.username&&e.name&&e.password&&e.companyId?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e=JSON.stringify({id:c,username:e.username,name:e.name,password:"      "!==e.password?hex_md5(e.password):"",companyId:e.companyId,lockCount:$('.switchOpen input[name="open"]').prop("checked")?2:1}),console.log(e),(n="".concat(Vapi,"1"===r?"/user/addUser":"/user/updateUser"))&&$.ajax({type:"post",url:n,headers:{"Content-Type":"application/json",token:o},data:e,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),200==e.code?(a.reload({where:{}}),i.val("information",{username:"",name:"",password:"",companyId:""}),$(".MemberOperation").fadeOut(),t.msg(e.message,{icon:1})):403==e.code?window.parent.location.href="login.html":t.msg(e.message,{icon:2})},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),t.msg("请求服务器超时",{icon:2})}})):t.msg("带*为必填",{icon:7})}),$(".cancel_btn").click(function(){Object(l.i)(".MemberOperation",".MemberContent")}),$('.listInput input[name="phone"]').blur(function(){var e=$(this).val();if(e&&!/^1[3456789]\d{9}$/.test(e))return t.msg("请填写正确的手机号码",{icon:7}),$(this).val(""),!1}),$('.listInput input[name="userPwd"]').blur(function(){s(this,t)}),$('.listInput input[name="alonePwd"]').blur(function(){s(this,t)}),$(".refreshBtn").click(function(){location.reload()}),$("body").bind("keydown",function(e){116===e.keyCode&&f5Fun()}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$('.inputWidth input[name="userName"]').blur(function(){ChineseREgular(this,t)}),$("body").click(function(){$(".ListOperation").fadeOut(),0})})},354:function(e,n){}});