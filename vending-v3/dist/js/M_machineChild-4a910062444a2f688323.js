/*! 版权所有，翻版必究 */!function(l){function n(n){for(var e,o,t=n[0],a=n[1],i=n[2],c=0,s=[];c<t.length;c++)o=t[c],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(l[e]=a[e]);for(p&&p(n);s.length;)s.shift()();return u.push.apply(u,i||[]),d()}function d(){for(var n,e=0;e<u.length;e++){for(var o=u[e],t=!0,a=1;a<o.length;a++){var i=o[a];0!==r[i]&&(t=!1)}t&&(u.splice(e--,1),n=c(c.s=o[0]))}return n}var o={},r={3:0},u=[];function c(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return l[n].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=l,c.c=o,c.d=function(n,e,o){c.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)c.d(o,t,function(n){return e[n]}.bind(null,t));return o},c.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(e,"a",e),e},c.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},c.p="";var e=window.webpackJsonp=window.webpackJsonp||[],t=e.push.bind(e);e.push=n,e=e.slice();for(var a=0;a<e.length;a++)n(e[a]);var p=t;u.push([353,0]),d()}({353:function(n,e,o){"use strict";o.r(e);o(405);var t=o(1),a=window.parent;$(".topHeader .back").click(function(){a.hideChild()});var i=a.machindID(),c=a.merchantsID();function s(e){for(var n=[],t=[],o=0;o<e.data.length;o++)t.push([]);t.forEach(function(n,o){e.data.forEach(function(n,e){o+1==n.way&&t[o].push(n)})});for(var a,i,o=0;o<t.length;o++)0<t[o].length&&n.push(t[o]);console.log(n),i="",(a=n).forEach(function(n,o){i+='<ul class="aisleList flex">\n                        <li class="listIndex">\n                            <span>'.concat(o+1,"</span>\n                        </li>"),n.forEach(function(n,e){i+=' <li class="aisleNumderGoods" fireIndex="'.concat(o+","+e,'" >\n                            <div class="delCheckbox">\n                            <div>\n                                <input type="checkbox" class="delChoose" value="').concat(n.id,'" style="width: 20px;height: 20px;">\n                                <span class="hui-icons hui-icons-toast "></span>\n                            </div>\n                            \n                        </div>\n                            <div class="numberTop">\n                                <img src="').concat(n.goods_images?n.goods_images:"http://172.16.71.142:8087/image/127b55b9-da32-4569-b740-3adf5e5524af.png",'" alt="">\n                                <span>').concat(e+1,'</span>\n                            </div>\n                            <div class="numderBottom flex">\n                                <div class="').concat(1==n.open?"status1":"status2",' ">\n                                    \n                                    ').concat(1==n.open?"正常":"禁用","\n                                </div>\n                                <div >\n                                    数量：").concat(n.count,"\n                                </div>\n                            </div>\n                            <p>\n                                ").concat(n.goods_Name?n.goods_Name:"-","\n                            </p>\n                        </li>")}),i+=' <li class="addAisle" indexVal="'.concat(o+1,'">\n                        <span>+</span>\n                    </li>\n                    </ul>')}),i+=' <ul class="aisleList flex">\n                    <li class="listIndex">\n                        <span>'.concat(a.length+1,'</span>\n                    </li>\n                    <li class="addAisle" indexVal="').concat(a.length+1,'">\n                        <span>+</span>\n                    </li>\n                </ul>'),$(".aisleCont").html(i),$(".aisleCont input").attr("checked",!1)}!function(n){Object(t.d)("加载中...");var e=JSON.stringify({machineId:n});Object(t.c)("/api/machine/getGoodWay","post",sessionStorage.token,e,"mask").then(function(n){console.log(n),s(n)}).catch(function(n){console.log(n)})}(i),$(".validationContent .close").click(function(){Object(t.a)(this,"top50")}),$(".validationContent .confirmBtn").click(function(){var n,o=this;$('.validationBody input[name="oldPass"]').val()?(Object(t.d)("正在验证，请稍后"),n=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())}),Object(t.c)("/api/user/verifyAlonePwd","post",sessionStorage.token,n,"mask").then(function(n){var e;console.log(n),Object(t.a)(o,"top50"),sessionStorage.independentPass="true",m?Object(t.g)(".addNumContent",".addNumBox","top50"):h&&(p=[],Object(t.d)("正在删除，请稍后！"),e=$('.aisleCont input[type="checkbox"]'),$.each(e,function(n,e){console.log(e.checked),e.checked&&p.push(Number(e.value))}),f(JSON.stringify({machineId:i,ways:p})))}).catch(function(n){Object(t.h)(n.message,"error")})):Object(t.h)("请输入独立密码！","warn")}),$(".validationBox").click(function(){event.stopPropagation()}),$(".validationContent").click(function(){Object(t.b)(this,"top50")}),$("input").attr("autocomplete","off");var l=1,d=null;$(".aisleCont").on({touchstart:function(){d=setTimeout(function(){d=0,$(".numberTop span").hide(),$(".delCheckbox").show(),$(".delFooter").addClass("height"),$(".addAisle").fadeOut(),l=2,$(".delBtn").text("删除("+r+")")},600)},touchmove:function(){clearTimeout(d),d=0},touchend:function(){return console.log(l),clearTimeout(d),0!=d&&2==l&&($(this).find(".delChoose").prop("checked")?($(this).children(".delCheckbox").find("span").removeClass("delCheckboxTrue"),$(this).find(".delChoose").prop("checked",!1),r--,console.log($(this).find(".delChoose").prop("checked"))):($(this).children(".delCheckbox").find("span").addClass("delCheckboxTrue"),$(this).find(".delChoose").prop("checked",!0),console.log($(this).find(".delChoose").prop("checked")),r++),$(".delBtn").text("删除("+r+")")),!1}},".aisleNumderGoods");var r=0;function u(){$(".numberTop span").show(),$(".delCheckbox").hide(),$(".delFooter").removeClass("height"),$(".addAisle").fadeIn(),$(".delCheckbox span").removeClass("delCheckboxTrue"),$(".delCheckbox .delChoose").prop("checked",!1)}$(".cancelBtn").click(function(){r=0,u()});var p=[],h=null;function f(n){Object(t.c)("api/machine/deleteGoodWay","post",sessionStorage.token,n,"mask").then(function(n){u(),Object(t.h)(n.message,"success"),s(n)}).catch(function(n){Object(t.h)(n.message,"error")})}$(".delFooter .delBtn").click(function(){0==r?hui.alert("请选择需要删除的货道！","好的",function(){}):(p=[],hui.confirm("确定删除？",["取消","确定"],function(){var n;h=1,m=null,sessionStorage.independentPass?(Object(t.d)("正在删除，请稍后！"),n=$('.aisleCont input[type="checkbox"]'),$.each(n,function(n,e){console.log(e.checked),e.checked&&p.push(Number(e.value))}),f(JSON.stringify({machineId:i,ways:p}))):Object(t.g)(".validationContent",".validationBox","top50")},function(){}))});var m=null,g=null;$(".aisleCont").on("click",".addAisle",function(){m=1,h=null,g=$(this).attr("indexVal"),sessionStorage.independentPass?Object(t.g)(".addNumContent",".addNumBox","top50"):Object(t.g)(".validationContent",".validationBox","top50")}),$(".addNumContent .close").click(function(){Object(t.a)(this,"top50")}),$(".addNumContent .confirmBtn").click(function(){var n;0!=$('.addNumBody input[name="addNumber"]').val()?(n=JSON.stringify({machineId:i,way:Number(g),count:Number($('.addNumBody input[name="addNumber"]').val())}),Object(t.c)("/api/machine/insertGoodWay","post",sessionStorage.token,n,"mask",".addNumContent","top50").then(function(n){console.log(n),Object(t.h)(n.message,"success"),s(n),$('.addNumBody input[name="addNumber"]').val("")}).catch(function(n){console.log(n)})):Object(t.h)("数量必须大于0","warn")}),$('.addNumBody input[name="addNumber"]').keyup(function(){Object(t.i)(this)}),$(".addNumBox").click(function(){event.stopPropagation()}),$(".addNumContent").click(function(){Object(t.b)(this,"top50")});var v=new huiPicker(".pickerChoose",function(){var n=v.getVal(0),e=v.getText(0);console.log(n,e),$('.pickerChoose input[name="openVal"]').val(n),$('.pickerChoose input[name="openText"]').val(e)});v.bindData(0,[{value:1,text:"是"},{value:0,text:"否"}]);hui.refresh("#goodsList",function(){Object(t.d)("加载中...");var n=JSON.stringify({pageNum:1,pageSize:10,condition:c,conditionFour:"1",conditionTwo:""});Object(t.c)("/api/goods/findAll","post",sessionStorage.token,n,"mask").then(function(n){var e,o;$(".goodsList").empty(),0<n.data.list.length?(e=n.data.list,o="",e.forEach(function(n,e){o+='<div class="chooseList myScale3d">\n                        <div class="goodsImg">\n                            <img src="'.concat(n.goods_images,'"\n                                alt="">\n                        </div>\n                        <div class="goodsInformation">\n                            <p>').concat(n.goods_Name,"</p>\n                            <p>").concat(n.classifyName,'</p>\n                            <div class="flexThree">\n                                <p>编号</p>\n                                <span>').concat(n.goods_Core,"</span>\n                            </div>\n                        </div>\n                    </div>")}),$(".goodsList").append(o)):$(".goodsList").append('<div class="empty">查询无数据</div>')}).catch(function(n){console.log(n)})})},405:function(n,e){}});