/*! 版权所有，翻版必究 */!function(l){function e(e){for(var a,t,s=e[0],i=e[1],o=e[2],n=0,r=[];n<s.length;n++)t=s[n],Object.prototype.hasOwnProperty.call(m,t)&&m[t]&&r.push(m[t][0]),m[t]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(l[a]=i[a]);for(h&&h(e);r.length;)r.shift()();return d.push.apply(d,o||[]),c()}function c(){for(var e,a=0;a<d.length;a++){for(var t=d[a],s=!0,i=1;i<t.length;i++){var o=t[i];0!==m[o]&&(s=!1)}s&&(d.splice(a--,1),e=n(n.s=t[0]))}return e}var t={},m={13:0},d=[];function n(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return l[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=l,n.c=t,n.d=function(e,a,t){n.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(a,e){if(1&e&&(a=n(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var s in a)n.d(t,s,function(e){return a[e]}.bind(null,s));return t},n.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(a,"a",a),a},n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},n.p="";var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var i=0;i<a.length;i++)e(a[i]);var h=s;d.push([367,0]),c()}({367:function(e,a,t){"use strict";t.r(a);t(369);var v=['<iframe class="iframe_show" src="report.html" iframeId="1"></iframe>','<iframe class="iframe_show" src="logo.html"></iframe>','<iframe class="iframe_show" src="terminalMember.html"></iframe>','<iframe class="iframe_show" src="memberList.html"></iframe>','<iframe class="iframe_show" src="roleManagement.html"></iframe>','<iframe class="iframe_show" src="machine.html"></iframe>','<iframe class="iframe_show" src="remote.html"></iframe>','<iframe class="iframe_show" src="generalGoods.html"></iframe>','<iframe class="iframe_show" src="customCategory.html"></iframe>','<iframe class="iframe_show" src="customGoods.html"></iframe>','<iframe class="iframe_show" src="goodsMaterial.html"></iframe>','<iframe class="iframe_show" src="merchantsList.html"></iframe>','<iframe class="iframe_show" src="Mymerchants.html"></iframe>','<iframe class="iframe_show" src="settlementDetails.html"></iframe>','<iframe class="iframe_show" src="machineAccounts.html"></iframe>','<iframe class="iframe_show" src="merchantsAcconuts.html"></iframe>','<iframe class="iframe_show" src="order.html"></iframe>','<iframe class="iframe_show" src="oldOrder.html"></iframe>','<iframe class="iframe_show" src="fodder.html"></iframe>','<iframe class="iframe_show" src="release.html"></iframe>','<iframe class="iframe_show" src="open.html"></iframe>','<iframe class="iframe_show" src="binding.html"></iframe>','<iframe class="iframe_show" src="myInformation.html"></iframe>','<iframe class="iframe_show" src="ThePublic.html"></iframe>','<iframe class="iframe_show" src="record.html"></iframe>','<iframe class="iframe_show" src="notice.html"></iframe>','<iframe class="iframe_show" src="paySet.html"></iframe>','<iframe class="iframe_show" src="payType.html"></iframe>','<iframe class="iframe_show" src="pickupCode.html"></iframe>','<iframe class="iframe_show" name="message" src="message.html"></iframe>','<iframe class="iframe_show" src="salesManager.html"></iframe>','<iframe class="iframe_show" src="mailOrder.html"></iframe>','<iframe class="iframe_show" src="codeOrder.html"></iframe>','<iframe class="iframe_show" src="salesResults.html"></iframe>'];sessionStorage.token||(window.location.href="login.html"),window.onload=function(){var e=sessionStorage.username;$("#userLogin .userName").html(e);var w=[];layui.use(["layer","form","element","carousel","table"],function(){var a=layui.layer,e=(layui.form,layui.table),u=layui.jquery,t=layui.element;function s(e){t.tabChange("demo",e)}u(".navClick").click(function(){var e,a;-1==w.indexOf(u(this).attr("navId"))?(e=u(this).attr("navId"),a=u(this).html(),t.tabAdd("demo",{title:a,content:'<div class="content-tbas-iframe-html">\n                             '.concat(v[e],"\n                         </div>"),id:e}),s(u(this).attr("navId")),w.push(u(this).attr("navId"))):s(u(this).attr("navId"))}),u(".layui-tab").on("click",function(e){u(e.target).is(".layui-tab-close")&&(e=w.indexOf(u(e.target).parent().attr("lay-id")),w.splice(e,1))});var i,o=null;t.on("tab(demo)",function(e){for(var a=u(".navClick").length,t=0;t<a;t++)u(this).attr("lay-id")==u(".navClick").eq(t).attr("navId")&&(o=t);u(".layui-nav-item").removeClass("layui-nav-itemed"),u(".navClick").eq(o).parent().parent().parent().addClass("layui-nav-itemed"),u(".navClick").parent().removeClass("layui-this"),u(".navClick").eq(o).parent().addClass("layui-this"),999==u(this).attr("lay-id")&&(u(".layui-nav-item").removeClass("layui-nav-itemed"),u(".navClick").parent().removeClass("layui-this"))}),u("#nav .layui-nav-item>a").click(function(){u(this).parent().siblings().removeClass("layui-nav-itemed")});function n(){loadingAjax("/api/user/logout","post","",sessionStorage.token,"","","",a).then(function(e){sessionStorage.token="",window.location.replace("login.html")}).catch(function(e){a.msg(e.message)})}u(".exitLogin").click(function(){n()}),u(".determineBtn button").click(function(){popupHide("socketCont","sockotBox"),n()}),permissionsFun("/api/role/findUserPermission","post",sessionStorage.token,a).then(function(e){var a=!1,t=!1,s=!1,i=!1,o=!1,n=!1,r=!1,l=!1,c=!1,m=!1,d=!1,h=!1,f=!1,p=!1;e.data.forEach(function(e){408==e.id&&(a=!0),407==e.id&&(t=!0),413==e.id&&(s=!0),414==e.id&&(i=!0),409==e.id&&(o=!0),410==e.id&&(n=!0),400==e.id&&(r=!0),431==e.id&&(l=!0),423==e.id&&(c=!0),419==e.id&&(m=!0),412==e.id&&(d=!0),411==e.id&&(h=!0),447==e.id&&(f=!0),448==e.id&&(p=!0)}),a?u(".userListFlag").removeClass("hide"):u(".userListFlag").addClass("hide"),t?u(".roleListFlag").removeClass("hide"):u(".roleListFlag").addClass("hide"),a||t?u(".userCont").removeClass("hide"):u(".userCont").addClass("hide"),s?u(".machineListFlag").removeClass("hide").parents(".machineCont").removeClass("hide"):u(".machineListFlag").addClass("hide").parents(".machineCont").addClass("hide"),i?u(".goodsClassFlag").removeClass("hide"):u(".goodsClassFlag").addClass("hide"),o?u(".goodsListFlag").removeClass("hide"):u(".goodsListFlag").addClass("hide"),n?u(".materialListFlag").removeClass("hide"):u(".materialListFlag").addClass("hide"),i||o||n?u(".goodsCont").removeClass("hide"):u(".goodsCont").addClass("hide"),r?u(".merchantsListFlag").removeClass("hide").parents(".merchantsCont").removeClass("hide"):u(".merchantsListFlag").addClass("hide").parents(".merchantsCont").addClass("hide"),l?u(".merchantsPay").removeClass("hide"):u(".merchantsPay").addClass("hide"),t?u(".merchantsPayType").removeClass("hide"):u(".merchantsPayType").addClass("hide"),f?u(".sales").removeClass("hide"):u(".sales").addClass("hide"),c?u(".accountsListFlag").removeClass("hide").parents(".accountsCont").removeClass("hide"):u(".accountsListFlag").addClass("hide").parents(".accountsCont").addClass("hide"),m?u(".orderListFlag").removeClass("hide").parents(".orderCont").removeClass("hide"):u(".orderListFlag").addClass("hide").parents(".orderCont").addClass("hide"),d?u(".RMListFlag").removeClass("hide"):u(".RMListFlag").addClass("hide"),h?u(".ReListFlag").removeClass("hide"):u(".ReListFlag").addClass("hide"),d||h?u(".releaseCont").removeClass("hide"):u(".releaseCont").addClass("hide"),p?u(".pickupCode").removeClass("hide").parents(".marketingCont").removeClass("hide"):u(".pickupCode").addClass("hide").parents(".marketingCont").addClass("hide")}).catch(function(e){a.msg(e.message,{icon:2})});var r=JSON.stringify({pageSize:10,pageNum:1,n_status:1,is_show:1}),l=layui.carousel,c=null;function m(e){var t="";e.forEach(function(e,a){t+='<div class="swpier"  ArrList="'.concat(a,'">').concat(e.title,"</div>")}),u(".noticeTitleText").html(t);l.render({elem:"#test1",width:"480px",height:"25px",arrow:"none",anim:"updown",indicator:"none",interval:"2000"}).reload({interval:2e3})}loadingAjax("/api/notices/getNoticeList","post",r,sessionStorage.token).then(function(e){m(c=e.data.list)}).catch(function(e){a.msg("获取公告失败",{icon:2})}),u(".noticeTitleText").on("click",".swpier",function(){var e=c[u(this).attr("ArrList")];u(".previewContent .playHeader span").html(e.title),u(".previewContent .previewBody .previewHtml").html(e.content),u(".previeName span").html(e.create_user);var a=timeStamp(e.create_time);u(".previeTime span").html(a),e.attach_name?(u(".downloadBtn").show(),u(".downloadBtn a").attr("src",e.attach_url),a=(a=e.attach_url.split("."))[a.length-1],u(".downloadBtn a").attr("download",e.attach_name+"."+a)):u(".downloadBtn").hide(),popupShow("previewContent","previewBox")}),u(".playHeader .close").click(function(){u(this).parent().parent().addClass("margin0"),u(this).parents(".maskContnet").fadeOut()}),u(".previewBox").click(function(){event.stopPropagation()}),u(".previewContent").click(function(){popupHide("previewContent","previewBox")});var d=[],h=0;function f(){h=0;var e=JSON.stringify({pageSize:25,pageNum:1,is_read:0});loadingAjax("/api/notices/getHistoryMsg","post",e,sessionStorage.token).then(function(e){d=e.data.list;var t="";d.forEach(function(e,a){0==e.is_read&&e.create_user!=sessionStorage.username&&(h++,t+='<dd >\n                                    <a class="messageDow" messageIndex="'.concat(a,'" href="javascript:;"><span>').concat(e.title,"</span></a>\n                                </dd>"))}),u(".unreadMessageBox").html(t),u(".unreadMessage").html(h),0==h&&u(".unreadMessageBox").html("<dd>\n                                <h5>暂无未读消息</h5>\n                            </dd>")}).catch(function(e){a.msg("获取未读消息失败",{icon:2})})}f(),window.messageFunList=f,u(".messageContentList").on("click",".messageDow",function(){var e=d[u(this).attr("messageIndex")];u(".messageCont .playHeader span").html("".concat(e.title)),u(".messageBody .messageHtml").html(e.content),function(e){e=JSON.stringify({message_id:e});loadingAjax("/api/notices/readMessage","post",e,sessionStorage.token,"","","",a).then(function(e){f(),window.message&&window.message.reloadFun()}).catch(function(e){console.log(e),a.msg("阅读消息失败",{icon:2})})}(e.id),popupShow("messageCont","messageBox")}),u(".messageBox").click(function(){event.stopPropagation()}),u(".messageCont").click(function(){popupHide("messageCont","messageBox")});var p;function g(){e.render({elem:"#noticeTable",method:"post",url:"/api/notices/getNoticeList",contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{field:"title",width:210,title:"标题",align:"center"},{field:"attach_name",width:150,title:"附件名",align:"center",templet:function(e){return e.attach_name||"-"}},{field:"attach_url",width:320,title:"附件地址",align:"center",templet:function(e){return e.attach_url||"-"}},{field:"create_user",width:130,title:"创建人",align:"center"},{field:"create_time",width:180,title:"创建时间",align:"center",templet:function(e){return timeStamp(e.create_time)}}]],id:"noticeTableId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{n_status:1,is_show:1},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){c=[],200==e.code&&e.data.forEach(function(e){1==e.is_show&&1==e.n_status&&(c.push(e),m(c))})}})}g(),u(".more").click(function(){popupShow("noticeContent","noticeBox")}),u(".noticeBox").click(function(){event.stopPropagation()}),u(".noticeContent").click(function(){popupHide("noticeContent","noticeBox")}),e.on("row(noticeTable)",function(e){u(".previewContent .playHeader span").html(e.data.title),u(".previewContent .previewBody .previewHtml").html(e.data.content),u(".previeName span").html(e.data.create_user);var a=timeStamp(e.data.create_time);u(".previeTime span").html(a),e.data.attach_name?(u(".downloadBtn").show(),u(".downloadBtn a").attr("src",e.data.attach_url),a=(a=e.data.attach_url.split("."))[a.length-1],u(".downloadBtn a").attr("download",e.data.attach_name+"."+a)):u(".downloadBtn").hide(),popupShow("previewContent","previewBox")}),sessionStorage.token&&("undefined"==typeof WebSocket?console.log("您的浏览器不支持WebSocket"):(p=(p="https://vd.ybtech.gold/websocket/pushServer/".concat(sessionStorage.UserId)).replace("https","WSS").replace("http","ws"),null!=i&&(i.close(),i=null),(i=new WebSocket(p)).onopen=function(){console.log("websocket开启成功")},i.onmessage=function(e){e=JSON.parse(e.data);1==e.type||2==e.type?(u(".sockotTitle p").html(e.data),popupShow("socketCont","sockotBox"),setTimeout(function(){n()},3500)):3==e.type?f():"notice"==e.type&&g()},i.onclose=function(){console.log("websocket已关闭"),0},i.onerror=function(){console.log("websocket发生了错误"),0}))}),$("body").bind("keydown",function(e){116==e.keyCode&&e.preventDefault()}),window.history.forward(1)}},369:function(e,a){}});