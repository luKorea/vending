/*! 版权所有，翻版必究 */!function(s){function e(e){for(var t,a,o=e[0],n=e[1],i=e[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);for(p&&p(e);d.length;)d.shift()();return m.push.apply(m,i||[]),r()}function r(){for(var e,t=0;t<m.length;t++){for(var a=m[t],o=!0,n=1;n<a.length;n++){var i=a[n];0!==c[i]&&(o=!1)}o&&(m.splice(t--,1),e=l(l.s=a[0]))}return e}var a={},c={9:0},m=[];function l(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=s,l.c=a,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(a,o,function(e){return t[e]}.bind(null,o));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var t=window.webpackJsonp=window.webpackJsonp||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var n=0;n<t.length;n++)e(t[n]);var p=o;m.push([137,0]),r()}({137:function(e,t,a){"use strict";a.r(t);a(375);function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.use(["form","layer","laydate","table","tree"],function(){var e;$(".navTab li").click(function(){console.log($(this).index()),$(this).addClass("active").siblings().removeClass("active");var e=$(this);$(".tabLine").animate({left:e.offset().left+"px"},500),$(".tabBox>div").eq($(this).index()).fadeIn().siblings().fadeOut()});var t="",a="",o=layui.form,n=layui.tree,i=layui.laydate;i.render({elem:"#itemrs1",range:!0,done:function(e){console.log(e),timerKey=e.split(" - "),console.log(timerKey),t=timerKey[0],a=timerKey[1]}});var l="",d="";i.render({elem:"#itemrs2",range:!0,done:function(e){console.log(e),timerKey=e.split(" - "),console.log(timerKey),l=timerKey[0],d=timerKey[1]}});var s="",r="";i.render({elem:"#itemrs3",range:!0,done:function(e){console.log(e),timerKey=e.split(" - "),console.log(timerKey),s=timerKey[0],r=timerKey[1]}}),$(".videoList video").click(function(){$(".playVideo video").attr("src",$(this).attr("src")),$(".videoPlay").fadeIn()}),$(".mask").click(function(){$(".videoPlay").fadeOut(function(){$(".playVideo video").attr("src","")})}),$(".ImgContnet .add-btn").click(function(){$('.addImgCont input[name="ImgNane"]').val(""),I=null,popupShow("addImgCont","addImgBox")}),$(".addImgFooter .cancel-btn").click(function(){popupHide("addImgCont","addImgBox")}),$(".VideoContnet .add-btn").click(function(){$('.addVideoCont input[name="VideoName"]').val(""),f=null,popupShow("addVideoCont","addVideoBox")}),$(".addVideoFooter .cancel-btn").click(function(){popupHide("addVideoCont","addVideoBox")});var c=layui.table,m=c.render({elem:"#ImgData",method:"post",url:"/api/good_material/getGoodMaterial",contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"img",width:150,title:"图片",templet:"#imgtmp"},{field:"name",width:180,title:"图片名"},{field:"status",width:180,title:"审核状态",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"图片编号"},{field:"addUser",width:150,title:"创建人"},{field:"publishTime",width:180,title:"创建时间"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoImg"}]],page:!0,id:"ImgListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"0",conditionSix:sessionStorage.machineID},response:{statusCode:200},done:function(e){D(),403==e.code&&(window.parent.location.href="login.html")}}),p=null,u=null;c.on("tool(ImgData)",function(e){console.log(e),p=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑商品图片"),$(".editBody label").html("图片名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=m):(popupShow("videoPlay","playBox"),$(".playBody div").html('<img src="'.concat(p.img,'" alt="">')))}),$(".editImgBtn").click(function(){var e,t=[];$('.FlexInputWidth input[name="EidtImgNane"]').val()?(e={number:p.number,name:$('.FlexInputWidth input[name="EidtImgNane"]').val()},t.push(e),$.ajax({type:"post",url:"/api/good_material/updateGoodMaterial",headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({data:t}),success:function(e){console.log(e),200==e.code?(popupHide("editImgCont","editBox"),layer.msg(e.message,{icon:1}),setTimeout(function(){u.reload({where:{}})},100)):403==e.code?window.parent.location.href="login.html":(popupHide("editImgCont","editBox"),layer.msg(e.message,{icon:2}))}})):layer.msg("名不能为空",{icon:7})}),$(".ImgQueyuBtnClick").click(function(){m.reload({where:{conditionThree:$('.key-contnet input[name="KeyImgName"]').val(),conditionFour:"0",condition:t,conditionTwo:a,conditionFive:$('.ImgContnet select[name="logoImgStatus"]').val()}})}),$(".VideoQueryBtnClick").click(function(){g.reload({where:{conditionThree:$('.key-contnet input[name="keyVideoName"]').val(),conditionFour:"1",condition:l,conditionTwo:d,conditionFive:$('.VideoContnet select[name="videoStatus"]').val()}})}),$(".detailsImgQueyuBtnClick").click(function(){C.reload({where:{conditionThree:$('.details input[name="KeyImgName"]').val(),conditionFour:"2",condition:s,conditionTwo:r,conditionFive:$('.details select[name="detailsImgStatus"]').val()}})});var g=c.render({elem:"#VideoData",method:"post",url:"/api/good_material/getGoodMaterial",contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"name",width:180,title:"视频名"},{field:"name",width:180,title:"审核状态",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"视频编号"},{field:"addUser",width:150,title:"创建人"},{field:"publishTime",width:180,title:"创建时间"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoVideo"}]],page:!0,id:"VideoListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"1",conditionSix:sessionStorage.machineID},response:{statusCode:200},done:function(e){D(),403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}});c.on("tool(VideoData)",function(e){console.log(e),p=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑商品视频"),$(".editBody label").html("视频名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=g):(popupShow("videoPlay","playBox"),$(".playBody div").html('<video src="'.concat(p.img,'" controls="controls"></video>')))}),$(".editCancelBtn").click(function(){popupHide("editImgCont","editBox")}),$(".addDetailsImgCont .detalisCancelBtn").click(function(){popupHide("addDetailsImgCont","addDetailsImgBox")}),$(".uploadBtn").click(function(){$("#tailoringImg").cropper("destroy"),$(".ImgCropping").fadeIn(),$(".tailoring-container").fadeIn()}),$(".ImgBtn").click(function(){var e=o.val("ImgData");e.ImgNane?I?$.ajax({type:"post",url:"/api/good_material/saveGoodMaterial",headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({attribute:"0",img:I,name:e.ImgNane}),success:function(e){console.log(e),200==e.code?(popupHide("addImgCont","addImgBox"),$('.FlexInputWidth ingpu[name="ImgNane"]').val(""),$("#GoodsImg").attr("src",""),I=null,$(".upload-list").hide(),layer.msg(e.message,{icon:1}),m.reload({where:{}})):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:2})}}):layer.msg("图片不能为空",{icon:7}):layer.msg("图片名不能为空",{icon:7})});var f=null;function h(e,t,a,o,n){$.ajax({type:"post",url:n,headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({data:t,type:e}),success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),200==e.code?(layer.msg(e.message,{icon:1}),a.reload({where:{conditionFour:o}})):201==e.code?layer.msg(e.message,{icon:2}):202==e.code?(layer.msg(e.message,{icon:7}),a.reload({where:{conditionFour:o}})):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:2})}})}$(".uploadVideoChange").change(function(e){console.log(e);var t=new FormData;t.append("file",e.target.files[0]),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"/api/fileUpload",processData:!1,contentType:!1,headers:{token:token},data:t,success:function(e){console.log(e),$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),0==e.code?(f=e.data.src,$(".uploadVideo").fadeIn(),$(".uploadVideo video").attr("src",e.data.src)):layer.msg(e.message,{icon:7})},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".addVideoBtn").click(function(){$('.FlexInputWidth input[name="VideoName"]').val()?f?$.ajax({type:"post",url:"/api/good_material/saveGoodMaterial",headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({attribute:"1",img:f,name:$('.FlexInputWidth input[name="VideoName"]').val()}),success:function(e){console.log(e),200==e.code?(popupHide("addVideoCont","addVideoBox"),$('.FlexInputWidth input[name="VideoName"]').val(""),f=null,$(".uploadVideo").fadeIn(),layer.msg(e.message,{icon:1}),g.reload({where:{}})):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:2})}}):layer.msg("请上传视频",{icon:7}):layer.msg("视频名不能为空",{icon:7})}),$(".delBtn").click(function(){console.log($(this).attr("typeId"));var t=$(this).attr("typeId"),a=null,n=null,n=0==$(this).attr("typeId")?(a=c.checkStatus("ImgListData"),m):1==$(this).attr("typeId")?(a=c.checkStatus("VideoListData"),g):(a=c.checkStatus("detailsId"),C);console.log(a),0<a.data.length?layer.confirm("确定删除？",function(e){layer.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var o=[];a.data.forEach(function(e,t){var a={number:e.number};o.push(a)}),console.log(o),$.ajax({type:"post",url:"/api/good_material/deleteGoodMaterial",headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({data:o}),success:function(e){console.log(e),$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),200==e.code?(layer.msg(e.message,{icon:1}),n.reload({where:{conditionFour:t}})):201==e.code?layer.msg(e.message,{icon:2}):202==e.code?(layer.msg(e.message,{icon:7}),n.reload({where:{conditionFour:t}})):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:2})}})}):layer.msg("请选择需要删除的图片或视频",{icon:7})}),$(".submitAuditBtn").click(function(){var e=null,t=null,o=[],t=0==$(this).attr("typeId")?(e=c.checkStatus("ImgListData"),m):1==$(this).attr("typeId")?(e=c.checkStatus("VideoListData"),g):(e=c.checkStatus("detailsId"),C);0<e.data.length?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),console.log(e),e.data.forEach(function(e,t){var a={number:e.number,status:"1"};o.push(a)}),console.log(o),h("1",o,t,$(this).attr("typeId"),"/api/good_material/submitGoodMaterial")):layer.msg("请选择需要提交审核的图片或视频",{icon:7})}),$(".auditBtn").click(function(){var t=null,a=null,o=this,n=[],a=0==$(this).attr("typeId")?(t=c.checkStatus("ImgListData"),m):1==$(this).attr("typeId")?(t=c.checkStatus("VideoListData"),g):(t=c.checkStatus("detailsId"),C);0<t.data.length?layer.confirm(2==$(o).attr("type")?"确定审核通过":"确定审核不通过？",function(e){layer.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),t.data.forEach(function(e,t){var a={number:e.number,status:$(o).attr("type")};n.push(a)}),h("0",n,a,$(o).attr("typeId"),"/api/good_material/checkGoodMaterial")}):layer.msg("请选择需要提交审核的图片或视频",{icon:7})}),(window.onresize=function(){var e=$(window).height(),t=$(window).width();t<=768?$(".tailoring-content").css({top:(e-$(".tailoring-content").outerHeight())/2,left:0}):$(".tailoring-content").css({top:(e-$(".tailoring-content").outerHeight())/2,left:(t-$(".tailoring-content").outerWidth())/2})})(),$("#chooseImg").on("change",function(){console.log(this);var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){var t=e.target.result;$("#tailoringImg").cropper("replace",t,!1)},e.readAsDataURL(this.files[0]))}),$("#tailoringImg").cropper((F(e={aspectRatio:1,preview:".previewImg",guides:!1,autoCropArea:.5,movable:!1,dragCrop:!0},"movable",!0),F(e,"resizable",!0),F(e,"zoomable",!1),F(e,"mouseWheelZoom",!1),F(e,"touchDragZoom",!0),F(e,"rotatable",!0),F(e,"crop",function(){}),e)),$(".cropper-rotate-btn").on("click",function(){$("#tailoringImg").cropper("rotate",45)}),$(".cropper-reset-btn").on("click",function(){$("#tailoringImg").cropper("reset")});var y=!0;$(".cropper-scaleX-btn").on("click",function(){y=y?($("#tailoringImg").cropper("scaleX",-1),!1):($("#tailoringImg").cropper("scaleX",1),!0)});var I=null;$("#sureCut").on("click",function(){if(null==$("#tailoringImg").attr("src"))return!1;var e=$("#tailoringImg").cropper("getCroppedCanvas").toDataURL("image/png");$(".tailoring-container").fadeOut();var t=dataURLtoFile(e,"jpg");console.log(t);var a=new FormData;a.append("file",t),console.log(a),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"/api/fileUpload",processData:!1,contentType:!1,headers:{token:token},data:a,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),console.log(e),0==e.code?(I=e.data.src,$("#GoodsImg").attr("src",I),$(".ImgCropping").fadeOut(),$(".upload-list").fadeIn()):layer.msg(e.msg)},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".close-tailoring").click(function(){$(".ImgCropping").fadeOut()}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()});var k,v,w,C=c.render({elem:"#detailsImgData",method:"post",url:"/api/good_material/getGoodMaterial",contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"img",width:150,title:"图片",templet:"#detailsImgtmp"},{field:"name",width:180,title:"图片名"},{field:"status",width:180,title:"审核状态",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"图片编号"},{field:"addUser",width:150,title:"创建人"},{field:"publishTime",width:180,title:"创建时间"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoImg"}]],page:!0,id:"detailsId",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"2",conditionSix:sessionStorage.machineID},response:{statusCode:200},done:function(e){D(),403==e.code&&(window.parent.location.href="login.html")}});$(".details .add-btn").click(function(){$('.addDetailsImgCont input[name="detailsImgNane"]').val(""),f=null,popupShow("addDetailsImgCont","addDetailsImgBox")}),$('.addDetailsImgCont input[name="fileDetails"]').change(function(e){var t=this,a=new FormData;a.append("file",e.target.files[0]),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"/api/fileUpload",processData:!1,contentType:!1,headers:{token:token},data:a,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),console.log(e),$(t).val(""),0==e.code?(f=e.data.src,$(".upload-list2").fadeIn(),$("#GoodsDetailsImg").attr("src",e.data.src)):layer.msg(e.message,{icon:7})},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".detailsImgBtn").click(function(){$('.addDetailsImgBody input[name="detailsImgNane"]').val()?$("#GoodsDetailsImg").attr("src")?$.ajax({type:"post",url:"/api/good_material/saveGoodMaterial",headers:{"Content-Type":"application/json",token:token},data:JSON.stringify({attribute:"2",img:$("#GoodsDetailsImg").attr("src"),name:$('.addDetailsImgBody input[name="detailsImgNane"]').val()}),success:function(e){console.log(e),200==e.code?(popupHide("addDetailsImgCont","addDetailsImgBox"),$('.addDetailsImgBody input[name="detailsImgNane"]').val(""),$(".upload-list2").fadeOut(),$("#GoodsDetailsImg").attr("src",""),layer.msg(e.message,{icon:1}),C.reload({where:{}})):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:2})}}):layer.msg("请上传图片",{icon:7}):layer.msg("请输入图片",{icon:7})}),c.on("tool(detailsImgData)",function(e){console.log(e),p=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑详情图片"),$(".editBody label").html("图片名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=C):(popupShow("videoPlay","playBox"),$(".playBody div").html('<img src="'.concat(p.img,'" alt="">')))}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()}),k=v=w=treeList(),treeFunMaterial(n,"LogoIMG",m,k,"conditionSix","treelistOne"),treeFunMaterial(n,"detailsIMG",C,v,"conditionSix","treelistTwo"),treeFunMaterial(n,"dataGoodsVideo",g,w,"conditionSix","treelistThree"),$(".sidebar i").click(function(){console.log($(this).parent()),console.log($(this).parents()),$(this).parents(".left-mian").hide(),$(this).parents(".left-mian").siblings(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$(".refreshBtn").click(function(){location.reload()});var b=!1,S=!1,x=!1,B=!1;function D(){b?$(".addBtn").removeClass("hide"):$(".addBtn").addClass("hide"),S?$(".editBtn").removeClass("hide"):$(".editBtn").addClass("hide"),x?$(".dleBtn").removeClass("hide"):$(".dleBtn").addClass("hide"),B?$(".auditBtnTwo").removeClass("hide"):$(".auditBtnTwo").addClass("hide")}permissionsVal(380,381,379,382).then(function(e){console.log(e),b=e.addFlag,S=e.editFlag,x=e.delFlag,B=e.fourFlag,D()}).catch(function(e){layer.msg("服务器请求超时",{icon:7})})})},375:function(e,t){}});