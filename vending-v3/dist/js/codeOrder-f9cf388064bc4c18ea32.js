/*! 版权所有，翻版必究 */!function(c){function e(e){for(var t,n,i=e[0],o=e[1],a=e[2],r=0,l=[];r<i.length;r++)n=i[r],Object.prototype.hasOwnProperty.call(d,n)&&d[n]&&l.push(d[n][0]),d[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(c[t]=o[t]);for(f&&f(e);l.length;)l.shift()();return u.push.apply(u,a||[]),s()}function s(){for(var e,t=0;t<u.length;t++){for(var n=u[t],i=!0,o=1;o<n.length;o++){var a=n[o];0!==d[a]&&(i=!1)}i&&(u.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},d={7:0},u=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=c,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var f=i;u.push([154,0]),s()}({154:function(e,t,n){"use strict";n.r(t);t=n(422);layui.use(["laydate","table","tree","flow","layer","form"],function(){var t="",n="";layui.laydate.render({elem:"#test6",range:!0,done:function(e){e=e.split(" - ");t=e[0],n=e[1]}});var e=sessionStorage.token,i=(layui.tree,layui.flow),o=layui.layer,a=layui.table,r=(layui.form,a.render({elem:"#moneyData",url:"/api/order/getCodeOrder",method:"post",contentType:"application/json",headers:{token:e},cols:[[{field:"activity_name",width:130,title:"活动名",align:"center"},{field:"good_code",width:210,title:"取货码",align:"center"},{field:"machineName",width:200,title:"终端名",align:"center"},{field:"machineAddress",width:210,title:"终端地址",align:"center"},{field:"ship_info",width:250,title:"出货情况",align:"center",templet:function(e){if(0==e.ship_info.length)return"-";var n="";return e.ship_info.forEach(function(e,t){n+="<div>".concat(e.goods_Name,"(").concat(e.way,"货道").concat(0==e.ship_status?"出货失败":1==e.ship_status?"出货成功":"货道故障",")</div>")}),n}},{field:"operate_time",width:150,align:"center",title:"取货时间",templet:function(e){return e.operate_time?timeStamp(e.operate_time):"-"}},{field:"operate_time",width:100,title:"退货状态",align:"center",templet:function(e){return 0==e.refund?"未退货":"已退货"}},{field:"operation",width:100,title:"操作",toolbar:"#refundDemo",align:"center"}]],page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchant_id:Number(sessionStorage.machineID)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(){}}));i.load({elem:"#demo",isAuto:!0,scrollElem:"#demo",end:" ",done:function(t,i){setTimeout(function(){var n=[];i(n.join(""),t<3);var e=JSON.stringify({pageNum:t,pageSize:10});loadingAjax("/api/activity/getActivityList","post",e,sessionStorage.token).then(function(e){e.data.list.forEach(function(e,t){n.push('<span activityID="'.concat(e.id,'">').concat(e.activity_name,"</span>"))}),i(n.join(""),10<=e.data.list)}).catch(function(e){console.log(e),o.msg(e.message,{icon:7}),i(n.join(""),200==e.code)})},200)}}),$(".queryBtn").click(function(){t?r.reload({where:{start_time:t,end_time:n}}):r.reload({where:{start_time:null,end_time:null}})});var l="";$("body").on("click",".activityArr span",function(){$(".allmachine").removeClass("active"),$(this).addClass("active").siblings().removeClass("active"),l=$(this).attr("activityID"),r.reload({where:{activity_id:Number(l)}})}),$(".allmachine").click(function(){$(this).addClass("active"),$(".activityArr span").removeClass("active"),l="",r.reload({where:{activity_id:null}})}),a.on("row(moneyData)",function(e){var t=e.data;console.log(e),1!=t.refund&&o.confirm("确定退货？",function(e){o.close(e);e=JSON.stringify({good_code:t.good_code});loadingAjax("/api/machine/activityRefund","post",e,sessionStorage.token).then(function(e){o.msg(e.message,{icon:1}),r.reload({where:{}})}).catch(function(e){o.msg(e.message,{icon:2})})})})})},422:function(e,t){}});