/*! 版权所有，翻版必究 */!function(d){function e(e){for(var t,a,n=e[0],o=e[1],i=e[2],s=0,r=[];s<n.length;s++)a=n[s],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&r.push(c[a][0]),c[a]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(d[t]=o[t]);for(f&&f(e);r.length;)r.shift()();return u.push.apply(u,i||[]),l()}function l(){for(var e,t=0;t<u.length;t++){for(var a=u[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==c[i]&&(n=!1)}n&&(u.splice(t--,1),e=s(s.s=a[0]))}return e}var a={},c={6:0},u=[];function s(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return d[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=d,s.c=a,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var f=n;u.push([136,0]),l()}({136:function(e,t,a){"use strict";a.r(t);a(373);layui.use(["table","form","layer","tree"],function(){sessionStorage.classTag=sessionStorage.machineID;var e=layui.table,a=layui.layer,t=layui.tree,n=null,o=sessionStorage.token,i=e.render({elem:"#tableTest",url:"/api/classify/findAll",method:"post",contentType:"application/json",headers:{token:o},cols:[[{field:"1",width:80,title:"",templet:"#imgtmp",event:"rank"},{field:"rank",width:80,title:"排序"},{field:"classifyName",width:150,title:"类目名"},{field:"remark",width:150,title:"备注"},{field:"user",width:150,title:"创建人",templet:function(e){return null!=e.user?e.user.userName:""}},{field:"classifyTime",width:200,title:"创建时间"},{field:"lastUser",width:150,title:"最后修改人"},{field:"lastTime",width:190,title:"最后修改时间"},{field:"operation",position:"absolute",right:0,width:200,title:"操作",toolbar:"#barDemo"}]],id:"tableId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){n=e.data,p(),405==e.code&&$(".hangContent").show()}});$(".query-btn").click(function(){i.reload({where:{classifyName:$(".keyText").val()}})});$(".add-btn").click(function(){$('.addClass input[name="addTypeName"]').val(""),$('.addClass input[name="addNote"]').val(""),popupShow("addClass","addContent")}),$(".cancel-btn").click(function(){popupHide("addClass","addContent")});var s=layui.form;$(".determine-btn").click(function(){var e=s.val("aDDValData");e.addTypeName?$.ajax({type:"post",url:"/api/classify/saveClassify",headers:{"Content-Type":"application/json",token:o},data:JSON.stringify({classifyName:e.addTypeName,remark:e.addNote,merchantId:Number(sessionStorage.machineID)}),success:function(e){popupHide("addClass","addContent"),200==e.code?(a.msg(e.message,{icon:1}),i.reload({where:{}}),loadingAjax("/api/refreshGoods","post","",sessionStorage.token).then(function(e){}).catch(function(e){})):403==e.code?window.parent.location.href="login.html":a.msg(e.message,{icon:2})},error:function(){a.msg("服务器请求超时",{icon:2})}}):a.msg("请填写类型名")});var r=null;e.on("tool(test)",function(t){var e;r=t.data,"edit"===t.event?(popupShow("editClass","editContent"),s.val("editValData",{addTypeName:r.classifyName,addNote:r.remark})):"delete"===t.event?(console.log(t),a.confirm("确定删除？",function(e){Goodsdel(r,2,t,e,i,sessionStorage.classTag)})):"rank"==t.event&&(console.log(t),e=JSON.stringify({topId:n[t.data.rank-1].classifyId,bottomId:n[t.data.rank-2].classifyId,merchantId:sessionStorage.classTag}),loadingAjax("/api/classify/sortClassify","post",e,o,"","","",a).then(function(e){a.msg(e.message,{icon:1}),i.reload({where:{}})}).catch(function(e){a.msg(e.message,{icon:2})}))}),$(".editDetermine-btn").click(function(){var e=s.val("editValData");e.addTypeName?$.ajax({type:"post",url:"/api/classify/updateClassify",headers:{"Content-Type":"application/json",token:o},data:JSON.stringify({classifyId:r.classifyId,classifyName:e.addTypeName,remark:e.addNote,merchantId:Number(sessionStorage.machineID)}),success:function(e){popupHide("editClass","editContent"),200==e.code?(a.msg(e.message,{icon:1}),i.reload({where:{}}),loadingAjax("/api/refreshGoods","post","",sessionStorage.token).then(function(e){}).catch(function(e){})):403==e.code?window.parent.location.href="login.html":a.msg(e.message,{icon:2})}}):a.msg("请填写类型名")}),$(".editCancel-btn").click(function(){popupHide("editClass","editContent")}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()});var d=treeList();treeFun(t,"testGoods",i,d,"merchantId","","","","true"),$(".refreshBtn").click(function(){location.reload()}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()});var l=!1,c=!1,u=!1,f=!1;function p(){l?$(".add-btn").removeClass("hide"):$(".add-btn").addClass("hide"),c?$(".TEdit").removeClass("hide"):$(".TEdit").addClass("hide"),u?$(".TDel").removeClass("hide"):$(".TDel").addClass("hide"),f?$(".rankImg").removeClass("hide"):$(".rankImg").addClass("hide")}permissionsVal(373,374,372,403).then(function(e){l=e.addFlag,c=e.editFlag,u=e.delFlag,f=e.fourFlag,p()}).catch(function(e){a.msg("服务器请求超时",{icon:7})})})},373:function(e,t){}});