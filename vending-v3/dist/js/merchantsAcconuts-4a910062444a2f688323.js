/*! 版权所有，翻版必究 */!function(s){function e(e){for(var t,o,n=e[0],a=e[1],r=e[2],i=0,c=[];i<n.length;i++)o=n[i],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&c.push(l[o][0]),l[o]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t]);for(f&&f(e);c.length;)c.shift()();return d.push.apply(d,r||[]),u()}function u(){for(var e,t=0;t<d.length;t++){for(var o=d[t],n=!0,a=1;a<o.length;a++){var r=o[a];0!==l[r]&&(n=!1)}n&&(d.splice(t--,1),e=i(i.s=o[0]))}return e}var o={},l={15:0},d=[];function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=s,i.c=o,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var f=n;d.push([139,0]),u()}({139:function(e,t,o){"use strict";o.r(t);o(379);layui.use(["table","laydate","tree","layer"],function(){var e=layui.laydate,t=layui.tree,o=layui.layer,a=sessionStorage.token,n="",r="";sessionStorage.acconutsID=sessionStorage.machineID,e.render({elem:"#itemrs1",type:"month",range:!0,done:function(e){timerKey=e.split(" - "),n=timerKey[0],r=timerKey[1]}});var i=layui.table,c=i.render({elem:"#moneyData",url:"/api/accounts/getEachMonth",method:"post",contentType:"application/json",headers:{token:a},cols:[[{field:"month",width:160,title:"月份",templet:function(e){return e.year+"年"+e.month+"月"}},{field:"total",width:160,title:"营业额(元)",templet:function(e){return Number(e.total.toFixed(2)).toLocaleString()}},{field:"order_count",width:160,title:"客单量(笔)"},{field:"good_count",width:160,title:"商品销量(件)"},{field:"operation",width:160,title:"详情",toolbar:"#barDemo"}]],page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:Number(sessionStorage.machineID)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){var t;200==e.code?(1!=d&&(t=JSON.stringify({merchantId:sessionStorage.acconutsID}),loadingAjax("/api/accounts/getData","post",t,sessionStorage.token).then(function(e){0==e.data.order_count?($(".turnover p").html(0),$(".guestOrders p").html(0),$(".goodsNumber p").html(0)):(animateNumberFun(".turnover p",e.data.total,1),animateNumberFun(".guestOrders p",e.data.order_count,2),animateNumberFun(".goodsNumber p",e.data.good_count,2))}).catch(function(e){o.msg(e.message,{icon:2})})),d=0):403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}}),s=treeList();console.log(s);var u;treeFunMaterial(t,"test1",c,s,"merchantId","acconutsTree",1),i.on("tool(moneyData)",function(e){console.log(e),u=e.data,$(".accountsDetailsBox .playHeader span").html(u.year+"年"+u.month+"月账目详情");var t=u.year+"-"+(10<=u.month?u.month:"0"+u.month)+"-01",o=u.year+"-"+(10<=u.month?u.month:"0"+u.month)+"-31";l=l||i.render({elem:"#dateDetails",url:"/api/order/getOrderList",method:"post",contentType:"application/json",headers:{token:a},cols:[[{field:"time",width:200,title:"支付时间"},{field:"number",width:200,title:"订单号"},{field:"amount",width:160,title:"金额(元)",templet:function(e){return Number(e.amount.toFixed(2)).toLocaleString()}},{field:"ofNumber",width:160,title:"商品销量(件)",templet:function(e){var o=0;return e.goodsList.forEach(function(e,t){o+=e.count}),o}},{field:"refund",width:160,title:"退款数(件)",templet:function(e){var o=0;return e.goodsList.forEach(function(e,t){o+=e.refund_count}),o}}]],page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionFive:sessionStorage.acconutsID},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){200==e.code||405==e.code&&$(".hangContent").show()}});var n=sessionStorage.acconutsID;l.reload({where:{condition:t,conditionTwo:o,conditionFive:n}}),popupShow("accountsDetailsCont","accountsDetailsBox")});var l=null;$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".onLeft").show()}),$(".onLeft").click(function(){$(this).hide(),$(".left-mian").show()});var d=0;$(".queryBtn").click(function(){d=1,c.reload({where:{start:n,end:r}})}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()})}),$(".refreshBtn").click(function(){location.reload()})},379:function(e,t){}});