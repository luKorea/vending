/*! 版权所有，翻版必究 */!function(l){function e(e){for(var t,n,a=e[0],i=e[1],o=e[2],r=0,d=[];r<a.length;r++)n=a[r],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(l[t]=i[t]);for(m&&m(e);d.length;)d.shift()();return u.push.apply(u,o||[]),c()}function c(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==s[o]&&(a=!1)}a&&(u.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},s={16:0},u=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=l,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var m=a;u.push([138,0]),c()}({138:function(e,t,n){"use strict";n.r(t);n(377);layui.use(["table","form","layer","tree","util"],function(){var a=layui.jquery,e=layui.table,i=layui.layer,i=layui.layer,o=(layui.util,layui.tree);layui.form;token=sessionStorage.token;var r=e.render({elem:"#tableTest",url:"/api/merchant/getMerchantList",method:"post",contentType:"application/json",headers:{token:token},cols:[[{field:"title",width:180,title:"商户名"},{field:"merchantName",width:150,title:"上级商户",templet:function(e){return 0==e.id?"":e.merchantName}},{field:"alias",width:160,title:"商户编号"},{field:"addUser",width:150,title:"创建人"},{field:"addTime",width:180,title:"创建时间"},{field:"lastUser",width:150,title:"最后修改人"},{field:"lastTime",width:180,title:"最后修改时间"},{field:"operation",width:150,title:"操作",toolbar:"#barDemo"}]],id:"tableId",page:!0,loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionTwo:sessionStorage.machineID,conditionThree:"0"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){s(),403==e.code?window.parent.location.href="login.html":405==e.code&&a(".hangContent").show()}});a(".sidebar i").click(function(){a(".left-mian").hide(),a(".onLeft").show()}),a(".onLeft").click(function(){a(this).hide(),a(".left-mian").show()});var t=null;e.on("tool(test)",function(e){if(t=e.data,console.log(t),"edit"===e.event){if(0==n.length)return void i.msg("服务器请求超时",{icon:7});a('.editMerchants input[name="merchantsName"]').val(t.title),popupShow("MemberOperation","MemberContent"),1==t.id?a('.listInput input[name="marchantsText"]').val(""):a('.listInput input[name="marchantsText"]').val(t.merchantName),a(".marchantsList").val(t.topMerchant)}else if("delete"===e.event){if(1==t.id)return void i.msg(t.title+"不能进行删除操作",{icon:7});i.confirm("确定删除？",function(n){a.ajax({type:"post",url:"/api/merchant/deleteMerchant",headers:{token:token,"Content-Type":"application/json"},data:JSON.stringify({id:t.id,topMerchant:t.topMerchant}),success:function(e){var t;console.log(e),i.close(n),200==e.code?(i.msg("删除成功",{icon:1}),treeList(),t=treeList(),o.reload("treelistEdit",{data:t}),r.reload({where:{}})):403==e.code?window.parent.location.href="login.html":405==e.code?i.msg(e.msg,{icon:7}):i.msg("删除失败",{icon:2})}})})}}),a(".queryBtnClick").click(function(){r.reload({where:{condition:a('.addMember input[name="keyMerchants"]').val(),conditionThree:"1"}})}),a(".addBtn").click(function(){0!=n.length?(a('.addBox input[name="marchantsListname"]').val(""),popupShow("addMerchants","addBox")):i.msg("服务器请求超时",{icon:7})}),a(".cancel_btn").click(function(){popupHide("MemberOperation","MemberContent")}),a(".playHeader .close").click(function(){a(this).parent().parent().addClass("margin0"),a(this).parents(".maskContnet").fadeOut()}),a(".addBox .addCancelBtn").click(function(){popupHide("addMerchants","addBox")}),a(".addBody .addSubmiBtn").click(function(){console.log(a('.addBox input[name="addmarchantsVal"]').val());var e,t=a('.addBox input[name="addmarchantsVal"]').val().split(" ");a('.addBox input[name="merchantsName"]').val()&&a('.addBox input[name="addmarchantsVal"]').val()?(e=JSON.stringify({name:a('.addBox input[name="merchantsName"]').val(),topMerchant:Number(t[0]),alias:t[1]}),loadingAjax("/api/merchant/newMerchant","post",e,sessionStorage.token,"","addMerchants","addBox",i).then(function(e){a('.addBox input[name="merchantsName"]').val(""),i.msg(e.message,{icon:1}),treeList();var t=treeList();o.reload("treelistEdit",{data:t}),r.reload({where:{}})}).catch(function(e){i.msg(e.message,{icon:2})})):i.msg("带*号为必填",{icon:7})}),a(".Medit .submit_btn").click(function(){var e;a('.editMerchants input[name="merchantsName"]').val()?(e=JSON.stringify({id:t.id,name:a('.editMerchants input[name="merchantsName"]').val(),topMerchant:Number(a(".marchantsList").val())}),loadingAjax("/api/merchant/updateMerchant","post",e,sessionStorage.token,"","MemberOperation","MemberContent",i).then(function(e){var t=treeList();o.reload("treelistEdit",{data:t}),i.msg(e.message,{icon:1}),r.reload({where:{}})}).catch(function(e){i.msg(e.message,{icon:2})})):(console.log(),i.msg("带*未填写",{icon:7}))});var n=null;n=treeList();console.log(n),a('.addBox input[name="marchantsListname"]').prop("placeholder",n[0].title),a('.addBox input[name="addmarchantsVal"]').val(n[0].id+" "+n[0].alias),console.log(a('.addBox input[name="addmarchantsVal"]').val()),a("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()});o.render({elem:"#test1",id:"treelistEdit",showLine:!0,onlyIconControl:!0,isJump:!1,edit:!1,data:n,text:{defaultNodeName:"您没有权限，请联系管理员授权!",none:""},click:function(e){console.log(e),console.log(e.data.id),r.reload({where:{conditionTwo:e.data.id+"",conditionThree:"0"}});for(var t=a("#test1 .layui-tree-txt"),n=0;n<t.length;n++)t[n].innerHTML===e.data.title?t[n].style.color="#be954a":t[n].style.color="#555";a('.addBox input[name="marchantsListname"]').prop("placeholder",e.data.title),a('.addBox input[name="addmarchantsVal"]').val(e.data.id+" "+e.data.alias),console.log(a('.addBox input[name="marchantsListname"]').val())}});var d=!1,l=!1,c=!1;function s(){d?a(".addBtn").removeClass("hide"):a(".addBtn").addClass("hide"),l?a(".editBtn").removeClass("hide"):a(".editBtn").addClass("hide"),c?a(".del-btn").removeClass("hide"):a(".del-btn").addClass("hide")}permissionsVal(393,394,395).then(function(e){d=e.addFlag,l=e.editFlag,c=e.delFlag,s()}).catch(function(e){i.msg("服务器请求超时",{icon:7})}),a(".refreshBtn").click(function(){location.reload()})})},377:function(e,t){}});