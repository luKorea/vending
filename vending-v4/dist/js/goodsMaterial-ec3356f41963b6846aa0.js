/*! 版权所有，翻版必究 */!function(d){function e(e){for(var t,a,n=e[0],o=e[1],i=e[2],l=0,s=[];l<n.length;l++)a=n[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&s.push(c[a][0]),c[a]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(d[t]=o[t]);for(u&&u(e);s.length;)s.shift()();return m.push.apply(m,i||[]),r()}function r(){for(var e,t=0;t<m.length;t++){for(var a=m[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==c[i]&&(n=!1)}n&&(m.splice(t--,1),e=l(l.s=a[0]))}return e}var a={},c={12:0},m=[];function l(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return d[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=d,l.c=a,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var u=n;m.push([141,0]),r()}({141:function(e,t,a){"use strict";a.r(t);t=a(393);function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.use(["form","layer","laydate","table","tree"],function(){$(".navTab li").click(function(){console.log($(this).index()),2==$(this).index()?g||(g=r.render({elem:"#VideoData",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"name",width:180,title:"视频名",align:"center"},{field:"name",width:180,title:"审核状态",align:"center",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"视频编号",align:"center"},{field:"addUser",width:150,title:"创建人",align:"center"},{field:"publishTime",width:180,title:"创建时间",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoVideo",align:"center"}]],page:!0,id:"VideoListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"1",conditionSix:sessionStorage.machineID,condition:i,conditionTwo:l},response:{statusCode:200},done:function(e){x(),403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}}),treeFunMaterial(o,"dataGoodsVideo",g,k,"conditionSix","treelistThree")):1==$(this).index()&&(v||(v=r.render({elem:"#detailsImgData",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"img",width:150,title:"图片",templet:"#detailsImgtmp",align:"center"},{field:"name",width:180,title:"图片名",align:"center"},{field:"status",width:180,title:"审核状态",align:"center",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"图片编号",align:"center"},{field:"addUser",width:150,title:"创建人",align:"center"},{field:"publishTime",width:180,title:"创建时间",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoImg",align:"center"}]],page:!0,id:"detailsId",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"2",conditionSix:sessionStorage.machineID,condition:s,conditionTwo:d},response:{statusCode:200},done:function(e){x(),403==e.code&&(window.parent.location.href="login.html")}}),treeFunMaterial(o,"detailsIMG",v,I,"conditionSix","treelistTwo"))),$(this).addClass("active").siblings().removeClass("active");var e=$(this);$(".tabLine").animate({left:e.offset().left+"px"},500),$(".tabBox>div").eq($(this).index()).fadeIn().siblings().fadeOut()});var t=getKeyTime().startTime,a=getKeyTime().endTime,n=layui.form,o=layui.tree,e=layui.laydate;e.render({elem:"#itemrs1",range:!0,value:getKeyTime().keyTimeData,done:function(e){console.log(e);e=e.split(" - ");console.log(e),t=e[0],a=e[1]}});var i=getKeyTime().startTime,l=getKeyTime().endTime;e.render({elem:"#itemrs2",range:!0,value:getKeyTime().keyTimeData,done:function(e){console.log(e);e=e.split(" - ");console.log(e),i=e[0],l=e[1]}});var s=getKeyTime().startTime,d=getKeyTime().endTime;e.render({elem:"#itemrs3",range:!0,value:getKeyTime().keyTimeData,done:function(e){console.log(e);e=e.split(" - ");console.log(e),s=e[0],d=e[1]}}),$(".videoList video").click(function(){$(".playVideo video").attr("src",$(this).attr("src")),$(".videoPlay").fadeIn()}),$(".mask").click(function(){$(".videoPlay").fadeOut(function(){$(".playVideo video").attr("src","")})}),$(".ImgContnet .add-btn").click(function(){$('.addImgCont input[name="ImgNane"]').val(""),y=null,popupShow("addImgCont","addImgBox")}),$(".addImgFooter .cancel-btn").click(function(){popupHide("addImgCont","addImgBox")}),$(".VideoContnet .add-btn").click(function(){$('.addVideoCont input[name="VideoName"]').val(""),p=null,popupShow("addVideoCont","addVideoBox")}),$(".addVideoFooter .cancel-btn").click(function(){popupHide("addVideoCont","addVideoBox")});var r=layui.table,c=r.render({elem:"#ImgData",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:token},cols:[[{type:"checkbox"},{field:"img",width:150,title:"图片",templet:"#imgtmp",align:"center"},{field:"name",width:180,title:"图片名",align:"center"},{field:"status",width:180,title:"审核状态",align:"center",templet:function(e){return 0==e.status?"未审核":1==e.status?"待审核":2==e.status?"审核通过":"审核不通过"}},{field:"number",width:200,title:"图片编号",align:"center"},{field:"addUser",width:150,title:"创建人",align:"center"},{field:"publishTime",width:180,title:"创建时间",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoImg",align:"center"}]],page:!0,id:"ImgListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:"0",conditionSix:sessionStorage.machineID,condition:t,conditionTwo:a},response:{statusCode:200},done:function(e){x(),403==e.code&&(window.parent.location.href="login.html")}}),m=null,u=null;r.on("tool(ImgData)",function(e){console.log(e),m=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑商品图片"),$(".editBody label").html("图片名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=c):(popupShow("videoPlay","playBox"),$(".playBody div").html('<img src="'.concat(m.img,'" alt="">')))}),$(".editImgBtn").click(function(){var e,t=[];$('.FlexInputWidth input[name="EidtImgNane"]').val()?(e={number:m.number,name:$('.FlexInputWidth input[name="EidtImgNane"]').val()},t.push(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),loadingAjax("/good_material/updateGoodMaterial","post",JSON.stringify({data:t}),sessionStorage.token,"mask","editImgCont","editBox",layer).then(function(e){layer.msg(e.message,{icon:1}),setTimeout(function(){u.reload({where:{}})},100)}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("素材名不能为空",{icon:7})}),$(".ImgQueyuBtnClick").click(function(){timeFlag(t,a)?layer.msg("时间选择范围最多三个月",{icon:7}):c.reload({where:{conditionThree:$('.newKeyContent input[name="KeyImgName"]').val(),conditionFour:"0",condition:t,conditionTwo:a,conditionFive:$('.ImgContnet select[name="logoImgStatus"]').val()}})}),$(".VideoQueryBtnClick").click(function(){g.reload({where:{conditionThree:$('.newKeyContent input[name="keyVideoName"]').val(),conditionFour:"1",condition:i,conditionTwo:l,conditionFive:$('.VideoContnet select[name="videoStatus"]').val()}})}),$(".detailsImgQueyuBtnClick").click(function(){timeFlag(s,d)?layer.msg("时间选择范围最多三个月",{icon:7}):v.reload({where:{conditionThree:$('.details input[name="KeyImgName"]').val(),conditionFour:"2",condition:s,conditionTwo:d,conditionFive:$('.details select[name="detailsImgStatus"]').val()}})});var g=null;r.on("tool(VideoData)",function(e){console.log(e),m=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑商品视频"),$(".editBody label").html("视频名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=g):(popupShow("videoPlay","playBox"),$(".playBody div").html('<video src="'.concat(m.img,'" controls="controls"></video>')))}),$(".editCancelBtn").click(function(){popupHide("editImgCont","editBox")}),$(".addDetailsImgCont .detalisCancelBtn").click(function(){popupHide("addDetailsImgCont","addDetailsImgBox")}),$(".uploadBtn").click(function(){$("#tailoringImg").cropper("destroy"),$(".ImgCropping").fadeIn(),$(".tailoring-container").fadeIn()}),$(".ImgBtn").click(function(){var e=n.val("ImgData");e.ImgNane?y?(e=JSON.stringify({attribute:"0",img:y,name:e.ImgNane}),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),loadingAjax("/good_material/saveGoodMaterial","post",e,sessionStorage.token,"mask","addImgCont","addImgBox",layer).then(function(e){$('.FlexInputWidth ingpu[name="ImgNane"]').val(""),$("#GoodsImg").attr("src",""),y=null,$(".upload-list").hide(),layer.msg(e.message,{icon:1}),c.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("请上传图片",{icon:7}):layer.msg("图片名不能为空",{icon:7})});var p=null;function f(e,t,a,n,o){loadingAjax(o,"post",JSON.stringify({data:t,type:e}),sessionStorage.token,"mask","","",layer).then(function(e){layer.msg(e.message,{icon:1}),a.reload({where:{conditionFour:n}})}).catch(function(e){202==e.code?(layer.msg(e.message,{icon:7}),a.reload({where:{conditionFour:n}})):layer.msg(e.message,{icon:2})})}$(".uploadVideoChange").change(function(e){console.log(e);var t=new FormData;t.append("file",e.target.files[0]),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"".concat(vApi,"/fileUpload"),processData:!1,contentType:!1,timeout:1e4,headers:{token:token},data:t,success:function(e){console.log(e),$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),0==e.code?(p=e.data.src,$(".uploadVideo").fadeIn(),$(".uploadVideo video").attr("src",e.data.src)):layer.msg(e.message,{icon:7})},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".addVideoBtn").click(function(){var e;$('.FlexInputWidth input[name="VideoName"]').val()?p?(e=JSON.stringify({attribute:"1",img:p,name:$('.FlexInputWidth input[name="VideoName"]').val()}),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),loadingAjax("/good_material/saveGoodMaterial","post",e,sessionStorage.token,"mask","addVideoCont","addVideoBox").then(function(e){$('.FlexInputWidth input[name="VideoName"]').val(""),p=null,$(".uploadVideo video").attr("src",""),$(".uploadVideo").fadeOut(),layer.msg(e.message,{icon:1}),g.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("请上传视频",{icon:7}):layer.msg("视频名不能为空",{icon:7})}),$(".delBtn").click(function(){console.log($(this).attr("typeId"));var t=$(this).attr("typeId"),n=null,o=null,o=0==$(this).attr("typeId")?(n=r.checkStatus("ImgListData"),c):1==$(this).attr("typeId")?(n=r.checkStatus("VideoListData"),g):(n=r.checkStatus("detailsId"),v);console.log(n),0<n.data.length?layer.confirm("确定删除？",function(e){layer.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var a=[];n.data.forEach(function(e,t){e={number:e.number};a.push(e)}),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),loadingAjax("/good_material/deleteGoodMaterial","post",JSON.stringify({data:a}),sessionStorage.token,"mask","","",layer).then(function(e){layer.msg(e.message,{icon:1}),o.reload({where:{conditionFour:t}})}).catch(function(e){202==e.code?(layer.msg(res.message,{icon:7}),o.reload({where:{conditionFour:t}})):layer.msg(e.message,{icon:2})})}):layer.msg("请选择需要删除的图片或视频",{icon:7})}),$(".submitAuditBtn").click(function(){var e=null,t=null,a=[],t=0==$(this).attr("typeId")?(e=r.checkStatus("ImgListData"),c):1==$(this).attr("typeId")?(e=r.checkStatus("VideoListData"),g):(e=r.checkStatus("detailsId"),v);console.log(),0<e.data.length?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),console.log(e),e.data.forEach(function(e,t){e={number:e.number,status:"1"};a.push(e)}),console.log(a),f("1",a,t,$(this).attr("typeId"),"/good_material/submitGoodMaterial")):layer.msg("请选择需要提交审核的图片或视频",{icon:7})}),$(".auditBtn").click(function(){var t=null,a=null,n=this,o=[],a=0==$(this).attr("typeId")?(t=r.checkStatus("ImgListData"),c):1==$(this).attr("typeId")?(t=r.checkStatus("VideoListData"),g):(t=r.checkStatus("detailsId"),v);0<t.data.length?layer.confirm(2==$(n).attr("type")?"确定审核通过":"确定审核不通过？",function(e){layer.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),t.data.forEach(function(e,t){e={number:e.number,status:$(n).attr("type")};o.push(e)}),f("0",o,a,$(n).attr("typeId"),"/good_material/checkGoodMaterial")}):layer.msg("请选择需要提交审核的图片或视频",{icon:7})}),(window.onresize=function(){var e=$(window).height(),t=$(window).width();t<=768?$(".tailoring-content").css({top:(e-$(".tailoring-content").outerHeight())/2,left:0}):$(".tailoring-content").css({top:(e-$(".tailoring-content").outerHeight())/2,left:(t-$(".tailoring-content").outerWidth())/2})})(),$("#chooseImg").on("change",function(){console.log(this);var e;this.files&&this.files[0]&&((e=new FileReader).onload=function(e){e=e.target.result;$("#tailoringImg").cropper("replace",e,!1)},e.readAsDataURL(this.files[0]))}),$("#tailoringImg").cropper((B(e={aspectRatio:1,preview:".previewImg",guides:!1,autoCropArea:.5,movable:!1,dragCrop:!0},"movable",!0),B(e,"resizable",!0),B(e,"zoomable",!1),B(e,"mouseWheelZoom",!1),B(e,"touchDragZoom",!0),B(e,"rotatable",!0),B(e,"crop",function(){}),e)),$(".cropper-rotate-btn").on("click",function(){$("#tailoringImg").cropper("rotate",45)}),$(".cropper-reset-btn").on("click",function(){$("#tailoringImg").cropper("reset")});var h=!0;$(".cropper-scaleX-btn").on("click",function(){h=h?($("#tailoringImg").cropper("scaleX",-1),!1):($("#tailoringImg").cropper("scaleX",1),!0)});var y=null;$("#sureCut").on("click",function(){if(null==$("#tailoringImg").attr("src"))return!1;var e=$("#tailoringImg").cropper("getCroppedCanvas").toDataURL("image/png");$(".tailoring-container").fadeOut();var t=dataURLtoFile(e,"jpg");console.log(t);e=new FormData;e.append("file",t),console.log(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"".concat(vApi,"/fileUpload"),processData:!1,contentType:!1,timeout:1e4,headers:{token:token},data:e,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),console.log(e),0==e.code?(y=e.data.src,$("#GoodsImg").attr("src",y),$(".ImgCropping").fadeOut(),$(".upload-list").fadeIn()):layer.msg(e.msg)},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".close-tailoring").click(function(){$(".ImgCropping").fadeOut()}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()});var I,k,v=null;$(".details .add-btn").click(function(){$('.addDetailsImgCont input[name="detailsImgNane"]').val(""),p=null,popupShow("addDetailsImgCont","addDetailsImgBox")}),$('.addDetailsImgCont input[name="fileDetails"]').change(function(e){var t=this,a=new FormData;a.append("file",e.target.files[0]),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"".concat(vApi,"/fileUpload"),processData:!1,contentType:!1,timeout:1e4,headers:{token:token},data:a,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),console.log(e),$(t).val(""),0==e.code?(p=e.data.src,$(".upload-list2").fadeIn(),$("#GoodsDetailsImg").attr("src",e.data.src)):layer.msg(e.message,{icon:7})},error:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg("上传失败",{icon:2})}})}),$(".detailsImgBtn").click(function(){var e;$('.addDetailsImgBody input[name="detailsImgNane"]').val()?$("#GoodsDetailsImg").attr("src")?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e=JSON.stringify({attribute:"2",img:$("#GoodsDetailsImg").attr("src"),name:$('.addDetailsImgBody input[name="detailsImgNane"]').val()}),loadingAjax("/good_material/saveGoodMaterial","post",e,sessionStorage.token,"mask","addDetailsImgCont","addDetailsImgBox",layer).then(function(e){$('.addDetailsImgBody input[name="detailsImgNane"]').val(""),$(".upload-list2").fadeOut(),$("#GoodsDetailsImg").attr("src",""),layer.msg(e.message,{icon:1}),v.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("请上传图片",{icon:7}):layer.msg("请输入图片名",{icon:7})}),r.on("tool(detailsImgData)",function(e){console.log(e),m=e.data,"edit"==e.event?(popupShow("editImgCont","editBox"),$(".editImgCont .playHeader span").html("编辑详情图片"),$(".editBody label").html("图片名："),$('.FlexInputWidth input[name="EidtImgNane"]').val(e.data.name),u=v):(popupShow("videoPlay","playBox"),$(".playBody div").html('<img src="'.concat(m.img,'" alt="">')))}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()}),e=I=k=treeList(),treeFunMaterial(o,"LogoIMG",c,e,"conditionSix","treelistOne"),$(".sidebar i").click(function(){console.log($(this).parent()),console.log($(this).parents()),$(this).parents(".left-mian").hide(),$(this).parents(".left-mian").siblings(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$(".refreshBtn").click(function(){location.reload()});var w=!1,b=!1,C=!1,S=!1;function x(){w?$(".addBtn").removeClass("hide"):$(".addBtn").addClass("hide"),b?$(".editBtn").removeClass("hide"):$(".editBtn").addClass("hide"),C?$(".dleBtn").removeClass("hide"):$(".dleBtn").addClass("hide"),S?$(".auditBtnTwo").removeClass("hide"):$(".auditBtnTwo").addClass("hide")}permissionsVal(380,381,379,382).then(function(e){console.log(e),w=e.addFlag,b=e.editFlag,C=e.delFlag,S=e.fourFlag,x()}).catch(function(e){layer.msg("服务器请求超时",{icon:7})});var D=!0;$(".materia-wrap").on("mouseenter",".pic102",function(e){$("#pic101").attr("src",$(this).attr("src"));var t=new Image;t.onload=function(){$("#pic101").css({width:this.width>=this.height?"350px":"auto",height:this.height>this.width?"450px":"auto"}).fadeIn("fast"),this.onload=null},t.src=$(this).attr("src")}),$(".materia-wrap").on("click",".pic102",function(){event.stopPropagation(),D=!1}),$(".materia-wrap").on("mouseleave",".pic102",function(){D&&$("#pic101").hide()}),$("#pic101").click(function(){event.stopPropagation()}),$("body").click(function(){D=!0,$("#pic101").hide()}),$("#pic101").mouseenter(function(){$("#pic101").show()}),$("#pic101").mouseleave(function(){D&&$("#pic101").hide()})})},393:function(e,t){}});