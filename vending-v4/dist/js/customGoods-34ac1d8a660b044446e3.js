/*! 版权所有，翻版必究 */!function(l){function e(e){for(var o,t,a=e[0],n=e[1],i=e[2],d=0,s=[];d<a.length;d++)t=a[d],Object.prototype.hasOwnProperty.call(c,t)&&c[t]&&s.push(c[t][0]),c[t]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(l[o]=n[o]);for(m&&m(e);s.length;)s.shift()();return g.push.apply(g,i||[]),r()}function r(){for(var e,o=0;o<g.length;o++){for(var t=g[o],a=!0,n=1;n<t.length;n++){var i=t[n];0!==c[i]&&(a=!1)}a&&(g.splice(o--,1),e=d(d.s=t[0]))}return e}var t={},c={9:0},g=[];function d(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return l[e].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.m=l,d.c=t,d.d=function(e,o,t){d.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(o,e){if(1&e&&(o=d(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var a in o)d.d(t,a,function(e){return o[e]}.bind(null,a));return t},d.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(o,"a",o),o},d.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},d.p="";var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var n=0;n<o.length;n++)e(o[n]);var m=a;g.push([136,0]),r()}({136:function(e,o,t){"use strict";t.r(o);o=t(387);layui.use(["table","form","layer","layedit","tree"],function(){tooltip(".refreshBtnList",{transition:!0,time:200});var a=layui.jquery,o=layui.tree;a(".sidebar i").click(function(){a(".left-mian").hide(),a(".on-left").show()}),a(".on-left").click(function(){a(".left-mian").show(),a(".on-left").hide()});var i=layui.table,e=window.wangEditor,n=sessionStorage.token+"",d=i.render({elem:"#tableTest",url:"".concat(vApi,"/goods/findAll"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{checkbox:!0},{field:"goods_images",width:100,title:"图片",templet:"#imgtmp",align:"center"},{field:"goods_Core",width:180,title:"商品编号",align:"center"},{field:"goods_Name",width:200,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"mail",width:120,title:"是否邮寄商品",align:"center",templet:function(e){return 0==e.mail?"否":"是"}},{field:"goods_Status",width:120,title:"商品状态",align:"center",templet:function(e){return 1==e.goods_Status?"启用":"不启用"}},{field:"classifyName",width:120,title:"商品类目",align:"center"},{field:"goods_Price",width:120,align:"center",title:"销售价 ",templet:function(e){var o=e.goods_Price;if(e.goods_Price=Number(Number(e.goods_Price).toFixed(2)),isNaN(e.goods_Price))return o;o=-1!==e.goods_Price.toString().indexOf(".")?e.goods_Price.toLocaleString():e.goods_Price.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"goods_Cost",width:120,align:"center",title:"成本价 ",templet:function(e){var o=e.goods_Cost;if(e.goods_Cost=Number(Number(e.goods_Cost).toFixed(2)),isNaN(e.goods_Cost))return o;o=-1!==e.goods_Cost.toString().indexOf(".")?e.goods_Cost.toLocaleString():e.goods_Cost.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"goods_Param",width:120,title:"规格说明 ",align:"center"},{field:"create_user",width:130,title:"创建人 ",align:"center"},{field:"goods_Time",width:200,title:"创建时间 ",align:"center",templet:function(e){return e.goods_Time?timeStamp(e.goods_Time):"-"}},{field:"update_user",width:130,title:"最后修改人 ",align:"center"},{field:"update_time",width:200,title:"最后修改时间 ",align:"center",templet:function(e){return e.update_time?timeStamp(e.update_time):"-"}},{field:"operation",align:"center",position:"absolute",right:0,width:200,title:"操作",toolbar:"#barDemo"}]],id:"tableId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){F(),403==e.code?window.parent.location.href="login.html":405==e.code&&a(".hangContent").show()}}),s=layui.form;function t(e,o){loadingAjax("/classify/findAll","post",JSON.stringify({pageNum:1,pageSize:200,merchantId:e}),sessionStorage.token).then(function(e){var t='<option value="">全部</option>';1==o&&a("#addGoodsType").empty(),a("#EditGoodsType").empty(),a("#GoodsType").empty(),a.each(e.data.list,function(e,o){t+='<option value="'.concat(o.classifyId,'">').concat(o.classifyName,"</option>")}),1==o&&a("#addGoodsType").append(t),a("#EditGoodsType").append(t),a("#GoodsType").append(t),s.render("select")}).catch(function(e){})}t(sessionStorage.machineID,1);var l="";s.on("select(mySelect1)",function(e){console.log(e),l=e.value});var r="";s.on("select(stateSelect)",function(e){r=e.value}),a(".query-btnClick").click(function(){d.reload({where:{conditionTwo:a(".KyeText").val(),conditionThree:l,conditionFour:r}})});var c,g=null,m=null,p=null;i.on("tool(test)",function(o){"add"===o.event?(p=o.data,console.log(p),a(".anUp").slideUp(),g!=p.goods_Id?(g=p.goods_Id,a(this).siblings(".anUp").slideDown()):g=null,a(".preferentialClick").click(function(){a(".anUp").slideUp(),a(".preferential").fadeIn(),a('input[name="GoodsName"]').val(p.goods_Name),a('input[name="goods_Price"]').val(p.goods_Price),a('input[name="vip_Price"]').val(p.vipPrice),a('input[name="integral"]').val(p.integral)})):"delete"===o.event?layer.confirm("确定删除？",function(e){Goodsdel(o.data.goods_Id,1,o,e)}):console.log(o)}),a(".upload-btn1").click(function(){f=m=1,w=0,k(),popupShow("GoodsMaterial","goodsMaterialBox")}),a("body").on("click",".GoodsInformation",function(){g=null,a(".anUp").slideUp(),popupShow("editor","editor-content"),a(".editor").scrollTop(0),s.val("EditValData",{goodsBarcode:p.goods_Core,goodsName:p.goods_Name,goodsType:p.classify_Id,goodsPrice:p.goods_Price,goodsCost:p.goods_Cost,goodsParam:p.goods_Param,goodsStatus:p.goods_Status}),console.log(p.goods_images),1==p.mail?a('.editor input[name="editmail"]').prop("checked",!0):a('.editor input[name="editmail"]').prop("checked",!1),a("#editImg").attr("src",p.goods_images);var e=p.goods_Descript.replace(/video/g,"iframe");u.txt.html(e),s.render()}),a("body").on("click",".anUp .previewDetails",function(){g=null,a(".anUp").slideUp(),popupShow("reading","margin0"),a(".reading-box").html(p.goods_Descript)});var u=new e("#editWangEditor");u.customConfig.uploadImgHooks={error:function(){layer.msg("图片上传失败")}},u.create(),a(".editDetermine-btn").click(function(){g=null;var e,o=s.val("EditValData");console.log(o),o.goodsParam&&o.goodsBarcode&&o.goodsName&&o.goodsType&&o.goodsPrice?0<o.goodsPrice?(e=u.txt.html().replace(/iframe/g,'video  controls="false"'),e=JSON.stringify({goods_Id:p.goods_Id,goods_Core:o.goodsBarcode,goods_Name:o.goodsName,classify_Id:o.goodsType,brand:o.goodsBrand,goods_Price:o.goodsPrice,goods_Cost:o.goodsCost||0,goods_Param:o.goodsParam,goods_Status:o.goodsStatus,goods_Images:a("#editImg").attr("src"),goods_Descript:e,mail:a('.editor input[name="editmail"]').prop("checked")?1:0}),a(".mask").fadeIn(),a(".maskSpan").addClass("maskIcon"),loadingAjax("/goods/updateGoods","post",e,sessionStorage.token,"mask","","",layer).then(function(e){layer.msg("修改成功",{icon:1}),a(".editor").fadeOut(),d.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("同一销售价必须大于0",{icon:7}):layer.msg("带*为必填",{icon:7})}),a(".preferential .cancel-btn").on("click",function(){a(".preferential").fadeOut(),g=null}),layui.layedit.set({uploadImage:{url:"".concat(vApi,"/fileUpload"),headers:{token:n},type:"post",code:200}}),a(".editor .cancel-btn").click(function(){a(".editor").fadeOut(),g=null});var h=null,f=null;a(".add-btn").click(function(){popupShow("addGoods","editor-content"),a(".addGoods").scrollTop(0),a(".tailoring-container").fadeIn()}),a(".addGoods .cancel-btn2").click(function(){popupHide("addGoods","editor-content"),a(".upload-demo2 .upload-list2").fadeOut()}),a(".upload-btn2").click(function(){m=2,f=1,w=0,k(),popupShow("GoodsMaterial","goodsMaterialBox")});var y=new e("#addWangEditor");y.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","undo","redo"],y.customConfig.uploadImgHooks={error:function(){layer.msg("图片上传失败")}};var v=null;a(".upVideo").click(function(e){v=a(this).attr("typeID"),popupShow("goodsmaterialVideo","materialBox"),S=S||i.render({elem:"#materiaVideoTable",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:n},cols:[[{field:"name",width:120,title:"视频名",align:"center"},{field:"publishTime",width:180,title:"发布时间",align:"center"},{field:"addUser",width:150,title:"发布人",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoVideo",align:"center"}]],page:!0,id:"VideoListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionFour:"1",conditionFive:"2",conditionSix:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})}),y.create(),a(".determine-btn2").click(function(){var e,o=s.val("addValData");console.log(o),console.log(a('.addGoods input[name="mail"]')),console.log(a('.addGoods input[name="mail"]').prop("checked")),o.goodsParam&&o.goodsBarcode&&o.goodsName&&o.goodsType&&o.goodsPrice?h?0<o.goodsPrice?(e=y.txt.html().replace(/iframe/g,'video controls="false"'),e=JSON.stringify({goods_Core:o.goodsBarcode,goods_Name:o.goodsName,classify_Id:o.goodsType,brand:o.goodsBrand,goods_Price:o.goodsPrice,goods_Cost:o.goodsCost||0,goods_Param:o.goodsParam,goods_Status:o.goodsStatus,goods_Images:h,goods_Descript:e,merchantId:sessionStorage.machineID,mail:a('.addGoods input[name="mail"]').prop("checked")?1:0}),a(".mask").fadeIn(),a(".maskSpan").addClass("maskIcon"),loadingAjax("/goods/saveGoods","post",e,sessionStorage.token,"mask","","",layer).then(function(e){a(".addGoods").fadeOut(),a(".upload-demo2 .upload-list2").fadeOut(),h=null,s.val("addValData",{goodsBarcode:"",goodsName:"",goodsType:"",goodsBrand:"",goodsPrice:"",goodsCost:0,goodsParam:""}),layer.msg("添加成功",{icon:1}),d.reload({where:{}}),y.txt.clear()}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("同一销售价必须大于0",{icon:7}):layer.msg("请上传商品图片",{icon:7}):layer.msg("带*为必填",{icon:7})}),a(".reading-btn").click(function(){popupShow("reading","margin0"),"add"==a(this).attr("id")?(a(".reading").fadeIn(),a(".reading-box").html(y.txt.html())):"edit"==a(this).attr("id")&&a(".reading-box").html(u.txt.html())}),a(".reading-down").click(function(){a(".Goods-wrap").removeClass("fixed"),a(".reading").fadeOut(),g=null}),a(".playHeader .close").click(function(){a(this).parent().parent().addClass("margin0"),a(this).parents(".maskContnet").fadeOut(),g=null});var w=null,_=null;function k(){_=i.render({elem:"#materiaImgTable",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:n},cols:[[{field:"img",width:100,title:"图片",align:"center",templet:"#materiaImgtmp"},{field:"name",width:120,title:"图片名",align:"center"},{field:"publishTime",width:180,title:"发布时间",align:"center"},{field:"addUser",width:150,title:"发布人",align:"center"},{field:"operationa",right:0,align:"center",width:150,title:"操作",toolbar:"#materiaImg",fixed:"right"}]],page:!0,id:"ImgListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:w,conditionFive:"2",conditionSix:sessionStorage.machineID},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})}a(".materialKeyCont .queryBtnClick").click(function(){console.log(a('.materialKeyCont input[name="KyeText"]').val()),_.reload({where:{conditionFour:w,conditionFive:"2",conditionThree:a('.materialKeyCont input[name="KyeText"]').val()}})}),a(".goodsmaterialVideo .queryBtnClick").click(function(){S.reload({where:{conditionFour:"1",conditionFive:"2",conditionThree:a('.goodsmaterialVideo input[name="KyeText"]').val()}})}),i.on("tool(materiaImgTable)",function(e){console.log(e),console.log(f,h),1==f?2==m?(h=e.data.img,a("#GoodsImg").attr("src",h),a(".upload-demo2 .upload-list2").fadeIn()):(c=e.data.img,a("#editImg").attr("src",c)):2==m?11<y.txt.html().length?y.txt.append('<p><img src="'.concat(e.data.img,'"></img></p>')):y.txt.html('<p><img src="'.concat(e.data.img,'"></img></p>')):11<u.txt.html().length?u.txt.append('<p><img src="'.concat(e.data.img,'"></img></p>')):u.txt.html('<p><img src="'.concat(e.data.img,'"></img></p>')),popupHide("GoodsMaterial","goodsMaterialBox")});var S=null;i.on("tool(materiaVideoTable)",function(e){console.log(e),"preview"==e.event?(popupShow("materialPreview","previewBox"),a(".perviewBody video").attr("src",e.data.img),console.log(v)):(console.log(v),2==v?11<y.txt.html().length?y.txt.append('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):y.txt.html('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):11<u.txt.html().length?u.txt.append('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):u.txt.html('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')),popupHide("goodsmaterialVideo","materialBox"))}),a(".upImg").click(function(){f=a(this).attr("contType"),m=a(this).attr("goodsIndex"),w=2,console.log(f,m),popupShow("GoodsMaterial","goodsMaterialBox"),k()}),a(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(I)&&(I=e,treeFun(o,"testGoods",d,I,"condition","goodsClass",t),d.reload({where:{condition:sessionStorage.machineID}})),layer.msg("已刷新",{icon:1})});var b,I=b=treeList();console.log(I),treeFun(o,"testGoods",d,I,"condition","goodsClass",t);var C=null;var x,N=null;a(".pushGoodsBtn").click(function(){N=i.checkStatus("tableId"),console.log(N),0<N.data.length?(leg.tree({ele:".treeList",data:b,cascade:!1}),popupShow("chooseLower","chooseBox"),a.each(a(".treeList input"),function(){N.data[0].merchantId==a(this).val()&&a(this).prop("disabled",!0)})):layer.msg("请选择需要推送的商品",{icon:7})});var T=null;a(".determineBtn").click(function(){T=leg.getCheckedNodes().map(Number),console.log(leg.getCheckedNodes()),0!=T.length?(popupShow("PushMandatory","MandatoryBox"),console.log(N)):layer.msg("请选择要推送的商户",{icon:7})}),a(".mandatroFooter div").click(function(){var t=[];x=a(this).attr("Ptype"),a(".mask").fadeIn(),a(".maskSpan").addClass("maskIcon"),N.data.forEach(function(e,o){e={className:e.classifyName,goodsId:e.goods_Id};t.push(e)});var e=JSON.stringify({goods:t,merchantId:sessionStorage.machineID,mid:T,type:x});loadingAjax("/goods/sendGoods","post",e,n,"mask","chooseLower","chooseBox",layer).then(function(e){console.log(e),C&&C.reload({where:{}}),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:1})}).catch(function(e){a(".mask").fadeOut(),a(".maskSpan").removeClass("maskIcon"),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:2})})}),a(".chooseFooter .chooseCan").click(function(){popupHide("chooseLower","chooseBox")}),a(".pushListBtn").click(function(){popupShow("topGoodsList","topBox"),C=C||i.render({elem:"#parentTableTest",url:"".concat(vApi,"/goods/getSendHistory"),method:"post",height:500,contentType:"application/json",headers:{token:n},cols:[[{type:"checkbox"},{field:"goods_images",width:80,title:"图片",templet:"#Listimgtmp",align:"center"},{field:"goods_Name",width:150,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"classifyName",width:160,title:"商品类目",align:"center"},{field:"tempMerchant",width:160,title:"商品所属商户",align:"center"},{field:"topMerchant",width:160,title:"推送商户",align:"center"},{field:"targetMerchant",width:160,title:"接收商户",align:"center"},{field:"goods_Param",width:130,title:"接收状态 ",align:"center",templet:function(e){return 0==e.received?"未接收":"已接收"}},{field:"sendTime",width:200,title:"推送时间 ",align:"center",templet:function(e){var o=new Date(e.sendTime);return o.getFullYear()+"-"+(o.getMonth()+1)+"-"+(e=o.getDate())+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()}}]],id:"parentTableId",page:!0,loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID,conditionFour:"0"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html");e.data.list;for(var o in e.data){var t=e.data[o];t.childMerchantId==sessionStorage.machineID&&1!=t.received||(a(".list_table1 tr[data-index="+o+'] input[type="checkbox"]').prop("disabled",!0),s.render())}}})}),a(".topBody .pushQueryBtn").click(function(){C.reload({where:{conditionTwo:a('.topBody select[name="mandatory"]').val(),conditionThree:a('.topBody select[name="receiveStatus"]').val(),conditionFour:a('.topBody select[name="receiveType"]').val(),goods_Name:a('.topBody input[name="KyeText"]').val()}})}),a(".topBody .pushGoodsListBtn").click(function(){var e=i.checkStatus("parentTableId");console.log(e);var t=[];0<e.data.length?(e.data.forEach(function(e,o){e.childMerchantId==sessionStorage.machineID&&0==e.received&&(e={className:e.classifyName,goodsId:e.goods_Id,merchantId:sessionStorage.machineID},t.push(e))}),0<t.length?(a(".mask").fadeIn(),a(".maskSpan").addClass("maskIcon"),e=JSON.stringify({goods:t,merchantId:sessionStorage.machineID}),loadingAjax("/goods/forwardGoods","post",e,sessionStorage.token,"mask","topGoodsList","topBox",layer).then(function(e){console.log(e),layer.msg(e.message,{icon:1}),d.reload({where:{}}),C.reload({where:{}})}).catch(function(e){a(".mask").fadeOut(),a(".maskSpan").removeClass("maskIcon"),layer.msg(e.message,{icon:2})})):layer.msg("没有能接收的商品",{icon:7})):layer.msg("请选择接收的商品",{icon:7})}),a("body").bind("keydown",function(e){116==e.keyCode&&(e.preventDefault(),location.reload())});var P=!0,B=!0,D=!0,G=!0,O=!0,M=!1;function F(){P?a(".add-btn").removeClass("hide"):a(".add-btn").addClass("hide"),B?a(".GoodsInformation").removeClass("hide"):a(".GoodsInformation").addClass("hide"),D?a(".del-btn").removeClass("hide"):a(".del-btn").addClass("hide"),G?a(".pushGoodsBtn").removeClass("hide"):a(".pushGoodsBtn").addClass("hide"),O?a(".pushListBtn").removeClass("hide"):a(".pushListBtn").addClass("hide"),M?a(".syncBtn").removeClass("hide"):a(".syncBtn").addClass("hide"),console.log(M)}permissionsVal(377,378,375,416,415,461).then(function(e){P=e.addFlag,B=e.editFlag,D=e.delFlag,G=e.fourFlag,O=e.fiveFlag,M=e.sixFlag,F()}).catch(function(e){layer.msg("服务器请求超时",{icon:7})}),a(".syncBtn").click(function(){popupShow("synchronousCont","synchronousBox"),j=i.render({elem:"#cGoodsTable",url:"".concat(vApi,"/goods/findAll"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{checkbox:!0},{field:"goods_images",width:100,title:"图片",templet:"#imgtmp",align:"center"},{field:"goods_Core",width:150,title:"商品编号",align:"center"},{field:"goods_Name",width:150,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"goods_Price",width:80,align:"center",title:"销售价 ",templet:function(e){var o=e.goods_Price;if(e.goods_Price=Number(Number(e.goods_Price).toFixed(2)),isNaN(e.goods_Price))return o;o=-1!==e.goods_Price.toString().indexOf(".")?e.goods_Price.toLocaleString():e.goods_Price.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"mail",width:150,title:"是否邮寄商品",align:"center",templet:function(e){return 0==e.mail?"否":"是"}}]],id:"goodsTableS",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){F(),403==e.code?window.parent.location.href="login.html":405==e.code&&a(".hangContent").show()}}),L=i.render({elem:"#machineTable",url:"".concat(vApi,"/machine/getMachineList"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{checkbox:!0},{field:"number",width:150,title:"售货机编号",align:"center",templet:function(e){return e.number||"-"}},{field:"info",width:250,title:"售货机信息",align:"center",templet:function(e){return e.info?"<div>".concat(e.info,"</div>"):'<div><span style="color:red;">*</span>(售货机为新上线机器，请编辑售货机信息！)</div>'}},{field:"location",width:250,title:"地址",align:"center",templet:function(e){return e.location||" - "}}]],id:"machineIDTable",page:!0,loading:!0,limits:[10,20,50,100],request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){F(),403==e.code?window.parent.location.href="login.html":405==e.code&&a(".hangContent").show()}})});var j=null;var L=null;a(".synchronousCont .synchronousCancel").click(function(){popupHide("synchronousCont","synchronousBox")}),a(".synchronousCont .synchronousBtn").click(function(){var a=i.checkStatus("goodsTableS").data,n=i.checkStatus("machineIDTable").data;console.log(a),console.log(n),0!=a.length&&0!=n.length?layer.confirm("确定同步价格？",function(e){layer.close(e);var o=[],t=[];a.forEach(function(e){e={goodId:e.goods_Id,price:e.goods_Price};o.push(e)}),n.forEach(function(e){e={machineId:e.machineId};t.push(e)});e=JSON.stringify({goods:o,machines:t});loadingAjax("/goods/syncPrice","post",e,sessionStorage.token).then(function(e){layer.msg(e.message,{icon:1}),j.reload({where:{}}),L.reload({where:{}}),popupHide("synchronousCont","synchronousBox")}).catch(function(e){layer.msg(e.message,{icon:2}),console.log(e)})}):layer.msg("请选择需要同步价格的商品与售货机",{icon:7})})})},387:function(e,o){}});