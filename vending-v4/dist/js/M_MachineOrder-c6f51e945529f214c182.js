/*! 版权所有，翻版必究 */!function(r){function n(n){for(var t,e,a=n[0],o=n[1],i=n[2],c=0,s=[];c<a.length;c++)e=a[c],Object.prototype.hasOwnProperty.call(u,e)&&u[e]&&s.push(u[e][0]),u[e]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t]);for(p&&p(n);s.length;)s.shift()();return d.push.apply(d,i||[]),l()}function l(){for(var n,t=0;t<d.length;t++){for(var e=d[t],a=!0,o=1;o<e.length;o++){var i=e[o];0!==u[i]&&(a=!1)}a&&(d.splice(t--,1),n=c(c.s=e[0]))}return n}var e={},u={1:0},d=[];function c(n){if(e[n])return e[n].exports;var t=e[n]={i:n,l:!1,exports:{}};return r[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=r,c.c=e,c.d=function(n,t,e){c.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(t,n){if(1&n&&(t=c(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)c.d(e,a,function(n){return t[n]}.bind(null,a));return e},c.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(t,"a",t),t},c.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},c.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=n,t=t.slice();for(var o=0;o<t.length;o++)n(t[o]);var p=a;d.push([369,0]),l()}({369:function(n,t,a){"use strict";a.r(t);var o=a(0),t=a(443);hui("#select1").selectBeautify(),hui("#select2").selectBeautify(),hui("#select3").selectBeautify();var e=Object(o.c)().startTime,i=Object(o.c)().endTime,c=1;$("#back").click(function(){window.location.href="M_managementCenter.html"});var s=sessionStorage.machineID,r=[];function l(n,t){n=JSON.stringify({conditionFive:n,pageNum:t,pageSize:100,condition:e,conditionTwo:i,conditionSeven:0,conditionThree:$("#search").val(),conditionSix:hui("#select1").val(),refund:hui("#select2").val(),shipStatus:hui("#select3").val()});Object(o.d)("/order/getOrderList","post",sessionStorage.token,n).then(function(n){if(1==t){if(0==n.data.list.length)return $(".pages3").hide(),void $(".orderList").html("<h2>暂无数据</h2>");!function(n,t){n=Number(n)/100;n=n%1==0?n:n+1;for(var e=Math.floor(n),a="",o=0;o<e;o++)a+=' <div class="pageVal '.concat(0==o?"hui-pager-active":"",'"  val="').concat(o+1,'"><a href="javascript:hui.toast(\'第').concat(o+1,"页');\" >").concat(o+1,"</a></div>");$("".concat(t," .hui-pager")).html(a)}(n.data.total,".pages3"),$(".pages3").show()}else $(".pages3").show();var a="";r=n.data.list,n.data.list.forEach(function(n,t){var e="";n.ship_info.forEach(function(n){e+="<p>\n                        ".concat(n.goods_Name,"(").concat(n.way,"货道").concat(0==n.ship_status?"出货失败":1==n.ship_status?"出货成功":"货道故障",")\n                          </p>")}),a+=' <li dataIndex="'.concat(t,'" class="orderIn">\n                        <div class="flex">\n                            <label for="">售货机名(编号):</label>\n                            <p>').concat(n.info,"(").concat(n.machineNumber,')</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单编号:</label>\n                            <p>').concat(n.number,'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单金额:</label>\n                            <p>').concat(Object(o.f)(n.amount),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付状态:</label>\n                            <p>').concat(1==n.payStatus?"等待支付":2==n.payStatus?"已支付":"未支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">下单时间:</label>\n                            <p> ').concat(Object(o.m)(n.time),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付类型:</label>\n                            <p>').concat(1==n.payType?"微信":0==n.payType?"支付宝":"工行支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">退款状态:</label>\n                            <p>').concat(1==n.refund?"未退款":2==n.refund?"部分退款":3==n.refund?"全部退款":"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货状态:</label>\n                            <p>').concat(0==n.shipStatus?"未出货":1==n.shipStatus?"部分出货失败":2==n.shipStatus?"全部出货成功":"出货中",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货详情:</label>\n                            <div>').concat(e,'</div>\n                        </div>\n                        <div class="flex">\n                            <label for="">销售经理:</label>\n                            <p>').concat(n.sales_no||"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">收款方:</label>\n                            <p>').concat(n.payee,"</p>\n                        </div>\n                    </li>")}),$(".orderList").html(a)}).catch(function(n){Object(o.n)(n.message,"error")})}l(s,c),$(".pages3").on("click",".pageVal",function(){$(this).addClass("hui-pager-active").siblings().removeClass("hui-pager-active"),c=Number($(this).attr("val")),l(s,Number($(this).attr("val")))});var u=Object(o.o)(sessionStorage.machineID);$(".hui-icons-menu-point").click(function(){0!=u.length?Object(o.k)(".merchantsContent",".merchantsBox","top0"):Object(o.n)("您没有查看下级商户的权限","warn")}),$(".merchantsBox").click(function(){event.stopPropagation()}),$(".merchantsContent").click(function(){Object(o.b)(this,"top0")});var d='<ul class="sire">';!function e(n){$.each(n,function(n,t){t.children&&t.children.length?(d+='<li class="parent "> <img indexFlag="1" class="nextImg" src="'.concat(a(133),'" alt=""> <span class="').concat(0==n?"navFocus":"",'" mId="').concat(t.id,'">').concat(t.title,'</span> <ul class="parentOne">'),e(t.children),d+="</ul>"):d+='<li> <img src="'.concat(a(134),'" alt=""> <span mId="').concat(t.id,'">').concat(t.title,"</span>"),d+="</li>"})}(u),d+="</ul>",$(".merchantsBox").html(d),$(".merchantsBox").on("click",".parent span",function(){$(".merchantsBox .parent span").removeClass("navFocus"),$(this).addClass("navFocus"),l(s=Number($(this).attr("mId")),1),c=1}),$(".merchantsBox").on("click",".nextImg",function(){1==$(this).attr("indexFlag")?($(this).attr("indexFlag",2),$(this).addClass("navImg")):($(this).attr("indexFlag",1),$(this).removeClass("navImg")),$(this).siblings(".parentOne").slideToggle()});var p=null;$(".orderList").on("click",".orderIn",function(){var n,e;p=r[$(this).attr("dataIndex")],console.log(p),n=p.goodsList,e="",n.forEach(function(n,t){e+='\n                    <li class="list flex" goodsIndex="'.concat(t,'">\n                        <div class="img">\n                            <img\n                                src="').concat(n.goods_images,'" />\n                        </div>\n                        <div class="goodsInform">\n                            <h5>').concat(n.goods_Name,'</h5>\n                            <div class="flexThree of">\n                                <p>￥').concat(Object(o.f)(n.price),"</p>\n                                <p>x").concat(n.count,'</p>\n                            </div>\n                            <p style="margin:5px 0;">已退款数量：').concat(n.refund_count,"</p>\n                        </div>\n                    </li>")}),$(".goodsListCont").html(e),$(".goodsCont").show()}),$(".goodsCont .goodsHeader img").click(function(){$(".goodsCont").hide()});var f=null;$(".goodsListCont").on("click",".list",function(){f=p.goodsList[$(this).attr("goodsIndex")],2==p.payStatus&&f.count!=f.refund_count&&($(".twoPoles span").html(f.count-f.refund_count),$(".refundNumber input").val(1),$('.sumInput input[name="sum"]').val(f.price),Object(o.k)(".refundCont",".changeBox","top30"))}),$(".close").click(function(){Object(o.a)(this,"top30"),event.stopPropagation()}),$(".maskBox ").click(function(){event.stopPropagation()}),$(".refundCont ").click(function(){Object(o.b)(this,"top30")});var m=1;$(".refundNumber input").keyup(function(){var n=$(this).val();/^\d*$/.test(n)?m=$(this).val():(Object(o.n)("只能输入正整数","warn"),$(this).val(m)),$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price)),$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))}),$(".refundNumber input").change(function(){$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))}),$(".refundCont .confirmBtn").click(function(){0<$(".refundNumber input").val()&&$(".refundNumber input").val()<=f.count-f.refund_count?hui.confirm("确定退款？",["取消","确定"],function(){Object(o.k)(".validationContent",".validationBox","top50")}):Object(o.n)("请按照提示填写数量","warn")}),$(".validationContent .confirmBtn").click(function(){var n;$('.validationBody input[name="oldPass"]').val()?(Object(o.e)("正在验证，请稍后"),n=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())}),Object(o.d)("/user/verifyAlonePwd","post",sessionStorage.token,n,"",".validationContent","top").then(function(n){var t;0==p.payType?(t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),pay_id:p.pay_id}),Object(o.d)("/pay/refund_alipay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(o.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(o.n)(n.message,"error")})):1==p.payType?(t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),transaction_id:p.transaction_id,total:p.amount,pay_id:p.pay_id}),Object(o.d)("/pay/refund_wxpay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(o.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(o.n)(n.message,"error")})):3==p.payType&&(t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),transaction_id:p.transaction_id,amount:Number($('.sumInput input[name="sum"]').val()),pay_id:p.pay_id}),Object(o.d)("/pay/refund_icbc","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(o.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(o.n)(n.message,"error")}))}).catch(function(n){loadingOut(),Object(o.n)(n.message,"error")})):Object(o.n)("请输入独立密码！","warn")}),$("#test20").val(Object(o.c)().keyTimeData),jeDate("#test20",{format:"YYYY-MM-DD",range:" - ",isinitVal:!0,donefun:function(n){n=n.val.split(" - ");e=n[0],i=n[1]},clearfun:function(){e=Object(o.c)().startTime,i=Object(o.c)().endTime,$("#test20").val(Object(o.c)().keyTimeData)}});var h=1;$(".dowImg").click(function(){$(".dowContent").slideToggle();$(".dowContent");1==h?(h=2,$(this).children("img").addClass("active")):(h=1,$(this).children("img").removeClass("active"))}),$(".keyConfirmBtn").click(function(){Object(o.l)(e,i)?Object(o.n)("时间选择范围最多三个月","warn"):l(s,1)})},443:function(n,t){}});