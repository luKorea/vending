/*! 版权所有，翻版必究 */!function(r){function e(e){for(var a,n,t=e[0],o=e[1],s=e[2],i=0,l=[];i<t.length;i++)n=t[i],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&l.push(c[n][0]),c[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a]);for(u&&u(e);l.length;)l.shift()();return m.push.apply(m,s||[]),d()}function d(){for(var e,a=0;a<m.length;a++){for(var n=m[a],t=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(t=!1)}t&&(m.splice(a--,1),e=i(i.s=n[0]))}return e}var n={},c={32:0},m=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return r[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=r,i.c=n,i.d=function(e,a,n){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(a,e){if(1&e&&(a=i(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)i.d(n,t,function(e){return a[e]}.bind(null,t));return n},i.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],t=a.push.bind(a);a.push=e,a=a.slice();for(var o=0;o<a.length;o++)e(a[o]);var u=t;m.push([155,0]),d()}({155:function(e,a,n){"use strict";n.r(a);a=n(421);layui.use(["table","form","layer","laydate"],function(){var e=window.parent.permissionsData1(),a=permissionsVal1({436:!1,437:!1,446:!1},e);function n(){a[436]?$(".addSalesBtn").removeClass("hide"):$(".addSalesBtn").addClass("hide"),a[437]?$(".pushImportBtn").removeClass("hide"):$(".pushImportBtn").addClass("hide"),a[446]?$(".delBtn").removeClass("hide"):$(".delBtn").addClass("hide")}n();var t=layui.table,o=(layui.form,layui.layer),e=layui.laydate,s=sessionStorage.token;$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()});var i=getKeyTime().startTime,l=getKeyTime().endTime;e.render({elem:"#test6",range:!0,value:getKeyTime().keyTimeData,done:function(e){console.log(e);e=e.split(" - ");console.log(e),i=e[0],l=e[1]}}),$(".refreshBtn").click(function(){location.reload()});var r=t.render({elem:"#salesTable",method:"post",url:"".concat(vApi,"/sales_manager/getSalesManager"),contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{checkbox:!0},{field:"sm_no",width:200,title:"编号",align:"center"},{field:"sm_name",width:230,title:"姓名",align:"center"},{field:"sm_phone",width:230,title:"电话号",align:"center"},{field:"sm_classify",width:230,title:"类别",align:"center"},{field:"create_name",width:230,title:"创建人",align:"center"},{field:"create_time",width:200,align:"center",title:"创建时间",templet:function(e){return e.create_time?timeStamp(e.create_time):"-"}}]],id:"salesId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:Number(sessionStorage.machineID),start_time:i,end_time:l},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show(),n()}});$(".queryBtn").click(function(){timeFlag(i,l)?o.msg("时间选择范围最多三个月",{icon:7}):i?r.reload({where:{keyword:$(".KyeText").val(),sm_no:$(".keyNumder").val(),start_time:i,end_time:l}}):r.reload({where:{keyword:$(".KyeText").val(),sm_no:$(".keyNumder").val()}})}),$(".addSalesBtn").click(function(){popupShow("addSalesCont","addSalesBox")}),$(".addSalesCont .confirmBtn").click(function(){var e;$('.addSalesCont input[name="sm_no"]').val()&&$('.addSalesCont input[name="name"]').val()&&$('.addSalesCont input[name="phone"]').val()&&$('.addSalesCont input[name="merchants"]').val()?(e=JSON.stringify({sm_no:$('.addSalesCont input[name="sm_no"]').val(),merchant_id:Number(sessionStorage.machineID),sm_name:$('.addSalesCont input[name="name"]').val(),sm_phone:$('.addSalesCont input[name="phone"]').val(),sm_classify:$('.addSalesCont input[name="merchants"]').val()}),loadingAjax("/sales_manager/addSalesManager","post",e,sessionStorage.token).then(function(e){o.msg(e.message,{icon:1}),r.reload({where:{}}),$('.addSalesCont input[name="sm_no"]').val(""),$('.addSalesCont input[name="name"]').val(""),$('.addSalesCont input[name="phone"]').val(""),$('.addSalesCont input[name="merchants"]').val(""),popupHide("addSalesCont","addSalesBox")}).catch(function(e){o.msg(e.message,{icon:2})})):o.msg("带*号未必填",{icon:7})}),$(".addSalesCont .cancelBtn").click(function(){popupHide("addSalesCont","addSalesBox")}),$(".pushImportBtn").click(function(){popupShow("pushSalesCont","pushSalesBox")}),$('.importBtn input[name="addUpload"]').change(function(e){var a,n;$(this).val()&&(a=this,(n=new FormData).append("file",e.target.files[0]),n.append("merchantId ",Number(sessionStorage.machineID)),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"".concat(vApi,"/sales_manager/importSalesManager"),processData:!1,contentType:!1,timeout:1e4,headers:{token:s},data:n,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),$(a).val(""),200==e.code?(o.msg(e.message,{icon:1}),r.reload({where:{}}),popupHide("pushSalesCont ","pushSalesBox")):o.msg(e.message,{icon:7})},error:function(){$(a).val(""),$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),o.msg("服务器请求超时",{icon:2})}}))}),$(".delBtn").click(function(){var n=t.checkStatus("salesId");console.log(n),0!=n.data.length?o.confirm("确定删除？",function(e){o.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var a=[];n.data.forEach(function(e){a.push(e.id)});e=JSON.stringify({ids:a});loadingAjax("/sales_manager/deleteSalesManager","post",e,sessionStorage.token,"mask","","",o).then(function(e){o.msg(e.message,{icon:1}),r.reload({where:{}}),popupHide("addSalesCont","addSalesBox")}).catch(function(e){o.msg(e.message,{icon:2})})}):o.msg("请选择需要删除的销售经理",{icon:7})})})},421:function(e,a){}});