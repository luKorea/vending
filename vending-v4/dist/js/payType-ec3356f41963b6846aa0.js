/*! 版权所有，翻版必究 */!function(l){function e(e){for(var t,n,o=e[0],a=e[1],i=e[2],p=0,r=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&r.push(s[n][0]),s[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(l[t]=a[t]);for(u&&u(e);r.length;)r.shift()();return d.push.apply(d,i||[]),c()}function c(){for(var e,t=0;t<d.length;t++){for(var n=d[t],o=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(o=!1)}o&&(d.splice(t--,1),e=p(p.s=n[0]))}return e}var n={},s={27:0},d=[];function p(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}p.m=l,p.c=n,p.d=function(e,t,n){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(p.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)p.d(n,o,function(e){return t[e]}.bind(null,o));return n},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="";var t=window.webpackJsonp=window.webpackJsonp||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var u=o;d.push([152,0]),c()}({152:function(e,t,n){"use strict";n.r(t);t=n(415);layui.use(["table","form","layer"],function(){var e=layui.table,o=(layui.form,layui.layer),t=e.render({elem:"#payTypeList",url:"".concat(vApi,"/pay/getAllPayType"),method:"post",contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{field:"logo",width:180,title:"图标",templet:"#imgtmp",align:"center"},{field:"name",width:180,title:"类型名",align:"center"},{field:"status",width:180,title:"状态",align:"center",templet:function(e){return 1==e.status?"启用":"禁用"}},{field:"update_user",width:180,title:"最后修改人",align:"center"},{field:"update_time",width:180,title:"最后修改时间",align:"center",templet:function(e){return e.update_time?timeStamp(e.update_time):"-"}},{field:"operation",fixed:"right",align:"center",right:0,width:180,title:"操作",toolbar:"#barDemo"}]],id:"tableId",loading:!0,where:{condition:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){405==e.code&&$(".hangContent").show()}});$(".addTypeBtn").click(function(){popupShow("addpayType","addBox")}),$('.listFlex input[name="uploadImg"]').change(function(e){}),$(".refreshBtn").click(function(){location.reload()}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()});var a=null;$('.addpayType .listFlex input[name="uploadImg"]').change(function(e){var t=this,n=new FormData;n.append("file",e.target.files[0]),$.ajax({type:"post",url:"".concat(vApi,"/fileUpload"),processData:!1,contentType:!1,timeout:1e4,headers:{token:token},data:n,success:function(e){console.log(e),$(t).val(""),0==e.code?(a=e.data.src,$(".addpayType .logiImg img").prop("src",a),$(".logiImg").show()):o.msg(e.message,{icon:7})},error:function(){o.msg("服务器请求超时",{icon:2})}})}),$(".addpayType .addCancelBtn").click(function(){popupHide("addpayType","addBox")}),$(".addpayType .RdetermineBtn").click(function(){var e;$('.addpayType input[name="name"]').val()?a?(e=JSON.stringify({logo:a,name:$('.addpayType input[name="name"]').val()}),loadingAjax("/pay/newPayType","post",e,sessionStorage.token,"","addpayType","addBox",o).then(function(e){o.msg("添加成功",{icon:1}),t.reload({where:{}}),$('.addpayType input[name="name"]').val(""),$(".addpayType .logiImg").hide(),a=null}).catch(function(e){console.log(e),o.msg("添加失败",{icon:2})})):o.msg("请上传图标",{icon:7}):o.msg("类型名不能为空",{icon:7})});var n=null;e.on("tool(payTypeList)",function(e){n=e.data,"edit"==e.event?($('.editpayType input[name="name"]').val(n.name),$(".editpayType .logiImg img").prop("src",n.logo),popupShow("editpayType","editBox")):"del"==e.event?o.confirm("确定删除？",function(e){o.close(e);e=JSON.stringify({id:n.id});loadingAjax("/pay/deletePayType","post",e,sessionStorage.token,"","","",o).then(function(e){o.msg(e.message,{icon:1}),t.reload({where:{}})}).catch(function(e){o.msg(e.message,{icon:2})})}):"status"==e.event&&o.confirm(1==n.status?"确定禁用？":"确定启用？",function(e){o.close(e);e=JSON.stringify({id:n.id,logo:"微信"==n.name||"支付宝"==n.name?"":n.logo,name:n.name,status:1==n.status?0:1});loadingAjax("/pay/updatePayType","post",e,sessionStorage.token,"","editpayType","editBox",o).then(function(e){console.log(e),o.msg(e.message,{icon:1}),t.reload({where:{}})}).catch(function(e){console.log(e),o.msg(e.message,{icon:2})})})}),$('.editpayType .listFlex input[name="uploadImg"]').change(function(e){var t=this,n=new FormData;n.append("file",e.target.files[0]),$.ajax({type:"post",url:"".concat(vApi,"/fileUpload"),processData:!1,contentType:!1,timeout:1e4,headers:{token:token},data:n,success:function(e){console.log(e),$(t).val(""),0==e.code?$(".editpayType .logiImg img").prop("src",e.data.src):o.msg(e.message,{icon:7})},error:function(){o.msg("服务器请求超时",{icon:2})}})}),$(".editpayType .editCancelBtn").click(function(){popupHide("editpayType","editBox")}),$(".editpayType .RdetermineBtn").click(function(){var e;$('.editpayType input[name="name"]').val()?(e=JSON.stringify({id:n.id,logo:$(".editpayType .logiImg img").prop("src"),name:$('.editpayType input[name="name"]').val()}),loadingAjax("/pay/updatePayType","post",e,sessionStorage.token,"","editpayType","editBox",o).then(function(e){console.log(e),o.msg(e.message,{icon:1}),t.reload({where:{}}),a=null}).catch(function(e){console.log(e),o.msg(e.message,{icon:2})})):o.msg("类型名不能为空",{icon:7})})})},415:function(e,t){}});