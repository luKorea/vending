/*! 版权所有，翻版必究 */!function(l){function e(e){for(var t,n,o=e[0],a=e[1],r=e[2],i=0,c=[];i<o.length;i++)n=o[i],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&c.push(s[n][0]),s[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(l[t]=a[t]);for(f&&f(e);c.length;)c.shift()();return d.push.apply(d,r||[]),u()}function u(){for(var e,t=0;t<d.length;t++){for(var n=d[t],o=!0,a=1;a<n.length;a++){var r=n[a];0!==s[r]&&(o=!1)}o&&(d.splice(t--,1),e=i(i.s=n[0]))}return e}var n={},s={18:0},d=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=l,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],o=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var f=o;d.push([141,0]),u()}({141:function(e,t,n){"use strict";n.r(t);t=n(396);layui.use(["table","laydate","tree","layer"],function(){var e=layui.laydate,t=layui.tree,n=layui.layer,o=sessionStorage.token,a="",r="";sessionStorage.acconutsID=sessionStorage.machineID,e.render({elem:"#itemrs1",type:"month",range:!0,done:function(e){e=e.split(" - ");a=e[0],r=e[1]}});var i=layui.table,c=i.render({elem:"#moneyData",url:"".concat(vApi,"/accounts/getEachMonth"),method:"post",contentType:"application/json",headers:{token:o},cols:[[{field:"month",width:160,title:"月份",align:"center",templet:function(e){return e.year+"年"+e.month+"月"}},{field:"total",width:160,title:"营业额(元)",align:"center",templet:function(e){return Number(e.total.toFixed(2)).toLocaleString()}},{field:"order_count",width:160,title:"客单量(笔)",align:"center"},{field:"good_count",width:160,title:"商品销量(件)",align:"center"},{field:"operation",width:160,title:"详情",align:"center",toolbar:"#barDemo"}]],page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:Number(sessionStorage.machineID)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){var t;200==e.code?(1!=s&&(t=JSON.stringify({merchantId:sessionStorage.acconutsID}),loadingAjax("/accounts/getData","post",t,sessionStorage.token).then(function(e){0==e.data.order_count?($(".turnover p").html(0),$(".guestOrders p").html(0),$(".goodsNumber p").html(0)):(animateNumberFun(".turnover p",e.data.total,1),animateNumberFun(".guestOrders p",e.data.order_count,2),animateNumberFun(".goodsNumber p",e.data.good_count,2))}).catch(function(e){n.msg(e.message,{icon:2})})),s=0):403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}}),e=treeList();console.log(e);var l;treeFunMaterial(t,"test1",c,e,"merchantId","acconutsTree",1),i.on("tool(moneyData)",function(e){console.log(e),l=e.data,$(".accountsDetailsBox .playHeader span").html(l.year+"年"+l.month+"月账目详情");var t=l.year+"-"+(10<=l.month?l.month:"0"+l.month)+"-01",n=l.year+"-"+(10<=l.month?l.month:"0"+l.month)+"-31";u=u||i.render({elem:"#dateDetails",url:"".concat(vApi,"/order/getOrderList"),method:"post",contentType:"application/json",headers:{token:o},cols:[[{field:"time",width:200,title:"支付时间",align:"center",templet:function(e){return timeStamp(e.time)}},{field:"number",width:220,title:"订单号",align:"center"},{field:"amount",width:160,title:"金额(元)",align:"center",templet:function(e){return Number(e.amount.toFixed(2)).toLocaleString()}},{field:"ofNumber",width:160,title:"商品销量(件)",align:"center",templet:function(e){var n=0;return e.goodsList.forEach(function(e,t){n+=e.count}),n}},{field:"refund",width:160,title:"退款数(件)",align:"center",templet:function(e){var n=0;return e.goodsList.forEach(function(e,t){n+=e.refund_count}),n}}]],page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionFive:sessionStorage.acconutsID},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){200==e.code||405==e.code&&$(".hangContent").show()}});e=sessionStorage.acconutsID;u.reload({where:{condition:t,conditionTwo:n,conditionFive:e}}),popupShow("accountsDetailsCont","accountsDetailsBox")});var u=null;$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".onLeft").show()}),$(".onLeft").click(function(){$(this).hide(),$(".left-mian").show()});var s=0;$(".queryBtn").click(function(){s=1,c.reload({where:{start:a,end:r}})}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()})}),$(".refreshBtn").click(function(){location.reload()})},396:function(e,t){}});