/*! 版权所有，翻版必究 */!function(r){function e(e){for(var a,n,t=e[0],o=e[1],s=e[2],l=0,i=[];l<t.length;l++)n=t[l],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&i.push(c[n][0]),c[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a]);for(m&&m(e);i.length;)i.shift()();return u.push.apply(u,s||[]),d()}function d(){for(var e,a=0;a<u.length;a++){for(var n=u[a],t=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(t=!1)}t&&(u.splice(a--,1),e=l(l.s=n[0]))}return e}var n={},c={30:0},u=[];function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return r[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=r,l.c=n,l.d=function(e,a,n){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(a,e){if(1&e&&(a=l(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)l.d(n,t,function(e){return a[e]}.bind(null,t));return n},l.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="";var a=window.webpackJsonp=window.webpackJsonp||[],t=a.push.bind(a);a.push=e,a=a.slice();for(var o=0;o<a.length;o++)e(a[o]);var m=t;u.push([152,0]),d()}({152:function(e,a,n){"use strict";n.r(a);a=n(418);layui.use(["table","form","layer","laydate"],function(){var e=layui.table,t=(layui.form,layui.layer),a=layui.laydate,o=sessionStorage.token;$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()}),$("body").bind("keydown",function(e){116==e.keyCode&&f5Fun()});var n=null,s=null;a.render({elem:"#test6",min:-1,range:!0,done:function(e){console.log(e);e=e.split(" - ");console.log(e),n=e[0],s=e[1]}}),$(".refreshBtn").click(function(){location.reload()});var l=e.render({elem:"#salesTable",method:"post",url:"".concat(vApi,"/sales_manager/getSalesManager"),contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{checkbox:!0},{field:"sm_no",width:200,title:"编号",align:"center"},{field:"sm_name",width:230,title:"姓名",align:"center"},{field:"sm_phone",width:230,title:"电话号",align:"center"},{field:"sm_classify",width:230,title:"类别",align:"center"},{field:"create_name",width:230,title:"创建人",align:"center"},{field:"create_time",width:200,title:"创建时间",templet:function(e){return e.create_time?timeStamp(e.create_time):"-"}}]],id:"salesId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:Number(sessionStorage.machineID)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(){}});$(".queryBtn").click(function(){l.reload({where:{keyword:$(".KyeText").val(),sm_no:$(".keyNumder").val(),start_time:n,end_time:s}})}),$(".addSalesBtn").click(function(){popupShow("addSalesCont","addSalesBox")}),$(".addSalesCont .confirmBtn").click(function(){var e;$('.addSalesCont input[name="sm_no"]').val()&&$('.addSalesCont input[name="name"]').val()&&$('.addSalesCont input[name="phone"]').val()&&$('.addSalesCont input[name="merchants"]').val()?(e=JSON.stringify({sm_no:$('.addSalesCont input[name="sm_no"]').val(),merchant_id:Number(sessionStorage.machineID),sm_name:$('.addSalesCont input[name="name"]').val(),sm_phone:$('.addSalesCont input[name="phone"]').val(),sm_classify:$('.addSalesCont input[name="merchants"]').val()}),loadingAjax("/sales_manager/addSalesManager","post",e,sessionStorage.token).then(function(e){t.msg(e.message,{icon:1}),l.reload({where:{}}),$('.addSalesCont input[name="sm_no"]').val(""),$('.addSalesCont input[name="name"]').val(""),$('.addSalesCont input[name="phone"]').val(""),$('.addSalesCont input[name="merchants"]').val(""),popupHide("addSalesCont","addSalesBox")}).catch(function(e){t.msg(e.message,{icon:2})})):t.msg("带*号未必填",{icon:7})}),$(".addSalesCont .cancelBtn").click(function(){popupHide("addSalesCont","addSalesBox")}),$(".pushImportBtn").click(function(){popupShow("pushSalesCont","pushSalesBox")}),$('.importBtn input[name="addUpload"]').change(function(e){var a,n;$(this).val()&&(a=this,(n=new FormData).append("file",e.target.files[0]),n.append("merchantId ",Number(sessionStorage.machineID)),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),$.ajax({type:"post",url:"".concat(vApi,"/sales_manager/importSalesManager"),processData:!1,contentType:!1,timeout:1e4,headers:{token:o},data:n,success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),$(a).val(""),200==e.code?(t.msg(e.message,{icon:1}),l.reload({where:{}}),popupHide("pushSalesCont ","pushSalesBox")):t.msg(e.message,{icon:7})},error:function(){$(a).val(""),$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),t.msg("服务器请求超时",{icon:2})}}))}),$(".delBtn").click(function(){var n=e.checkStatus("salesId");console.log(n),0!=n.data.length?t.confirm("确定删除？",function(e){t.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var a=[];n.data.forEach(function(e){a.push(e.id)});e=JSON.stringify({ids:a});loadingAjax("/sales_manager/deleteSalesManager","post",e,sessionStorage.token,"mask","","",t).then(function(e){t.msg(e.message,{icon:1}),l.reload({where:{}}),popupHide("addSalesCont","addSalesBox")}).catch(function(e){t.msg(e.message,{icon:2})})}):t.msg("请选择需要删除的销售经理",{icon:7})}),permissionsVal(436,437,446).then(function(e){e.addFlag?$(".addSalesBtn").removeClass("hide"):$(".addSalesBtn").addClass("hide"),e.editFlag?$(".pushImportBtn").removeClass("hide"):$(".pushImportBtn").addClass("hide"),e.delFlag?$(".delBtn").removeClass("hide"):$(".delBtn").addClass("hide")})})},418:function(e,a){}});