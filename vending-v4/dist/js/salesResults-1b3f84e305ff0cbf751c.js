/*! 版权所有，翻版必究 */!function(l){function e(e){for(var t,n,a=e[0],o=e[1],i=e[2],r=0,s=[];r<a.length;r++)n=a[r],Object.prototype.hasOwnProperty.call(d,n)&&d[n]&&s.push(d[n][0]),d[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(l[t]=o[t]);for(u&&u(e);s.length;)s.shift()();return m.push.apply(m,i||[]),c()}function c(){for(var e,t=0;t<m.length;t++){for(var n=m[t],a=!0,o=1;o<n.length;o++){var i=n[o];0!==d[i]&&(a=!1)}a&&(m.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},d={33:0},m=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=l,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var u=a;m.push([158,0]),c()}({158:function(e,t,n){"use strict";n.r(t);t=n(427);layui.use(["table","form","layer","laydate","tree"],function(){var e=window.parent.permissionsData1(),t=permissionsVal1({460:!1},e);function n(){t[460]?$(".pushBtn").removeClass("hide"):$(".pushBtn").addClass("hide")}n();var a=layui.table,i=(layui.form,layui.layer),e=layui.laydate,o=layui.tree,r=(sessionStorage.token,getKeyTime().startTime),s=getKeyTime().endTime;e.render({elem:"#test6",range:!0,value:getKeyTime().keyTimeData,done:function(e){e=e.split(" - ");r=e[0],s=e[1]}}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()});var l=a.render({elem:"#salesTable",method:"post",url:"".concat(vApi,"/sales_manager/getSalesAchievement"),contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{field:"sm_no",width:200,title:"销售经理编号",align:"center"},{field:"sm_name",width:230,title:"销售经理姓名",align:"center"},{field:"sm_phone",width:230,title:"销售经理电话",align:"center"},{field:"sm_classify",width:230,title:"销售经理类别",align:"center"},{field:"create_name",width:230,title:"总单数",align:"center",templet:function(e){return 0==e.achievement.length?"-":e.order_total}},{field:"create_name",width:230,title:"总金额(￥)",align:"center",templet:function(e){return 0!=e.achievement.length?e.achievement:"-"}}]],id:"salesId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:Number(sessionStorage.machineID),refund:0,start_time:r,end_time:s},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(e){403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show(),n()}});$(".queryBtn").click(function(){timeFlag(r,s)?i.msg("时间选择范围最多三个月",{icon:7}):l.reload({where:{start_time:r,end_time:s,refund:$('.newKeyItem input[name="open"]').prop("checked")?0:1}})}),$(".refreshBtn").click(function(){location.reload()}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut()});var c=null;var d;a.on("row(salesTable)",function(e){d=e.data,$(".salesCont .playHeader span").html("".concat(d.sm_name,"(").concat(r,"-").concat(s,")销售业绩")),popupShow("salesCont","salesBox"),c?c.reload({where:{sm_no:d.sm_no,start_time:r,end_time:s}}):(e=d.sm_no,c=a.render({elem:"#managerIn",method:"post",url:"".concat(vApi,"/sales_manager/getSalesManagerOrder"),contentType:"application/json",headers:{token:sessionStorage.token},cols:[[{field:"number",width:200,title:"订单号",align:"center"},{field:"amount",width:180,title:"订单金额(￥)",align:"center"},{field:"refundAmount",width:145,title:"退款金额",align:"center",templet:function(e){return 0==e.refundAmount.length?"-":e.refundAmount[0]}},{field:"sm_phone",width:130,title:"是否邮寄订单",align:"center",templet:function(e){return 1==e.mail?"是":"否"}},{field:"subject",width:180,title:"订单商品",align:"center"},{field:"notes",width:180,title:"出货状态",align:"center",templet:function(e){return e.shipStatus||"-"}},{field:"payType",width:180,title:"支付类型",align:"center",templet:function(e){return 1==e.payType?"微信":"支付宝"}},{field:"payType",width:180,title:"支付状态",align:"center",templet:function(e){return 0==e.payStatus?"未支付":1==e.payStatus?"支付中":"已支付"}},{field:"time",width:230,title:"购买时间",align:"center",templet:function(e){return e.time?timeStamp(e.time):"-"}}]],id:"managerId",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{sm_no:e,start_time:r,end_time:s,merchantId:Number(sessionStorage.machineID)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:403!=e.code?{code:e.code,msg:e.message}:void(window.parent.location.href="login.html")},response:{statusCode:200},done:function(){}}))});var m=timeStamp((new Date).getTime()),u=timeStamp((new Date).getTime());e.render({elem:"#test8",type:"month",range:!0,done:function(e){e=e.split(" - ");m=e[0],u=e[1]}}),$(".pushBtn").click(function(){r&&s?timeFlag(r,s)?i.msg("时间选择范围最多三个月",{icon:7}):i.confirm("确定导出（".concat(r,"至").concat(s,"销售经理业绩）？"),function(e){i.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var o=new XMLHttpRequest;o.open("POST","".concat(vApi,"/sales_manager/exportSalesManagerOrder"),!0),o.setRequestHeader("token",sessionStorage.token),o.setRequestHeader("Content-Type","application/json;charset=utf-8"),o.responseType="blob",o.onload=function(e){var t,n,a;200==o.status?($(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),o.response.size<50?i.msg("导出失败",{icon:2}):(a=o.response,t="".concat(sessionStorage.marchantName,"销售经理业绩(").concat(r,"-").concat(s,").xlsx"),(n=document.createElement("a")).download=t,n.style.display="none",a=new Blob([a]),n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n))):($(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),i.msg("服务器请求超时",{icon:2}))};e=JSON.stringify({start_time:r,end_time:s,merchantId:Number(p),refund:$('.newKeyItem input[name="open"]').prop("checked")?0:1});o.send(e)}):i.msg("请选择时间",{icon:7})}),$(".content-footer .cancelBtn").click(function(){popupHide("exportCont","exportBox")}),$(".exportCont .determinePushBtn").click(function(){var o,e;m&&u?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),(o=new XMLHttpRequest).open("POST","".concat(vApi,"/sales_manager/exportSalesManagerOrder"),!0),o.setRequestHeader("token",sessionStorage.token),o.setRequestHeader("Content-Type","application/json;charset=utf-8"),o.responseType="blob",o.onload=function(e){var t,n,a;200==o.status?($(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),a=o.response,t="".concat(sessionStorage.marchantName,"销售经理业绩(").concat(m,"-").concat(u,").xlsx"),(n=document.createElement("a")).download=t,n.style.display="none",a=new Blob([a]),n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)):($(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),i.msg("服务器请求超时",{icon:2}))},e=JSON.stringify({start_time:m,end_time:u,merchantId:Number(sessionStorage.machineID)}),o.send(e)):i.msg("请选择时间",{icon:7})});var p=sessionStorage.machineID,f=treeList();function h(e,a,o,t){e.render({elem:"#".concat(a),id:"treelist",showLine:!0,onlyIconControl:!0,data:t,spread:!0,text:{defaultNodeName:"无数据",none:"您没有权限，请联系管理员授权!"},click:function(e){p=e.data.id,o.reload({where:{merchantId:e.data.id}});for(var t=$("#".concat(a," .layui-tree-txt")),n=0;n<t.length;n++)t[n].innerHTML===e.data.title?t[n].style.color="#be954a":t[n].style.color="#555"}})}$(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(f)&&(h(o,"testGoods",l,f=e),l.reload({where:{merchantId:sessionStorage.machineID}})),i.msg("已刷新",{icon:1})}),h(o,"testGoods",l,f)})},427:function(e,t){}});