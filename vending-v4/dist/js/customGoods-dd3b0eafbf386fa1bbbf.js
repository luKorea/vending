/*! 版权所有，翻版必究 */!function(r){function e(e){for(var o,t,a=e[0],i=e[1],n=e[2],d=0,s=[];d<a.length;d++)t=a[d],Object.prototype.hasOwnProperty.call(c,t)&&c[t]&&s.push(c[t][0]),c[t]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o]);for(p&&p(e);s.length;)s.shift()();return g.push.apply(g,n||[]),l()}function l(){for(var e,o=0;o<g.length;o++){for(var t=g[o],a=!0,i=1;i<t.length;i++){var n=t[i];0!==c[n]&&(a=!1)}a&&(g.splice(o--,1),e=d(d.s=t[0]))}return e}var t={},c={10:0},g=[];function d(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.m=r,d.c=t,d.d=function(e,o,t){d.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(o,e){if(1&e&&(o=d(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var a in o)d.d(t,a,function(e){return o[e]}.bind(null,a));return t},d.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(o,"a",o),o},d.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},d.p="";var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var i=0;i<o.length;i++)e(o[i]);var p=a;g.push([139,0]),l()}({139:function(e,o,t){"use strict";t.r(o);o=t(389);layui.use(["table","form","layer","layedit","tree"],function(){tooltip(".refreshBtnList",{transition:!0,time:200});var g=layui.jquery,o=layui.tree,e=window.parent.permissionsData1(),p=permissionsVal1({377:!1,378:!1,375:!1,416:!1,415:!1,461:!1},e);function t(){p[377]?g(".add-btn").removeClass("hide"):g(".add-btn").addClass("hide"),p[378]?g(".ListOperation .edit").removeClass("hide"):g(".ListOperation .edit").addClass("hide"),p[375]?g(".ListOperation .del").removeClass("hide"):g(".ListOperation .del").addClass("hide"),p[416]?g(".pushGoodsBtn").removeClass("hide"):g(".pushGoodsBtn").addClass("hide"),p[415]?g(".pushListBtn").removeClass("hide"):g(".pushListBtn").addClass("hide"),p[461]?g(".syncBtn").removeClass("hide"):g(".syncBtn").addClass("hide")}t(),g(".sidebar i").click(function(){g(".left-mian").hide(),g(".on-left").show()}),g(".on-left").click(function(){g(".left-mian").show(),g(".on-left").hide()});var n=layui.table,e=window.wangEditor,a=sessionStorage.token+"",i=n.render({elem:"#tableTest",url:"".concat(vApi,"/goods/findAll"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{checkbox:!0},{field:"goods_images",width:100,title:"图片",templet:"#imgtmp",align:"center"},{field:"goods_Core",width:180,title:"商品编号",align:"center"},{field:"goods_Name",width:200,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"mail",width:120,title:"是否邮寄商品",align:"center",templet:function(e){return 0==e.mail?"否":"是"}},{field:"goods_Status",width:120,title:"商品状态",align:"center",templet:function(e){return 1==e.goods_Status?"启用":"不启用"}},{field:"classifyName",width:120,title:"商品类目",align:"center"},{field:"goods_Price",width:120,align:"center",title:"销售价 ",templet:function(e){var o=e.goods_Price;if(e.goods_Price=Number(Number(e.goods_Price).toFixed(2)),isNaN(e.goods_Price))return o;o=-1!==e.goods_Price.toString().indexOf(".")?e.goods_Price.toLocaleString():e.goods_Price.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"goods_Cost",width:120,align:"center",title:"成本价 ",templet:function(e){var o=e.goods_Cost;if(e.goods_Cost=Number(Number(e.goods_Cost).toFixed(2)),isNaN(e.goods_Cost))return o;o=-1!==e.goods_Cost.toString().indexOf(".")?e.goods_Cost.toLocaleString():e.goods_Cost.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"goods_Param",width:120,title:"规格说明 ",align:"center"},{field:"create_user",width:130,title:"创建人 ",align:"center"},{field:"goods_Time",width:200,title:"创建时间 ",align:"center",templet:function(e){return e.goods_Time?timeStamp(e.goods_Time):"-"}},{field:"update_user",width:130,title:"最后修改人 ",align:"center"},{field:"update_time",width:200,title:"最后修改时间 ",align:"center",templet:function(e){return e.update_time?timeStamp(e.update_time):"-"}},{field:"operation",fixed:"right",align:"center",position:"absolute",right:0,width:150,title:"操作",toolbar:"#barDemo"}]],id:"tableId",page:!0,loading:!0,limits:[100,50,20,10],request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){t(),403==e.code?window.parent.location.href="login.html":405==e.code&&g(".hangContent").show(),fixedFun()}}),d=layui.form;function s(e,o){loadingAjax("/classify/findAll","post",JSON.stringify({pageNum:1,pageSize:200,merchantId:e}),sessionStorage.token).then(function(e){var t='<option value="">全部</option>';1==o&&g("#addGoodsType").empty(),g("#EditGoodsType").empty(),g("#GoodsType").empty(),g.each(e.data.list,function(e,o){t+='<option value="'.concat(o.classifyId,'">').concat(o.classifyName,"</option>")}),1==o&&g("#addGoodsType").append(t),g("#EditGoodsType").append(t),g("#GoodsType").append(t),d.render("select")}).catch(function(e){})}s(sessionStorage.machineID,1);var r="";d.on("select(mySelect1)",function(e){console.log(e),r=e.value});var l="";d.on("select(stateSelect)",function(e){l=e.value}),g(".query-btnClick").click(function(){i.reload({where:{conditionTwo:g(".KyeText").val(),conditionThree:r,conditionFour:l}})});var c,m=null,u=null,h=null,f=null;n.on("tool(test)",function(e){if(event.stopPropagation(),u=e.data,"operation"===(f=e).event){if(h==e.data.goods_Id)return g(".ListOperation").fadeOut(),void(h=null);h=e.data.goods_Id,g(".ListOperation").fadeIn(),g(".ListOperation").css({left:g(this).offset().left-35+"px",top:g(this).offset().top+35+"px"})}}),g(".ListOperation .edit").click(function(){g(".anUp").slideUp(),popupShow("editor","editor-content"),g(".editor").scrollTop(0),d.val("EditValData",{goodsBarcode:u.goods_Core,goodsName:u.goods_Name,goodsType:u.classify_Id,goodsPrice:u.goods_Price,goodsCost:u.goods_Cost,goodsParam:u.goods_Param,goodsStatus:u.goods_Status}),console.log(u.goods_images),1==u.mail?g('.editor input[name="editmail"]').prop("checked",!0):g('.editor input[name="editmail"]').prop("checked",!1),g("#editImg").attr("src",u.goods_images);var e=u.goods_Descript.replace(/video/g,"iframe");y.txt.html(e),d.render()}),g(".ListOperation .goodsPreview").click(function(){popupShow("reading","margin0"),g(".reading .playHeader span").html("商品详情页预览"),g(".reading-box").html(u.goods_Descript)}),g(".ListOperation .del").click(function(){layer.confirm("确定删除？",function(e){Goodsdel(u.goods_Id,1,f,e)})}),g(".upload-btn1").click(function(){w=m=1,b=0,x(),popupShow("GoodsMaterial","goodsMaterialBox")});var y=new e("#editWangEditor");y.customConfig.uploadImgHooks={error:function(){layer.msg("图片上传失败")}},y.create(),g(".editDetermine-btn").click(function(){0;var e,o=d.val("EditValData");console.log(o),o.goodsParam&&o.goodsBarcode&&o.goodsName&&o.goodsType&&o.goodsPrice?0<o.goodsPrice?(e=y.txt.html().replace(/iframe/g,'video  controls="false"'),e=JSON.stringify({goods_Id:u.goods_Id,goods_Core:o.goodsBarcode,goods_Name:o.goodsName,classify_Id:o.goodsType,brand:o.goodsBrand,goods_Price:o.goodsPrice,goods_Cost:o.goodsCost||0,goods_Param:o.goodsParam,goods_Status:o.goodsStatus,goods_Images:g("#editImg").attr("src"),goods_Descript:e,mail:g('.editor input[name="editmail"]').prop("checked")?1:0}),g(".mask").fadeIn(),g(".maskSpan").addClass("maskIcon"),loadingAjax("/goods/updateGoods","post",e,sessionStorage.token,"mask","","",layer).then(function(e){layer.msg("修改成功",{icon:1}),g(".editor").fadeOut(),i.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("同一销售价必须大于0",{icon:7}):layer.msg("带*为必填",{icon:7})}),g(".preferential .cancel-btn").on("click",function(){g(".preferential").fadeOut(),0}),layui.layedit.set({uploadImage:{url:"".concat(vApi,"/fileUpload"),headers:{token:a},type:"post",code:200}}),g(".editor .cancel-btn").click(function(){g(".editor").fadeOut(),0});var v=null,w=null;g(".add-btn").click(function(){popupShow("addGoods","editor-content"),g(".addGoods").scrollTop(0),g(".tailoring-container").fadeIn()}),g(".addGoods .cancel-btn2").click(function(){popupHide("addGoods","editor-content"),g(".upload-demo2 .upload-list2").fadeOut()}),g(".upload-btn2").click(function(){m=2,w=1,b=0,x(),popupShow("GoodsMaterial","goodsMaterialBox")});var k=new e("#addWangEditor");k.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","undo","redo"],k.customConfig.uploadImgHooks={error:function(){layer.msg("图片上传失败")}};var _=null;g(".upVideo").click(function(e){_=g(this).attr("typeID"),popupShow("goodsmaterialVideo","materialBox"),I=I||n.render({elem:"#materiaVideoTable",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:a},cols:[[{field:"name",width:120,title:"视频名",align:"center"},{field:"publishTime",width:180,title:"发布时间",align:"center"},{field:"addUser",width:150,title:"发布人",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemoVideo",align:"center"}]],page:!0,id:"VideoListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionFour:"1",conditionFive:"2",conditionSix:C},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})}),k.create(),g(".determine-btn2").click(function(){var e,o=d.val("addValData");console.log(o),console.log(g('.addGoods input[name="mail"]')),console.log(g('.addGoods input[name="mail"]').prop("checked")),o.goodsParam&&o.goodsBarcode&&o.goodsName&&o.goodsType&&o.goodsPrice?v?0<o.goodsPrice?(e=k.txt.html().replace(/iframe/g,'video controls="false"'),e=JSON.stringify({goods_Core:o.goodsBarcode,goods_Name:o.goodsName,classify_Id:o.goodsType,brand:o.goodsBrand,goods_Price:o.goodsPrice,goods_Cost:o.goodsCost||0,goods_Param:o.goodsParam,goods_Status:o.goodsStatus,goods_Images:v,goods_Descript:e,merchantId:sessionStorage.machineID,mail:g('.addGoods input[name="mail"]').prop("checked")?1:0}),g(".mask").fadeIn(),g(".maskSpan").addClass("maskIcon"),loadingAjax("/goods/saveGoods","post",e,sessionStorage.token,"mask","","",layer).then(function(e){g(".addGoods").fadeOut(),g(".upload-demo2 .upload-list2").fadeOut(),v=null,d.val("addValData",{goodsBarcode:"",goodsName:"",goodsType:"",goodsBrand:"",goodsPrice:"",goodsCost:0,goodsParam:""}),layer.msg("添加成功",{icon:1}),i.reload({where:{}}),k.txt.clear()}).catch(function(e){layer.msg(e.message,{icon:2})})):layer.msg("同一销售价必须大于0",{icon:7}):layer.msg("请上传商品图片",{icon:7}):layer.msg("带*为必填",{icon:7})}),g(".reading-btn").click(function(){popupShow("reading","margin0"),"add"==g(this).attr("id")?(g(".reading").fadeIn(),g(".reading .playHeader span").html("商品详情页预览"),g(".reading-box").html(k.txt.html())):"edit"==g(this).attr("id")&&(g(".reading .playHeader span").html("商品详情页预览"),g(".reading-box").html(y.txt.html()))}),g(".reading-down").click(function(){g(".Goods-wrap").removeClass("fixed"),g(".reading").fadeOut(),0}),g(".playHeader .close").click(function(){g(this).parent().parent().addClass("margin0"),g(this).parents(".maskContnet").fadeOut(),0});var b=null,S=null;function x(){S=n.render({elem:"#materiaImgTable",method:"post",url:"".concat(vApi,"/good_material/getGoodMaterial"),contentType:"application/json",headers:{token:a},cols:[[{field:"img",width:100,title:"图片",align:"center",templet:"#materiaImgtmp"},{field:"name",width:120,title:"图片名",align:"center"},{field:"publishTime",width:180,title:"发布时间",align:"center"},{field:"addUser",width:150,title:"发布人",align:"center"},{field:"operationa",right:0,align:"center",width:180,title:"操作",toolbar:"#materiaImg",fixed:"right"}]],page:!0,id:"ImgListData",loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{conditionFour:b,conditionFive:"2",conditionSix:C},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})}g(".materialKeyCont .queryBtnClick").click(function(){console.log(g('.materialKeyCont input[name="KyeText"]').val()),S.reload({where:{conditionFour:b,conditionFive:"2",conditionThree:g('.materialKeyCont input[name="KyeText"]').val()}})}),g(".goodsmaterialVideo .queryBtnClick").click(function(){I.reload({where:{conditionFour:"1",conditionFive:"2",conditionThree:g('.goodsmaterialVideo input[name="KyeText"]').val()}})}),n.on("tool(materiaImgTable)",function(e){"add"==e.event?(1==w?2==m?(v=e.data.img,g("#GoodsImg").attr("src",v),g(".upload-demo2 .upload-list2").fadeIn()):(c=e.data.img,g("#editImg").attr("src",c)):2==m?11<k.txt.html().length?k.txt.append('<p style="text-align: center;"><img src="'.concat(e.data.img,'"></img></p>')):k.txt.html('<p style="text-align: center;"><img src="'.concat(e.data.img,'"></img></p>')):11<y.txt.html().length?y.txt.append('<p style="text-align: center;"><img src="'.concat(e.data.img,'"></img></p>')):y.txt.html('<p style="text-align: center;"><img src="'.concat(e.data.img,'"></img></p>')),popupHide("GoodsMaterial","goodsMaterialBox")):"previewD"==e.event&&(popupShow("reading","margin0"),g(".reading .playHeader span").html("商品图片预览"),g(".reading-box").html('<img src="'.concat(e.data.img,'"/>')))});var I=null;n.on("tool(materiaVideoTable)",function(e){console.log(e),"preview"==e.event?(popupShow("materialPreview","previewBox"),g(".perviewBody video").attr("src",e.data.img),console.log(_)):(console.log(_),2==_?11<k.txt.html().length?k.txt.append('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):k.txt.html('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):11<y.txt.html().length?y.txt.append('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')):y.txt.html('<div><iframe src="'.concat(e.data.img,'"></iframe></div>')),popupHide("goodsmaterialVideo","materialBox"))}),g(".upImg").click(function(){w=g(this).attr("contType"),m=g(this).attr("goodsIndex"),b=2,popupShow("GoodsMaterial","goodsMaterialBox"),x()}),g(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(T)&&(P(o,"testGoods",i,T=e,"condition","goodsClass",s),i.reload({where:{condition:sessionStorage.machineID}})),layer.msg("已刷新",{icon:1})});var N,C=sessionStorage.machineID,T=N=treeList();function P(e,d,s,o,r,l,c){e.render({elem:"#".concat(d),id:"treelist",showLine:!0,onlyIconControl:!0,data:o,spread:!0,text:{defaultNodeName:"无数据",none:"您没有权限，请联系管理员授权!"},click:function(e){var o,t,a;p[377]&&(e.data.id==sessionStorage.machineID?g(".add-btn").show():g(".add-btn").hide()),C=e.data.id+"",l&&c(e.data.id+""),s.reload({where:(o={},t=r,a=e.data.id+"",t in o?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a,o)});for(var i=g("#".concat(d," .layui-tree-txt")),n=0;n<i.length;n++)i[n].innerHTML===e.data.title?i[n].style.color="#be954a":i[n].style.color="#555"}})}P(o,"testGoods",i,T,"condition","goodsClass",s);var B=null;var O,D=null;g(".pushGoodsBtn").click(function(){D=n.checkStatus("tableId"),console.log(D),0<D.data.length?(leg.tree({ele:".treeList",data:N,cascade:!1}),popupShow("chooseLower","chooseBox"),g.each(g(".treeList input"),function(){D.data[0].merchantId==g(this).val()&&g(this).prop("disabled",!0)})):layer.msg("请选择需要推送的商品",{icon:7})});var G=null;g(".determineBtn").click(function(){G=leg.getCheckedNodes().map(Number),console.log(leg.getCheckedNodes()),0!=G.length?(popupShow("PushMandatory","MandatoryBox"),console.log(D)):layer.msg("请选择要推送的商户",{icon:7})}),g(".mandatroFooter div").click(function(){var t=[];O=g(this).attr("Ptype"),g(".mask").fadeIn(),g(".maskSpan").addClass("maskIcon"),D.data.forEach(function(e,o){e={className:e.classifyName,goodsId:e.goods_Id};t.push(e)});var e=JSON.stringify({goods:t,merchantId:sessionStorage.machineID,mid:G,type:O});loadingAjax("/goods/sendGoods","post",e,a,"mask","chooseLower","chooseBox",layer).then(function(e){console.log(e),B&&B.reload({where:{}}),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:1})}).catch(function(e){g(".mask").fadeOut(),g(".maskSpan").removeClass("maskIcon"),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:2})})}),g(".chooseFooter .chooseCan").click(function(){popupHide("chooseLower","chooseBox")}),g(".pushListBtn").click(function(){popupShow("topGoodsList","topBox"),B||setTimeout(function(){B=n.render({elem:"#parentTableTest",url:"".concat(vApi,"/goods/getSendHistory"),method:"post",height:500,contentType:"application/json",headers:{token:a},cols:[[{type:"checkbox"},{field:"goods_images",width:80,title:"图片",templet:"#Listimgtmp",align:"center"},{field:"goods_Name",width:150,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"classifyName",width:140,title:"商品类目",align:"center"},{field:"tempMerchant",width:150,title:"商品所属商户",align:"center"},{field:"topMerchant",width:150,title:"推送商户",align:"center"},{field:"targetMerchant",width:140,title:"接收商户",align:"center"},{field:"goods_Param",width:120,title:"接收状态 ",align:"center",templet:function(e){return 0==e.received?"未接收":"已接收"}},{field:"sendTime",width:180,title:"推送时间 ",align:"center",templet:function(e){var o=new Date(e.sendTime);return o.getFullYear()+"-"+(o.getMonth()+1)+"-"+(e=o.getDate())+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()}}]],id:"parentTableId",page:!0,loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID,conditionFour:"0"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){for(var o in 403==e.code&&(window.parent.location.href="login.html"),e.data){var t=e.data[o];t.childMerchantId==sessionStorage.machineID&&1!=t.received||(g(".list_table1 tr[data-index="+o+'] input[type="checkbox"]').prop("disabled",!0),d.render())}}})},500)}),g(".topBody .pushQueryBtn").click(function(){B.reload({where:{conditionTwo:g('.topBody select[name="mandatory"]').val(),conditionThree:g('.topBody select[name="receiveStatus"]').val(),conditionFour:g('.topBody select[name="receiveType"]').val(),goods_Name:g('.topBody input[name="KyeText"]').val()}})}),g(".topBody .pushGoodsListBtn").click(function(){var e=n.checkStatus("parentTableId");console.log(e);var t=[];0<e.data.length?(e.data.forEach(function(e,o){e.childMerchantId==sessionStorage.machineID&&0==e.received&&(e={className:e.classifyName,goodsId:e.goods_Id,merchantId:sessionStorage.machineID},t.push(e))}),0<t.length?(g(".mask").fadeIn(),g(".maskSpan").addClass("maskIcon"),e=JSON.stringify({goods:t,merchantId:sessionStorage.machineID}),loadingAjax("/goods/forwardGoods","post",e,sessionStorage.token,"mask","topGoodsList","topBox",layer).then(function(e){console.log(e),layer.msg(e.message,{icon:1}),i.reload({where:{}}),B.reload({where:{}})}).catch(function(e){g(".mask").fadeOut(),g(".maskSpan").removeClass("maskIcon"),layer.msg(e.message,{icon:2})})):layer.msg("没有能接收的商品",{icon:7})):layer.msg("请选择接收的商品",{icon:7})}),g("body").bind("keydown",function(e){116==e.keyCode&&(e.preventDefault(),location.reload())}),g(".syncBtn").click(function(){popupShow("synchronousCont","synchronousBox"),g(".synchronousGoodsName").val(),g(".synchronousMachineName").val(),L=n.render({elem:"#cGoodsTable",url:"".concat(vApi,"/goods/findAll"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{checkbox:!0},{field:"goods_images",width:100,title:"图片",templet:"#imgtmp",align:"center"},{field:"goods_Core",width:150,title:"商品编号",align:"center"},{field:"goods_Name",width:150,title:"商品名",color:"#409eff",align:"center",templet:function(e){return 1==e.mail?"(邮寄)"+e.goods_Name:e.goods_Name}},{field:"goods_Price",width:80,align:"center",title:"销售价 ",templet:function(e){var o=e.goods_Price;if(e.goods_Price=Number(Number(e.goods_Price).toFixed(2)),isNaN(e.goods_Price))return o;o=-1!==e.goods_Price.toString().indexOf(".")?e.goods_Price.toLocaleString():e.goods_Price.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e=o.split(".");return 1==e.length?o+=".00":1==e[1].length&&(o+="0"),o}},{field:"mail",width:150,title:"是否邮寄商品",align:"center",templet:function(e){return 0==e.mail?"否":"是"}}]],id:"goodsTableS",page:!0,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){t(),403==e.code?window.parent.location.href="login.html":405==e.code&&g(".hangContent").show()}}),M=n.render({elem:"#machineTable",url:"".concat(vApi,"/machine/getMachineList"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{checkbox:!0},{field:"number",width:150,title:"售货机编号",align:"center",templet:function(e){return e.number||"-"}},{field:"info",width:250,title:"售货机信息",align:"center",templet:function(e){return e.info?"<div>".concat(e.info,"</div>"):'<div><span style="color:red;">*</span>(售货机为新上线机器，请编辑售货机信息！)</div>'}},{field:"location",width:250,title:"地址",align:"center",templet:function(e){return e.location||" - "}}]],id:"machineIDTable",page:!0,loading:!0,limits:[10,20,50,100],request:{pageName:"pageNum",limitName:"pageSize"},where:{merchantId:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){t(),403==e.code?window.parent.location.href="login.html":405==e.code&&g(".hangContent").show()}})});var L=null;g(".synchronousGoodsQuery").click(function(){L.reload({where:{conditionTwo:g(".synchronousGoodsName").val()}})});var M=null;g(".synchronousMachineQuery").click(function(){M.reload({where:{keyword:g(".synchronousMachineName").val()}})}),g(".synchronousCont .synchronousCancel").click(function(){popupHide("synchronousCont","synchronousBox")}),g(".synchronousCont .synchronousBtn").click(function(){var a=n.checkStatus("goodsTableS").data,i=n.checkStatus("machineIDTable").data;console.log(a),console.log(i),0!=a.length&&0!=i.length?layer.confirm("确定同步价格？",function(e){layer.close(e);var o=[],t=[];a.forEach(function(e){e={goodId:e.goods_Id,price:e.goods_Price};o.push(e)}),i.forEach(function(e){e={machineId:e.machineId};t.push(e)});e=JSON.stringify({goods:o,machines:t});loadingAjax("/goods/syncPrice","post",e,sessionStorage.token).then(function(e){layer.msg(e.message,{icon:1}),L.reload({where:{}}),M.reload({where:{}}),popupHide("synchronousCont","synchronousBox")}).catch(function(e){layer.msg(e.message,{icon:2}),console.log(e)})}):layer.msg("请选择需要同步价格的商品与售货机",{icon:7})});var j=!0;g("body").on("mouseenter",".pic102",function(e){g("#pic101").attr("src",g(this).attr("src"));var o=new Image;o.onload=function(){g("#pic101").css({width:this.width>=this.height?"335px":"auto",height:this.height>this.width?"450px":"auto"}).fadeIn("fast"),this.onload=null},o.src=g(this).attr("src")}),g(".Goods-wrap").on("click",".pic102",function(){event.stopPropagation(),j=!1}),g("body").on("mouseleave",".pic102",function(){j&&g("#pic101").hide()}),g("#pic101").click(function(){event.stopPropagation()}),g("body").click(function(){j=!0,g("#pic101").hide(),g(".ListOperation").fadeOut(),h=null}),g("#pic101").mouseenter(function(){g("#pic101").show()}),g("#pic101").mouseleave(function(){j&&g("#pic101").hide()})})},389:function(e,o){}});