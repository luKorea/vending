/*! 版权所有，翻版必究 */!function(r){function n(n){for(var t,e,a=n[0],o=n[1],c=n[2],i=0,s=[];i<a.length;i++)e=a[i],Object.prototype.hasOwnProperty.call(u,e)&&u[e]&&s.push(u[e][0]),u[e]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t]);for(p&&p(n);s.length;)s.shift()();return d.push.apply(d,c||[]),l()}function l(){for(var n,t=0;t<d.length;t++){for(var e=d[t],a=!0,o=1;o<e.length;o++){var c=e[o];0!==u[c]&&(a=!1)}a&&(d.splice(t--,1),n=i(i.s=e[0]))}return n}var e={},u={1:0},d=[];function i(n){if(e[n])return e[n].exports;var t=e[n]={i:n,l:!1,exports:{}};return r[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=e,i.d=function(n,t,e){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)i.d(e,a,function(n){return t[n]}.bind(null,a));return e},i.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=n,t=t.slice();for(var o=0;o<t.length;o++)n(t[o]);var p=a;d.push([369,0]),l()}({369:function(n,t,a){"use strict";a.r(t);var i=a(0),t=a(443),e=1,o="";$("#back").click(function(){window.location.href="M_managementCenter.html"});var c=sessionStorage.machineID,s=[];function r(n,t){n=JSON.stringify({conditionFive:n,pageNum:t,pageSize:100,conditionSeven:0,conditionThree:o});Object(i.c)("/order/getOrderList","post",sessionStorage.token,n).then(function(n){if(1==t){if(0==n.data.list.length)return $(".pages3").hide(),void $(".orderList").html("<h2>暂无数据</h2>");!function(n,t){n=Number(n)/100;n=n%1==0?n:n+1;for(var e=Math.floor(n),a="",o=0;o<e;o++)a+=' <div class="pageVal '.concat(0==o?"hui-pager-active":"",'"  val="').concat(o+1,'"><a href="javascript:hui.toast(\'第').concat(o+1,"页');\" >").concat(o+1,"</a></div>");$("".concat(t," .hui-pager")).html(a)}(n.data.total,".pages3"),$(".pages3").show()}else $(".pages3").show();var c="";s=n.data.list,n.data.list.forEach(function(n,t){var e=0,a=0;n.goodsList.forEach(function(n){e+=n.count,a+=n.refund_count});var o="";n.ship_info.forEach(function(n){o+="<p>\n                        ".concat(n.goods_Name,"(").concat(n.way,"货道").concat(0==n.ship_status?"出货失败":1==n.ship_status?"出货成功":"货道故障",")\n                          </p>")}),c+=' <li dataIndex="'.concat(t,'" class="orderIn">\n                        <div class="flex">\n                            <label for="">售货机名(编号):</label>\n                            <p>').concat(n.info,"(").concat(n.machineNumber,')</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单编号:</label>\n                            <p>').concat(n.number,'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单金额:</label>\n                            <p>').concat(Object(i.e)(n.amount),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付状态:</label>\n                            <p>').concat(1==n.payStatus?"等待支付":2==n.payStatus?"已支付":"未支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">下单时间:</label>\n                            <p> ').concat(Object(i.k)(n.time),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付类型:</label>\n                            <p>').concat(1==n.payType?"微信":0==n.payType?"支付宝":"工行支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">退款状态:</label>\n                            <p>').concat(0==a?"未退款":e-a==0?"全部退款":"部分退款",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货状态:</label>\n                            <p>').concat(0==n.shipStatus?"未出货":1==n.shipStatus?"部分出货失败":"全部出货成功",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货详情:</label>\n                            <div>').concat(o,'</div>\n                        </div>\n                        <div class="flex">\n                            <label for="">销售经理:</label>\n                            <p>').concat(n.sales_no||"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">收款方:</label>\n                            <p>').concat(n.payee,"</p>\n                        </div>\n                    </li>")}),$(".orderList").html(c)}).catch(function(n){Object(i.l)(n.message,"error")})}r(c,e),$(".pages3").on("click",".pageVal",function(){$(this).addClass("hui-pager-active").siblings().removeClass("hui-pager-active"),e=Number($(this).attr("val")),r(c,Number($(this).attr("val")))});var l=Object(i.m)(sessionStorage.machineID);$(".hui-icons-menu-point").click(function(){0!=l.length?Object(i.j)(".merchantsContent",".merchantsBox","top0"):Object(i.l)("您没有查看下级商户的权限","warn")}),$(".merchantsBox").click(function(){event.stopPropagation()}),$(".merchantsContent").click(function(){Object(i.b)(this,"top0")});var u='<ul class="sire">';!function e(n){$.each(n,function(n,t){t.children&&t.children.length?(u+='<li class="parent "> <img indexFlag="1" class="nextImg" src="'.concat(a(133),'" alt=""> <span class="').concat(0==n?"navFocus":"",'" mId="').concat(t.id,'">').concat(t.title,'</span> <ul class="parentOne">'),e(t.children),u+="</ul>"):u+='<li> <img src="'.concat(a(134),'" alt=""> <span mId="').concat(t.id,'">').concat(t.title,"</span>"),u+="</li>"})}(l),u+="</ul>",$(".merchantsBox").html(u),$(".merchantsBox").on("click",".parent span",function(){$(".merchantsBox .parent span").removeClass("navFocus"),$(this).addClass("navFocus"),r(c=Number($(this).attr("mId")),1),e=1}),$(".merchantsBox").on("click",".nextImg",function(){1==$(this).attr("indexFlag")?($(this).attr("indexFlag",2),$(this).addClass("navImg")):($(this).attr("indexFlag",1),$(this).removeClass("navImg")),$(this).siblings(".parentOne").slideToggle()});var d=null;$(".orderList").on("click",".orderIn",function(){var n,e;d=s[$(this).attr("dataIndex")],console.log(d),n=d.goodsList,e="",n.forEach(function(n,t){e+='\n                    <li class="list flex" goodsIndex="'.concat(t,'">\n                        <div class="img">\n                            <img\n                                src="').concat(n.goods_images,'" />\n                        </div>\n                        <div class="goodsInform">\n                            <h5>').concat(n.goods_Name,'</h5>\n                            <div class="flexThree of">\n                                <p>￥').concat(Object(i.e)(n.price),"</p>\n                                <p>x").concat(n.count,'</p>\n                            </div>\n                            <p style="margin:5px 0;">已退款数量：').concat(n.refund_count,"</p>\n                        </div>\n                    </li>")}),$(".goodsListCont").html(e),$(".goodsCont").show()}),$(".goodsCont .goodsHeader img").click(function(){$(".goodsCont").hide()});var p=null;$(".goodsListCont").on("click",".list",function(){p=d.goodsList[$(this).attr("goodsIndex")],2==d.payStatus&&p.count!=p.refund_count&&($(".twoPoles span").html(p.count-p.refund_count),$(".refundNumber input").val(1),$('.sumInput input[name="sum"]').val(p.price),Object(i.j)(".refundCont",".changeBox","top30"))}),$(".close").click(function(){Object(i.a)(this,"top30"),event.stopPropagation()}),$(".maskBox ").click(function(){event.stopPropagation()}),$(".refundCont ").click(function(){Object(i.b)(this,"top30")});var f=1;$(".refundNumber input").keyup(function(){var n=$(this).val();/^\d*$/.test(n)?f=$(this).val():(Object(i.l)("只能输入正整数","warn"),$(this).val(f)),$('.sumInput input[name="sum"]').val(Number($(this).val()*p.price)),$('.sumInput input[name="sum"]').val(Number($(this).val()*p.price))}),$(".refundNumber input").change(function(){$('.sumInput input[name="sum"]').val(Number($(this).val()*p.price))}),$(".refundCont .confirmBtn").click(function(){0<$(".refundNumber input").val()&&$(".refundNumber input").val()<=p.count-p.refund_count?hui.confirm("确定退款？",["取消","确定"],function(){Object(i.j)(".validationContent",".validationBox","top50")}):Object(i.l)("请按照提示填写数量","warn")}),$(".validationContent .confirmBtn").click(function(){var n;$('.validationBody input[name="oldPass"]').val()?(Object(i.d)("正在验证，请稍后"),n=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())}),Object(i.c)("/user/verifyAlonePwd","post",sessionStorage.token,n,"",".validationContent","top").then(function(n){var t;0==d.payType?(t=JSON.stringify({machineId:d.machineId,orderId:d.number,goodId:p.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),pay_id:d.pay_id}),Object(i.c)("/pay/refund_alipay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(i.l)(n.message,"success"),r(c,e),$(".goodsCont").hide()}).catch(function(n){Object(i.l)(n.message,"error")})):1==d.payType?(t=JSON.stringify({machineId:d.machineId,orderId:d.number,goodId:p.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),transaction_id:d.transaction_id,total:d.amount,pay_id:d.pay_id}),Object(i.c)("/pay/refund_wxpay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(i.l)(n.message,"success"),r(c,e),$(".goodsCont").hide()}).catch(function(n){Object(i.l)(n.message,"error")})):3==d.payType&&(t=JSON.stringify({machineId:d.machineId,orderId:d.number,goodId:p.goods_Id,count:Number($(".refundNumber input").val()),transaction_id:d.transaction_id,amount:Number($('.sumInput input[name="sum"]').val()),pay_id:d.pay_id}),Object(i.c)("/pay/refund_icbc","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(i.l)(n.message,"success"),r(c,e),$(".goodsCont").hide()}).catch(function(n){Object(i.l)(n.message,"error")}))}).catch(function(n){loadingOut(),Object(i.l)(n.message,"error")})):Object(i.l)("请输入独立密码！","warn")}),$("#search").keydown(function(n){13==n.keyCode&&(o=$(this).val(),r(c,e))})},443:function(n,t){}});