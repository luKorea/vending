/*! 版权所有，翻版必究 */!function(r){function e(e){for(var t,i,n=e[0],a=e[1],o=e[2],s=0,c=[];s<n.length;s++)i=n[s],Object.prototype.hasOwnProperty.call(d,i)&&d[i]&&c.push(d[i][0]),d[i]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t]);for(p&&p(e);c.length;)c.shift()();return u.push.apply(u,o||[]),l()}function l(){for(var e,t=0;t<u.length;t++){for(var i=u[t],n=!0,a=1;a<i.length;a++){var o=i[a];0!==d[o]&&(n=!1)}n&&(u.splice(t--,1),e=s(s.s=i[0]))}return e}var i={},d={29:0},u=[];function s(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=r,s.c=i,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var p=n;u.push([146,0]),l()}({146:function(e,t,M){"use strict";M.r(t);t=M(405);layui.use(["element","laydate","table","carousel","tree","form"],function(){tooltip(".refreshBtnList",{transition:!0,time:200});var e=window.parent.permissionsData1(),t=permissionsVal1({383:!1,384:!1,386:!1,404:!1,406:!1},e);function i(){t[383]?$(".publicAdvertisingBtn").removeClass("hide"):$(".publicAdvertisingBtn").addClass("hide"),t[386]?$(".auditBtnTwo").removeClass("hide"):$(".auditBtnTwo").addClass("hide"),t[404]?$(".pushReleaseBtn").removeClass("hide"):$(".pushReleaseBtn").addClass("hide"),t[406]?$(".RpushListBtn").removeClass("hide"):$(".RpushListBtn").addClass("hide")}i();var n=sessionStorage.token,a=layui.tree,o=layui.form,s=getKeyTime().startTime,c=getKeyTime().endTime,e=layui.laydate;e.render({elem:"#test6",range:!0,value:getKeyTime().keyTimeData,done:function(e){e=e.split(" - ");s=e[0],c=e[1]}}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$(".keyBtn").click(function(){timeFlag(s,c)?layer.msg("时间选择范围最多三个月",{icon:7}):l.reload({where:{condition:s,conditionTwo:c}})});$(".an-btn").click(function(){$(".pack-up").slideToggle()});var r=layui.table,l=r.render({elem:"#machineListData",url:"".concat(vApi,"/publicized/selectPublicize"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{type:"checkbox"},{field:"number",width:300,title:"发布单号",align:"center"},{field:"advertisingTime",align:"center",width:120,title:"广告时长(秒)",templet:function(e){var i=0;return e.publicizeAdvert.forEach(function(e,t){return i+=Number(e.time)}),i}},{field:"advertisingSize",align:"center",width:160,title:"广告大小(MB)",templet:function(e){var i=0;return e.publicizeAdvert.forEach(function(e,t){return i+=Number(e.size)}),i=i.toFixed(2)}},{field:"attribute",align:"center",width:180,title:"审核状态",templet:function(e){return 0==e.attribute?"未审核":1==e.attribute?"待审核":2==e.attribute?"审核通过":"审核不通过"}},{field:"addUser",width:180,title:"创建人",align:"center"},{field:"creationTime",width:250,title:"创建时间",align:"center"},{field:"operation",right:0,align:"center",width:400,title:"操作",toolbar:"#barDemo",fixed:"right"}]],page:!0,id:"advertisingData",loading:!0,height:"full-210",request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionThree:sessionStorage.machineID,condition:s,conditionTwo:c},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){i(),403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}}),d=layui.carousel,u=null,p=null,h=null;r.on("tool(machineListData)",function(e){var t;p=e.data.number,"preview"===e.event?(h=e.data.publicizeAdvert,S(e.data.publicizeAdvert,"previewSwiperCont","swiperDetails",h),t={interval:1e3*h[0].time},k.reload(t),popupShow("preview","previewContnet")):"toView"===e.event?(r.render({elem:"#machine1",url:"".concat(vApi,"/publicized/getPublicizedMachine"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{field:"number",width:150,title:"售货机编号",align:"center"},{field:"info",width:180,title:"售货机名",align:"center"},{field:"location",width:250,title:"机售货机地址",align:"center"},{field:"operatio",width:120,title:"操作",toolbar:"#machineDemo",align:"center"}]],page:!0,id:"machineDataDetail",skin:"nob",request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:p},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}}),popupShow("toViveCont","toViveBox")):"details"===e.event?(w(u=e.data.publicizeAdvert,"detailsListBox"),popupShow("advertisingDetails","detailsBox")):"push"==e.event&&(e.data.merchantId==sessionStorage.machineID?(y=y||r.render({elem:"#machineDetailsList",url:"".concat(vApi,"/machine/getMachineList"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{type:"checkbox"},{field:"number",width:180,title:"售货机编号",align:"center"},{field:"info",width:200,title:"售货机信息",align:"center"},{field:"location",width:300,title:"地址",align:"center"},{field:"merchantName",width:150,title:"所属商户",align:"center"},{field:"description",width:180,title:"描述",align:"center"}]],page:!0,id:"machineAdvertisingList",loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{actionStatus:"1",merchantId:sessionStorage.machineID},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}}),popupShow("machineDetailsCont","machineDetailsBox")):layer.msg("不能使用下级商户广告",{icon:7}))}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut(),k&&k.reload({autoplay:!1})}),$(".detailsListBox").on("click",".listPreview .previewBtn",function(){$(".MateriaBody .materiaImg img").attr("src",u[$(this).attr("previewIndex")].img),popupShow("materialPreview","MateriaBox")}),$(".detailsListBox").on("click",".listLift img",function(){var e=$(this).attr("ImgIndex"),t=u[e-1];u[e-1]=u[e],u[e]=t,w(u,"detailsListBox")}),$(".detailsListBox").on("blur",".listSize input",function(){0<$(this).val()&""!=$(this).val()?u[$(this).attr("inputIndex")].time=$(this).val():$(this).val(u[$(this).attr("inputIndex")].time)}),$(".detailsFooter .confirmBtn").click(function(){var i;t[384]?(i=[],u.forEach(function(e,t){e={sort:t+1,time:e.time,vid:e.vid};i.push(e)}),$.ajax({type:"post",url:"".concat(vApi,"/publicized/updatePublicize"),processData:!1,contentType:!1,headers:{"Content-Type":"application/json",token:n},data:JSON.stringify({number:p,publicizeAdvert:i}),success:function(e){200==e.code?(popupHide("advertisingDetails","detailsBox"),layer.msg("修改成功",{icon:1}),i=[]):403==e.code?window.parent.location.href="login.html":layer.msg(e.message,{icon:7})}})):layer.msg("您没有编辑广告的权限",{icon:7})}),$(".publishCont .onBtn").click(function(){onStep("publishCont","setAdvertising"),$(".stepsTwo").css("borderColor","#909399"),$(".stepsTwo>div").css("color","#909399"),$(".publishLast").css("color","#909399"),k.reload({autoplay:!1})});var m="",g="";e.render({elem:"#itemrs1",range:!0,done:function(e){timerKey=e.split(" - "),m=timerKey[0],g=timerKey[1]}}),e.render({elem:"#itemrs2",value:new Date,max:"0"}),$(".addQueryBtn").click(function(){f.reload({where:{startTime:m,endTime:g,keyWord:$('input[name="keyName"]').val()}})});var f=null,v=[];function b(e,t){var i="";$.each(e,function(e,t){i+=' <li class="setMateraialList">\n                                <div class="liftImg" style="text-align: center;">\n                                    <img '.concat(0==e?'class="hidden"':"",' src="').concat(M(147),'" class="sortingImg" index="').concat(e,'" alt="">\n                                </div>\n                                <div class="SetSorting">\n                                    <div>').concat(e+1,'</div>\n                                </div>\n                                <div class="abbreviateImg">\n                                    <img src="').concat(t.img,'" alt="">\n                                </div>\n                                <div class="SetName">\n                                    <div>').concat(t.name,'</div>\n                                </div>\n                                <div class="duration">\n                                    <div>\n                                        <input type="number" value="').concat(t.inputVal||"",'" index="').concat(e,'">\n                                    </div>\n                                </div>\n                                <div class="SetType">\n                                    <div>').concat(0==t.advertisingAttribute?"图片":"视频",'</div>\n                                </div>\n                                <div class="SetType">\n                                    <div>').concat(0==t.advertisingType?"横屏":"竖屏",'</div>\n                                </div>\n                                <div class="SetOperation">\n                                    <button class="layui-btn layui-btn-normal  btn delBtn" delindex="').concat(e,'">\n                                        <span>删除</span>\n                                    </button>\n                                </div>\n                            </li>')}),$(".".concat(t)).empty(),$(".".concat(t)).html(i)}$(".setAdvertising .addBtn").click(function(){popupShow("pubilshMaterialCont","pubilshMaterialBox"),f=f||r.render({elem:"#chooseData",url:"".concat(vApi,"/advertising/selectAdvertising"),method:"post",contentType:"application/json",headers:{token:n},cols:[[{type:"checkbox"},{field:"img",width:80,title:"微缩图",templet:"#imgtmp",align:"center"},{field:"name",width:150,title:"素材名",align:"center"},{field:"size",width:100,title:"大小(MB)",align:"center"},{field:"duration",width:120,title:"播放时长(秒)",align:"center"},{field:"advertisingAttribute",align:"center",width:150,title:"素材属性",templet:function(e){return 0==e.advertisingAttribute?"图片":"视频"}},{field:"addUser",width:150,align:"center",title:"创建人 "},{field:"creationTime",width:160,title:"创建时间",align:"center"}]],page:!0,id:"chooesId",height:450,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{status:"1",checkStatus:"2",merchantId:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})}),$(".pubilshMaterialCont .determineBtn").click(function(){0<(v=v.concat(r.checkStatus("chooesId").data)).length?(popupHide("pubilshMaterialCont","pubilshMaterialBox"),b(v,"SetContList"),f.reload({where:{}})):layer.msg("请选择素材",{icon:7})}),$(".SetContList").on("click",".sortingImg",function(){var e=$(this).attr("index"),t=v[e-1];v[e-1]=v[e],v[e]=t,b(v,"SetContList")}),$(".SetContList").on("click",".setMateraialList .delBtn",function(){v.splice($(this).attr("delindex"),1),b(v,"SetContList")}),$(".SetContList").on("blur",".duration input",function(){v[$(this).attr("index")].inputVal=$(this).val()}),$(".setAdvertising .nextBtn").click(function(){$(".stepsTwo").css("borderColor","#e6a23c"),$(".stepsTwo>div").css("color","#e6a23c"),$(".publishLast").css("color","#e6a23c");var e=v.every(function(e,t){return 0<e.inputVal&""!=e.inputVal});0<v.length?e?(S(v,"swiperList","publisSwiper",v),nextStep("setAdvertising","publishCont")):layer.msg("素材播放时长必须大于0",{icon:7}):layer.msg("请选择素材",{icon:7})}),$(".publishCont .publishBtn").click(function(){popupShow("pubilshSweet","sweetBox")}),$(".pubilshSweet .confirmBtn").click(function(){$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var i=[];v.forEach(function(e,t){e={sort:t+1,time:e.inputVal,vid:e.vid};i.push(e)}),i.length==v.length?loadingAjax("/publicized/savePublicize","post",JSON.stringify({publicizeAdvert:i,merchantId:sessionStorage.machineID}),sessionStorage.token,"mask","","",layer).then(function(e){popupHide("pubilshSweet","sweetBox"),popupHide("releaseAdvertising","publishBox"),layer.msg("发布成功",{icon:1}),v=[],l.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:7})}):layer.msg("出错！请重新发布",{icon:7})});var y=null;function w(e,t){var i="";$.each(e,function(e,t){i+=' <li class="detailsList">\n                                <div class="listSort">\n                                    <span>'.concat(e+1,'</span>\n                                </div>\n                                <div class="listImg">\n                                    <img src="').concat(t.img,'"\n                                        alt="">\n                                </div>\n                                <div class="listName">\n                                    <span>').concat(t.name,'</span>\n                                </div>\n                                <div class="listSize">\n                                    <input type="number" inputIndex="').concat(e,'" value="').concat(t.time,'">\n                                </div>\n                                <div class="listAttribute">\n                                    <span>').concat(0==t.advertisingAttribute?"图片":"视频",'</span>\n                                </div>\n                                <div class="listType">\n                                    <span>').concat(0==t.advertisingType?"横屏":"竖屏",'</span>\n                                </div>      \n                                <div class="listSize">\n                                    <span>').concat(t.size,'</span>\n                                </div>\n                                <div class="uploadName">\n                                    <span>').concat(t.addUser,'</span>\n                                </div>\n                                <div class="listPreview">\n                                    <button class="layui-btn layui-btn-normal  btn previewBtn " previewIndex="').concat(e,'">\n                                        <span>预览</span>\n                                    </button>\n                                </div>\n                                <div class="listLift" >\n                                    <img src="../../img/lift.png" alt="" ').concat(0==e?'class="hidden"':"",' ImgIndex="').concat(e,'">\n                                </div>\n                            </li>')}),$(".".concat(t)).empty(),$(".".concat(t)).html(i)}$(".machineDetailsCont .machineKeyBtn").click(function(){y.reload({where:{keyword:$('.machineDetailsCont input[name="machineKey"]').val()}})}),$(".publicAdvertisingBtn").click(function(){$(".setAdvertising").css("left",0),$(".stepsTwo").css("borderColor","#909399"),$(".stepsTwo>div").css("color","#909399"),$(".publishLast").css("color","#909399"),$(".publishCont").css("left","100%"),popupShow("releaseAdvertising","publishBox"),b(v,"SetContList")});var k=null;function S(e,t,i,n){var a="";$.each(e,function(e,t){a+=' <div>\n                            <img src="'.concat(t.img,'"  ').concat(0!=t.advertisingAttribute?'class="hidden"':"",' alt="">\n                            <video src="').concat(t.img,'" controls="controls" ').concat(1!=t.advertisingAttribute?'class="hidden"':"","></video>\n                           </div>")}),$(".".concat(t)).empty(),$(".".concat(t)).html(a),k=d.render({elem:"#".concat(i),width:"100%",arrow:"always",height:"100%",interval:3e3,autoplay:!0});var o;d.on("change(".concat(i,")"),function(e){setTimeout(function(){o={interval:1e3*n[e.index].time||1e3*n[e.index].inputVal},k.reload(o)},500)})}function B(e,t,i){loadingAjax(i,"post",JSON.stringify({data:t,type:e}),sessionStorage.token,"mask","","",layer).then(function(e){layer.msg(e.message,{icon:1}),l.reload({where:{}})}).catch(function(e){202==e.code?(layer.msg(e.message,{icon:7}),l.reload({where:{}})):layer.msg(e.message,{icon:2})})}$(".submitAuditBtn").click(function(){var e=r.checkStatus("advertisingData"),i=[];0<e.data.length?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e.data.forEach(function(e,t){e={number:e.number,status:"1"};i.push(e)}),B("1",i,"/publicized/checkStatus")):layer.msg("请选择需要提交审核的素材",{icon:7})}),$(".approvedBtn").click(function(){var t=r.checkStatus("advertisingData"),i=[];0<t.data.length?layer.confirm("确定审核通过？",function(e){layer.close(e),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),t.data.forEach(function(e,t){e={number:e.number,status:"2"};i.push(e)}),B("0",i,"/publicized/updateStatus")}):layer.msg("请选择需要通过审核的素材",{icon:7})}),$(".noPassBtn").click(function(){var t=r.checkStatus("advertisingData"),i=[];0<t.data.length?layer.confirm("确定审核不通过？",function(e){layer.close(e),$(".mask").fadeIn(),t.data.forEach(function(e,t){e={number:e.number,status:"3"};i.push(e)}),B("0",i,"/publicized/updateStatus")}):layer.msg("请选择需要不通过审核的素材",{icon:7})}),$(".machineDetailsCont .determineBtn").click(function(){var i,e=r.checkStatus("machineAdvertisingList");0<e.data.length?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),i=[],e.data.forEach(function(e,t){i.push(e.machineId)}),i=i.toString(),$.ajax({type:"post",headers:{"Content-Type":"application/json",token:n},url:"".concat(vApi,"/pushAd"),data:JSON.stringify({number:p,machine:i}),success:function(){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),popupHide("machineDetailsCont","machineDetailsBox"),layer.msg("推送成功",{icon:1})},error:function(){layer.msg("服务器请求超时",{icon:2})}})):layer.msg("请选择售货机",{icon:7})}),$(".machineDetailsCont .allDetermineBtn").click(function(){layer.confirm("确认推送广告到所有售货机？",function(e){layer.close(e),$.ajax({type:"post",headers:{"Content-Type":"application/json",token:n},url:"".concat(vApi,"/pushAd"),data:JSON.stringify({number:p}),success:function(){popupHide("machineDetailsCont","machineDetailsBox"),layer.msg("推送成功",{icon:1})},error:function(){layer.msg("服务器请求超时",{icon:2})}})})});var x,C=x=treeList();treeFun(a,"test1",l,C,"conditionThree"),r.on("tool(machine1)",function(e){var t,i;t=e.data.longitude,i=e.data.latitude,e=e.data.location,t=new AMap.Map("machineScottBody",{resizeEnable:!0,center:[t,i],zoom:13}),(i=new AMap.Marker({position:t.getCenter(),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new AMap.Pixel(-13,-30)})).setMap(t),i.setTitle("我是marker的title"),i.setLabel({offset:new AMap.Pixel(20,20),content:"<div class='info'>"+e+"</div>",direction:"right"}),popupShow("ScottCont","scottBox")}),$(".refreshBtn").click(function(){location.reload()}),$("body").bind("keydown",function(e){116==e.keyCode&&(e.preventDefault(),location.reload())});var T=null,I=null;$(".pushReleaseBtn").click(function(){I=[],(T=r.checkStatus("advertisingData")).data.forEach(function(e,t){2==e.attribute&&I.push(e.number)}),0==I.length?layer.msg("请选择审核通过的广告,非审核通过的广告不能推送",{icon:7}):(popupShow("chooseLower","chooseBox"),leg.tree({ele:".treeList",data:x,cascade:!1}),$.each($(".treeList input"),function(){T.data[0].merchantId==$(this).val()&&$(this).prop("disabled",!0)}))});var D=null;$(".RdetermineBtn").click(function(){0!=(D=leg.getCheckedNodes().map(Number)).length?popupShow("PushMandatory","MandatoryBox"):layer.msg("请选择要推送的商户",{icon:7})}),$(".RpushListBtn").click(function(){popupShow("topGoodsList","topBox")}),$(".mandatroFooter div").click(function(){var e=$(this).attr("Ptype");$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");e=JSON.stringify({merchantId:sessionStorage.machineID,merchantList:D,numbers:I,type:e});loadingAjax("/publicized/sendMerchantAd","post",e,sessionStorage.token,"mask","chooseLower","chooseBox",layer).then(function(e){popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:1})}).catch(function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:2})})});var A=null;$(".RpushListBtn").click(function(){popupShow("topGoodsList","topBox"),A=A||r.render({elem:"#parentTableTest",url:"".concat(vApi,"/publicized/getAdHistory"),height:500,method:"post",contentType:"application/json",headers:{token:n},cols:[[{type:"checkbox"},{field:"number",width:190,title:"发布单号",templet:"#Listimgtmp",align:"center"},{field:"duration",width:160,title:"广告时长(秒)",align:"center",templet:function(e){var i=0;return e.advertising.forEach(function(e,t){return i+=Number(e.time)}),i}},{field:"size",width:160,title:"广告大小(MB)",align:"center",templet:function(e){var i=0;return e.advertising.forEach(function(e,t){return i+=Number(e.size)}),i=i.toFixed(2)}},{field:"topMerchant",width:140,title:"推送商户",align:"center"},{field:"targetMerchant",width:160,title:"接收商户",align:"center"},{field:"received",width:100,title:"接收状态 ",align:"center",templet:function(e){return 0==e.received?"未接收":"已接收"}},{field:"sendTime",width:200,title:"推送时间 ",align:"center",templet:function(e){var t=new Date(e.sendTime);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(e=t.getDate())+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{field:"operatio",width:80,title:"操作",align:"center",toolbar:"#pushReleaseDemo"}]],id:"parentTableId",page:!0,loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:"0",conditionTwo:"0",conditionThree:"0"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){for(var t in 403==e.code&&(window.parent.location.href="login.html"),e.data){var i=e.data[t];i.childMerchantId==sessionStorage.machineID&&1!=i.received||($(".list_table1 tr[data-index="+t+'] input[type="checkbox"]').prop("disabled",!0),o.render())}}})}),$(".pushReleaseListBtn").click(function(){var e=r.checkStatus("parentTableId"),i=[];0<e.data.length?(e.data.forEach(function(e,t){e.childMerchantId==sessionStorage.machineID&&0==e.received&&i.push(e.tempNumber)}),0!=i.length?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e=JSON.stringify({numbers:i}),loadingAjax("/publicized/getMerchantAd","post",e,sessionStorage.token,"mask","topGoodsList","topBox",layer).then(function(e){layer.msg(e.message,{icon:1}),l.reload({where:{}}),A.reload({where:{}})}).catch(function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg(e.message,{icon:2})})):layer.msg("没有能接收的广告",{icon:7})):layer.msg("请选择接收的广告",{icon:7})}),$(".topBody .pushQueryBtn").click(function(){A.reload({where:{condition:$('.topBody select[name="receiveStatus"]').val()||"0",conditionTwo:$('.topBody select[name="receiveType"]').val()||"0",conditionThree:$('.topBody select[name="mandatory"]').val()||"0"}})}),r.on("tool(parentTableTest)",function(e){h=e.data.advertising,S(e.data.advertising,"previewSwiperCont","swiperDetails",h);e={interval:1e3*h[0].time};k.reload(e),popupShow("preview","previewContnet")}),$(".chooseLower .chooseCan").click(function(){popupHide("chooseLower","chooseBox")}),$(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(C)?(C=e,treeFun(a,"test1",l,C,"conditionThree"),l.reload({where:{conditionThree:sessionStorage.machineID}})):layer.msg("已刷新",{icon:1})});var L=!0;$(".pubilshMaterialCont").on("mouseenter",".pic102",function(e){$("#pic101").attr("src",$(this).attr("src"));var t=new Image;t.onload=function(){$("#pic101").css({width:this.width>=this.height?"350px":"auto",height:this.height>this.width?"350px":"auto"}).fadeIn("fast"),this.onload=null},t.src=$(this).attr("src")}),$(".pubilshMaterialCont").on("click",".pic102",function(){event.stopPropagation(),L=!1}),$(".pubilshMaterialCont").on("mouseleave",".pic102",function(){L&&$("#pic101").hide()}),$("#pic101").click(function(){event.stopPropagation()}),$("body").click(function(){L=!0,$("#pic101").hide()}),$("#pic101").mouseenter(function(){$("#pic101").show()}),$("#pic101").mouseleave(function(){L&&$("#pic101").hide()})})},147:function(e,t,i){e.exports=i.p+"image/a699865ab3ac2d388064ab0bc15b4519.png"},405:function(e,t){}});