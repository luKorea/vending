/*! 版权所有，翻版必究 */!function(e){function t(t){for(var n,s,c=t[0],r=t[1],l=t[2],u=0,p=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,c=1;c<i.length;c++){var r=i[c];0!==a[r]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},a={34:0},o=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=r;o.push([263,0]),i()}({263:function(e,t,i){"use strict";i.r(t);i(653);layui.use(["element","laydate","table","carousel","tree","form"],function(){tooltip(".refreshBtnList",{transition:!0,time:200});var e=window.parent.permissionsData1(),t=permissionsVal1({383:!1,384:!1,386:!1,404:!1,406:!1},e);function n(){t[383]?$(".publicAdvertisingBtn").removeClass("hide"):$(".publicAdvertisingBtn").addClass("hide"),t[386]?$(".auditBtnTwo").removeClass("hide"):$(".auditBtnTwo").addClass("hide"),t[404]?$(".pushReleaseBtn").removeClass("hide"):$(".pushReleaseBtn").addClass("hide"),t[406]?$(".RpushListBtn").removeClass("hide"):$(".RpushListBtn").addClass("hide")}n();var a=sessionStorage.token,o=layui.tree,s=layui.form,c=getKeyTime().startTime,r=getKeyTime().endTime,l=layui.laydate;l.render({elem:"#test6",range:!0,value:getKeyTime().keyTimeData,done:function(e,t,i){var n=e.split(" - ");c=n[0],r=n[1]}}),$(".sidebar i").click(function(){$(".left-mian").hide(),$(".on-left").show()}),$(".on-left").click(function(){$(".left-mian").show(),$(".on-left").hide()}),$(".keyBtn").click(function(){timeFlag(c,r)?layer.msg("时间选择范围最多三个月",{icon:7}):u.reload({where:{condition:c,conditionTwo:r}})});$(".an-btn").click(function(){$(".pack-up").slideToggle()});var d=layui.table,u=d.render({elem:"#machineListData",url:"".concat(vApi,"/publicized/selectPublicize"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{type:"checkbox"},{field:"number",width:280,title:"发布单号",align:"center"},{field:"advertisingTime",align:"center",width:120,title:"广告时长(秒)",templet:function(e){var t=0;return e.publicizeAdvert.forEach(function(e,i){return t+=Number(e.time)}),t}},{field:"advertisingSize",align:"center",width:160,title:"广告大小(MB)",templet:function(e){var t=0;return e.publicizeAdvert.forEach(function(e,i){return t+=Number(e.size)}),t=t.toFixed(2)}},{field:"attribute",align:"center",width:180,title:"审核状态",templet:function(e){return 0==e.attribute?"未审核":1==e.attribute?"待审核":2==e.attribute?"审核通过":"审核不通过"}},{field:"addUser",width:180,title:"创建人",align:"center"},{field:"creationTime",width:250,title:"创建时间",align:"center"},{field:"operation",right:0,align:"center",width:150,title:"操作",toolbar:"#barDemo"}]],page:!0,id:"advertisingData",loading:!0,height:"full-210",request:{pageName:"pageNum",limitName:"pageSize"},where:{conditionThree:sessionStorage.machineID,condition:c,conditionTwo:r},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){n(),403==e.code?window.parent.location.href="login.html":405==e.code&&$(".hangContent").show()}}),p=layui.carousel,h=null,m=null,g=null,f=null,v=null;d.on("tool(machineListData)",function(e){if(event.stopPropagation(),m=e.data.number,v=e.data,"operation"===e.event){if(f==e.data.number)return $(".ListOperation").fadeOut(),void(f=null);2!=e.data.attribute?$(".ListOperation .push").addClass("hide"):$(".ListOperation .push").removeClass("hide"),f=e.data.number,$(".ListOperation").fadeIn(),$(".ListOperation").css({left:$(this).offset().left-35+"px",top:$(this).offset().top+35+"px"})}}),$(".ListOperation .preview").click(function(){g=v.publicizeAdvert,L(v.publicizeAdvert,"previewSwiperCont","swiperDetails",g);var e={interval:1e3*g[0].time};C.reload(e),popupShow("preview","previewContnet")}),$(".ListOperation .details").click(function(){B(h=v.publicizeAdvert,"detailsListBox"),popupShow("advertisingDetails","detailsBox")}),$(".ListOperation .toView").click(function(){d.render({elem:"#machine1",url:"".concat(vApi,"/publicized/getPublicizedMachine"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{field:"number",width:150,title:"售货机编号",align:"center"},{field:"info",width:180,title:"售货机名",align:"center"},{field:"location",width:250,title:"机售货机地址",align:"center"},{field:"operatio",width:120,title:"操作",toolbar:"#machineDemo",align:"center"}]],page:!0,id:"machineDataDetail",skin:"nob",request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:m},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}}),popupShow("toViveCont","toViveBox")}),$(".ListOperation .push").click(function(){v.merchantId==sessionStorage.machineID?(x||(x=d.render({elem:"#machineDetailsList",url:"".concat(vApi,"/machine/getMachineList"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{type:"checkbox"},{field:"number",width:180,title:"售货机编号",align:"center"},{field:"info",width:200,title:"售货机信息",align:"center"},{field:"location",width:300,title:"地址",align:"center"},{field:"merchantName",width:150,title:"所属商户",align:"center"},{field:"description",width:180,title:"描述",align:"center"}]],page:!0,id:"machineAdvertisingList",loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},where:{actionStatus:"1",merchantId:sessionStorage.machineID},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}})),popupShow("machineDetailsCont","machineDetailsBox")):layer.msg("不能使用下级商户广告",{icon:7})}),$(".playHeader .close").click(function(){$(this).parent().parent().addClass("margin0"),$(this).parents(".maskContnet").fadeOut(),C&&C.reload({autoplay:!1})}),$(".detailsListBox").on("click",".listPreview .previewBtn",function(){$(".MateriaBody .materiaImg img").attr("src",h[$(this).attr("previewIndex")].img),popupShow("materialPreview","MateriaBox")}),$(".detailsListBox").on("click",".listLift img",function(){var e=$(this).attr("ImgIndex"),t=h[e-1];h[e-1]=h[e],h[e]=t,B(h,"detailsListBox")}),$(".detailsListBox").on("blur",".listSize input",function(){$(this).val()>0&""!=$(this).val()?h[$(this).attr("inputIndex")].time=$(this).val():$(this).val(h[$(this).attr("inputIndex")].time)}),$(".detailsFooter .confirmBtn").click(function(){if(t[384]){var e=[];h.forEach(function(t,i){var n={sort:i+1,time:t.time,vid:t.vid};e.push(n)}),$.ajax({type:"post",url:"".concat(vApi,"/publicized/updatePublicize"),processData:!1,contentType:!1,headers:{"Content-Type":"application/json",token:a},data:JSON.stringify({number:m,publicizeAdvert:e}),success:function(t){200==t.code?(popupHide("advertisingDetails","detailsBox"),layer.msg("修改成功",{icon:1}),e=[]):403==t.code?window.parent.location.href="login.html":layer.msg(t.message,{icon:7})}})}else layer.msg("您没有编辑广告的权限",{icon:7})}),$(".publishCont .onBtn").click(function(){onStep("publishCont","setAdvertising"),$(".stepsTwo").css("borderColor","#909399"),$(".stepsTwo>div").css("color","#909399"),$(".publishLast").css("color","#909399"),C.reload({autoplay:!1})});var b="",y="";l.render({elem:"#itemrs1",range:!0,done:function(e,t,i){timerKey=e.split(" - "),b=timerKey[0],y=timerKey[1]}}),l.render({elem:"#itemrs2",value:new Date,max:"0"}),$(".addQueryBtn").click(function(){w.reload({where:{startTime:b,endTime:y,keyWord:$('input[name="keyName"]').val()}})});var w=null,k=[];function S(e,t){var n="";$.each(e,function(e,t){n+=' <li class="setMateraialList">\n                                <div class="liftImg" style="text-align: center;">\n                                    <img '.concat(0==e?'class="hidden"':"",' src="').concat(i(264),'" class="sortingImg" index="').concat(e,'" alt="">\n                                </div>\n                                <div class="SetSorting">\n                                    <div>').concat(e+1,'</div>\n                                </div>\n                                <div class="abbreviateImg">\n                                    <img src="').concat(t.img,'" alt="">\n                                </div>\n                                <div class="SetName">\n                                    <div>').concat(t.name,'</div>\n                                </div>\n                                <div class="duration">\n                                    <div>\n                                        <input type="number" value="').concat(t.inputVal?t.inputVal:"",'" index="').concat(e,'">\n                                    </div>\n                                </div>\n                                <div class="SetType">\n                                    <div>').concat(0==t.advertisingAttribute?"图片":"视频",'</div>\n                                </div>\n                                <div class="SetType">\n                                    <div>').concat(0==t.advertisingType?"横屏":"竖屏",'</div>\n                                </div>\n                                <div class="SetOperation">\n                                    <button class="layui-btn layui-btn-normal  btn delBtn" delindex="').concat(e,'">\n                                        <span>删除</span>\n                                    </button>\n                                </div>\n                            </li>')}),$(".".concat(t)).empty(),$(".".concat(t)).html(n)}$(".setAdvertising .addBtn").click(function(){popupShow("pubilshMaterialCont","pubilshMaterialBox"),w||(w=d.render({elem:"#chooseData",url:"".concat(vApi,"/advertising/selectAdvertising"),method:"post",contentType:"application/json",headers:{token:a},cols:[[{type:"checkbox"},{field:"img",width:80,title:"微缩图",templet:"#imgtmp",align:"center"},{field:"name",width:150,title:"素材名",align:"center"},{field:"size",width:100,title:"大小(MB)",align:"center"},{field:"duration",width:120,title:"播放时长(秒)",align:"center"},{field:"advertisingAttribute",align:"center",width:150,title:"素材属性",templet:function(e){return 0==e.advertisingAttribute?"图片":"视频"}},{field:"addUser",width:150,align:"center",title:"创建人 "},{field:"creationTime",width:160,title:"创建时间",align:"center"}]],page:!0,id:"chooesId",height:450,loading:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{status:"1",checkStatus:"2",merchantId:sessionStorage.machineID},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(window.parent.location.href="login.html")}}))}),$(".pubilshMaterialCont .determineBtn").click(function(){(k=k.concat(d.checkStatus("chooesId").data)).length>0?(popupHide("pubilshMaterialCont","pubilshMaterialBox"),S(k,"SetContList"),w.reload({where:{}})):layer.msg("请选择素材",{icon:7})}),$(".SetContList").on("click",".sortingImg",function(){var e=$(this).attr("index"),t=k[e-1];k[e-1]=k[e],k[e]=t,S(k,"SetContList")}),$(".SetContList").on("click",".setMateraialList .delBtn",function(){k.splice($(this).attr("delindex"),1),S(k,"SetContList")}),$(".SetContList").on("blur",".duration input",function(){k[$(this).attr("index")].inputVal=$(this).val()}),$(".setAdvertising .nextBtn").click(function(){$(".stepsTwo").css("borderColor","#e6a23c"),$(".stepsTwo>div").css("color","#e6a23c"),$(".publishLast").css("color","#e6a23c");var e=k.every(function(e,t){return e.inputVal>0&""!=e.inputVal});k.length>0?e?(L(k,"swiperList","publisSwiper",k),nextStep("setAdvertising","publishCont")):layer.msg("素材播放时长必须大于0",{icon:7}):layer.msg("请选择素材",{icon:7})}),$(".publishCont .publishBtn").click(function(){popupShow("pubilshSweet","sweetBox")}),$(".pubilshSweet .confirmBtn").click(function(){$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var e=[];k.forEach(function(t,i){var n={sort:i+1,time:t.inputVal,vid:t.vid};e.push(n)}),e.length==k.length?loadingAjax("/publicized/savePublicize","post",JSON.stringify({publicizeAdvert:e,merchantId:sessionStorage.machineID}),sessionStorage.token,"mask","","",layer).then(function(e){popupHide("pubilshSweet","sweetBox"),popupHide("releaseAdvertising","publishBox"),layer.msg("发布成功",{icon:1}),k=[],u.reload({where:{}})}).catch(function(e){layer.msg(e.message,{icon:7})}):layer.msg("出错！请重新发布",{icon:7})});var x=null;function B(e,t){var i="";$.each(e,function(e,t){i+=' <li class="detailsList">\n                                <div class="listSort">\n                                    <span>'.concat(e+1,'</span>\n                                </div>\n                                <div class="listImg">\n                                    <img src="').concat(t.img,'"\n                                        alt="">\n                                </div>\n                                <div class="listName">\n                                    <span>').concat(t.name,'</span>\n                                </div>\n                                <div class="listSize">\n                                    <input type="number" inputIndex="').concat(e,'" value="').concat(t.time,'">\n                                </div>\n                                <div class="listAttribute">\n                                    <span>').concat(0==t.advertisingAttribute?"图片":"视频",'</span>\n                                </div>\n                                <div class="listType">\n                                    <span>').concat(0==t.advertisingType?"横屏":"竖屏",'</span>\n                                </div>      \n                                <div class="listSize">\n                                    <span>').concat(t.size,'</span>\n                                </div>\n                                <div class="uploadName">\n                                    <span>').concat(t.addUser,'</span>\n                                </div>\n                                <div class="listPreview">\n                                    <button class="layui-btn layui-btn-normal  btn previewBtn " previewIndex="').concat(e,'">\n                                        <span>预览</span>\n                                    </button>\n                                </div>\n                                <div class="listLift" >\n                                    <img src="../../img/lift.png" alt="" ').concat(0==e?'class="hidden"':"",' ImgIndex="').concat(e,'">\n                                </div>\n                            </li>')}),$(".".concat(t)).empty(),$(".".concat(t)).html(i)}$(".machineDetailsCont .machineKeyBtn").click(function(){x.reload({where:{keyword:$('.machineDetailsCont input[name="machineKey"]').val()}})}),$(".publicAdvertisingBtn").click(function(){$(".setAdvertising").css("left",0),$(".stepsTwo").css("borderColor","#909399"),$(".stepsTwo>div").css("color","#909399"),$(".publishLast").css("color","#909399"),$(".publishCont").css("left","100%"),popupShow("releaseAdvertising","publishBox"),S(k,"SetContList")});var C=null;function L(e,t,i,n){var a="";$.each(e,function(e,t){a+=' <div>\n                            <img src="'.concat(t.img,'"  ').concat(0!=t.advertisingAttribute?'class="hidden"':"",' alt="">\n                            <video src="').concat(t.img,'" controls="controls" ').concat(1!=t.advertisingAttribute?'class="hidden"':"","></video>\n                           </div>")}),$(".".concat(t)).empty(),$(".".concat(t)).html(a),C=p.render({elem:"#".concat(i),width:"100%",arrow:"always",height:"100%",interval:3e3,autoplay:!0});var o=null;p.on("change(".concat(i,")"),function(e){setTimeout(function(){o={interval:1e3*n[e.index].time||1e3*n[e.index].inputVal},C.reload(o)},500)})}function T(e,t,i){loadingAjax(i,"post",JSON.stringify({data:t,type:e}),sessionStorage.token,"mask","","",layer).then(function(e){layer.msg(e.message,{icon:1}),u.reload({where:{}})}).catch(function(e){202==e.code?(layer.msg(e.message,{icon:7}),u.reload({where:{}})):layer.msg(e.message,{icon:2})})}$(".submitAuditBtn").click(function(){var e=d.checkStatus("advertisingData"),t=[];e.data.length>0?($(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e.data.forEach(function(e,i){var n={number:e.number,status:"1"};t.push(n)}),T("1",t,"/publicized/checkStatus")):layer.msg("请选择需要提交审核的素材",{icon:7})}),$(".approvedBtn").click(function(){var e=d.checkStatus("advertisingData"),t=[];e.data.length>0?layer.confirm("确定审核通过？",function(i){layer.close(i),$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon"),e.data.forEach(function(e,i){var n={number:e.number,status:"2"};t.push(n)}),T("0",t,"/publicized/updateStatus")}):layer.msg("请选择需要通过审核的素材",{icon:7})}),$(".noPassBtn").click(function(){var e=d.checkStatus("advertisingData"),t=[];e.data.length>0?layer.confirm("确定审核不通过？",function(i){layer.close(i),$(".mask").fadeIn(),e.data.forEach(function(e,i){var n={number:e.number,status:"3"};t.push(n)}),T("0",t,"/publicized/updateStatus")}):layer.msg("请选择需要不通过审核的素材",{icon:7})}),$(".machineDetailsCont .determineBtn").click(function(){var e=d.checkStatus("machineAdvertisingList");if(e.data.length>0){$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var t=[];e.data.forEach(function(e,i){t.push(e.machineId)}),t=t.toString(),$.ajax({type:"post",headers:{"Content-Type":"application/json",token:a},url:"".concat(vApi,"/pushAd"),data:JSON.stringify({number:m,machine:t}),success:function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),popupHide("machineDetailsCont","machineDetailsBox"),layer.msg("推送成功",{icon:1})},error:function(e){layer.msg("服务器请求超时",{icon:2})}})}else layer.msg("请选择售货机",{icon:7})}),$(".machineDetailsCont .allDetermineBtn").click(function(){layer.confirm("确认推送广告到所有售货机？",function(e){layer.close(e),$.ajax({type:"post",headers:{"Content-Type":"application/json",token:a},url:"".concat(vApi,"/pushAd"),data:JSON.stringify({number:m}),success:function(e){popupHide("machineDetailsCont","machineDetailsBox"),layer.msg("推送成功",{icon:1})},error:function(e){layer.msg("服务器请求超时",{icon:2})}})})});var I,D=I=treeList();treeFun(o,"test1",u,D,"conditionThree"),d.on("tool(machine1)",function(e){var t,i,n,a,o;t=e.data.longitude,i=e.data.latitude,n=e.data.location,a=new AMap.Map("machineScottBody",{resizeEnable:!0,center:[t,i],zoom:13}),(o=new AMap.Marker({position:a.getCenter(),icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new AMap.Pixel(-13,-30)})).setMap(a),o.setTitle("我是marker的title"),o.setLabel({offset:new AMap.Pixel(20,20),content:"<div class='info'>"+n+"</div>",direction:"right"}),popupShow("ScottCont","scottBox")}),$(".refreshBtn").click(function(){location.reload()}),$("body").bind("keydown",function(e){116==e.keyCode&&(e.preventDefault(),location.reload())});var A=null,M=null;$(".pushReleaseBtn").click(function(){M=[],(A=d.checkStatus("advertisingData")).data.forEach(function(e,t){2==e.attribute&&M.push(e.number)}),0!=M.length?(popupShow("chooseLower","chooseBox"),leg.tree({ele:".treeList",data:I,cascade:!1}),$.each($(".treeList input"),function(){A.data[0].merchantId!=$(this).val()||$(this).prop("disabled",!0)})):layer.msg("请选择审核通过的广告,非审核通过的广告不能推送",{icon:7})});var z=null;$(".RdetermineBtn").click(function(){0!=(z=leg.getCheckedNodes().map(Number)).length?popupShow("PushMandatory","MandatoryBox"):layer.msg("请选择要推送的商户",{icon:7})}),$(".RpushListBtn").click(function(){popupShow("topGoodsList","topBox")}),$(".mandatroFooter div").click(function(){var e=$(this).attr("Ptype");$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var t=JSON.stringify({merchantId:sessionStorage.machineID,merchantList:z,numbers:M,type:e});loadingAjax("/publicized/sendMerchantAd","post",t,sessionStorage.token,"mask","chooseLower","chooseBox",layer).then(function(e){popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:1})}).catch(function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),popupHide("PushMandatory","MandatoryBox"),layer.msg(e.message,{icon:2})})});var O=null;$(".RpushListBtn").click(function(){popupShow("topGoodsList","topBox"),O||(O=d.render({elem:"#parentTableTest",url:"".concat(vApi,"/publicized/getAdHistory"),height:500,method:"post",contentType:"application/json",headers:{token:a},cols:[[{type:"checkbox"},{field:"number",width:190,title:"发布单号",templet:"#Listimgtmp",align:"center"},{field:"duration",width:160,title:"广告时长(秒)",align:"center",templet:function(e){var t=0;return e.advertising.forEach(function(e,i){return t+=Number(e.time)}),t}},{field:"size",width:160,title:"广告大小(MB)",align:"center",templet:function(e){var t=0;return e.advertising.forEach(function(e,i){return t+=Number(e.size)}),t=t.toFixed(2)}},{field:"topMerchant",width:140,title:"推送商户",align:"center"},{field:"targetMerchant",width:160,title:"接收商户",align:"center"},{field:"received",width:100,title:"接收状态 ",align:"center",templet:function(e){return 0==e.received?"未接收":"已接收"}},{field:"sendTime",width:200,title:"推送时间 ",align:"center",templet:function(e){var t=new Date(e.sendTime);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(e=t.getDate())+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{field:"operatio",width:80,title:"操作",align:"center",toolbar:"#pushReleaseDemo"}]],id:"parentTableId",page:!0,loading:!0,limits:[10,20,50],request:{pageName:"pageNum",limitName:"pageSize"},where:{condition:"0",conditionTwo:"0",conditionThree:"0"},parseData:function(e){return 200==e.code?{code:e.code,msg:"",count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){for(var t in 403==e.code&&(window.parent.location.href="login.html"),e.data){var i=e.data[t];i.childMerchantId==sessionStorage.machineID&&1!=i.received||($(".list_table1 tr[data-index="+t+'] input[type="checkbox"]').prop("disabled",!0),s.render())}}}))}),$(".pushReleaseListBtn").click(function(){var e=d.checkStatus("parentTableId"),t=[];if(e.data.length>0){if(e.data.forEach(function(e,i){e.childMerchantId==sessionStorage.machineID&&0==e.received&&t.push(e.tempNumber)}),0==t.length)return void layer.msg("没有能接收的广告",{icon:7});$(".mask").fadeIn(),$(".maskSpan").addClass("maskIcon");var i=JSON.stringify({numbers:t});loadingAjax("/publicized/getMerchantAd","post",i,sessionStorage.token,"mask","topGoodsList","topBox",layer).then(function(e){layer.msg(e.message,{icon:1}),u.reload({where:{}}),O.reload({where:{}})}).catch(function(e){$(".mask").fadeOut(),$(".maskSpan").removeClass("maskIcon"),layer.msg(e.message,{icon:2})})}else layer.msg("请选择接收的广告",{icon:7})}),$(".topBody .pushQueryBtn").click(function(){O.reload({where:{condition:$('.topBody select[name="receiveStatus"]').val()||"0",conditionTwo:$('.topBody select[name="receiveType"]').val()||"0",conditionThree:$('.topBody select[name="mandatory"]').val()||"0"}})}),d.on("tool(parentTableTest)",function(e){g=e.data.advertising,L(e.data.advertising,"previewSwiperCont","swiperDetails",g);var t={interval:1e3*g[0].time};C.reload(t),popupShow("preview","previewContnet")}),$(".chooseLower .chooseCan").click(function(){popupHide("chooseLower","chooseBox")}),$(".refreshBtnList").click(function(){var e=treeList();JSON.stringify(e)!=JSON.stringify(D)?(D=e,treeFun(o,"test1",u,D,"conditionThree"),u.reload({where:{conditionThree:sessionStorage.machineID}})):layer.msg("已刷新",{icon:1})});var N=!0;$(".pubilshMaterialCont").on("mouseenter",".pic102",function(e){$("#pic101").attr("src",$(this).attr("src"));var t=new Image;t.onload=function(){$("#pic101").css({width:this.width>=this.height?"350px":"auto",height:this.height>this.width?"350px":"auto"}).fadeIn("fast"),this.onload=null},t.src=$(this).attr("src")}),$(".pubilshMaterialCont").on("click",".pic102",function(){event.stopPropagation(),N=!1}),$(".pubilshMaterialCont").on("mouseleave",".pic102",function(){N&&$("#pic101").hide()}),$("#pic101").click(function(){event.stopPropagation()}),$("body").click(function(){N=!0,$("#pic101").hide(),$(".ListOperation").fadeOut(),f=null}),$("#pic101").mouseenter(function(){$("#pic101").show()}),$("#pic101").mouseleave(function(){N&&$("#pic101").hide()})})},264:function(e,t,i){e.exports=i.p+"image/a699865ab3ac2d388064ab0bc15b4519.png"},653:function(e,t){}});