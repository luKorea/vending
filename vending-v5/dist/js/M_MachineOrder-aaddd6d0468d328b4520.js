/*! 版权所有，翻版必究 */!function(n){function e(e){for(var a,i,s=e[0],r=e[1],l=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a]);for(u&&u(e);p.length;)p.shift()();return c.push.apply(c,l||[]),t()}function t(){for(var n,e=0;e<c.length;e++){for(var t=c[e],a=!0,s=1;s<t.length;s++){var r=t[s];0!==o[r]&&(a=!1)}a&&(c.splice(e--,1),n=i(i.s=t[0]))}return n}var a={},o={1:0},c=[];function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=a,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var a in n)i.d(t,a,function(e){return n[e]}.bind(null,a));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=r;c.push([611,0]),t()}({611:function(n,e,t){"use strict";t.r(e);var a=t(0);t(690);function o(n){""===n&&(n=0),n=n.toString().replace(/[^\d\.-]/g,""),isNaN(n)&&(n="0");var e=n==(n=Math.abs(n)),t=(n=Math.floor(100*n+.50000000001))%100;t=t<10?"0"+t:t,n=Math.floor(n/100).toString();for(var a=0;a<Math.floor((n.length-(1+a))/3);a++)n=n.substring(0,n.length-(4*a+3))+","+n.substring(n.length-(4*a+3));return"￥"+(e?"":"-")+n+"."+t}hui("#select1").selectBeautify(),hui("#select2").selectBeautify(),hui("#select3").selectBeautify();var c=Object(a.c)().startTime,i=Object(a.c)().endTime,s=1;$("#back").click(function(){window.location.href="M_managementCenter.html"});var r=sessionStorage.machineID,l=[];function u(n,e){var t=JSON.stringify({conditionFive:n,pageNum:e,pageSize:100,condition:c,conditionTwo:i,conditionSeven:0,conditionThree:$("#search").val(),conditionSix:hui("#select1").val(),refund:hui("#select2").val(),shipStatus:hui("#select3").val()});Object(a.d)("/order/getOrderList","post",sessionStorage.token,t).then(function(n){if(1==e){if(0==n.data.list.length)return $(".pages3").hide(),void $(".orderList").html("<h2>暂无数据</h2>");!function(n,e){var t=Number(n)/100;t=t%1==0?t:t+1;for(var a=Math.floor(t),o="",c=0;c<a;c++)o+=' <div class="pageVal '.concat(0==c?"hui-pager-active":"",'"  val="').concat(c+1,'"><a href="javascript:hui.toast(\'第').concat(c+1,"页');\" >").concat(c+1,"</a></div>");$("".concat(e," .hui-pager")).html(o)}(n.data.total,".pages3"),$(".pages3").show()}else $(".pages3").show();var t="";l=n.data.list,n.data.list.forEach(function(n,e){var c="";n.ship_info.forEach(function(n){c+="<p>\n                        ".concat(n.goods_Name,"(").concat(n.way,"货道").concat(function(n){var e="";switch(n){case 0:e="出货失败";break;case 1:e="出货成功";break;case 2:e="出货正常 光检失败";break;case 3:e="电机故障";break;default:e="货道故障"}return e}(n.ship_status),")\n                          </p>")}),t+=' <li dataIndex="'.concat(e,'" class="orderIn">\n                        <div class="flex">\n                            <label for="">售货机名(编号):</label>\n                            <p>').concat(n.info,"(").concat(n.machineNumber,')</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单编号:</label>\n                            <p>').concat(n.number,'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单金额:</label>\n                            <p>').concat(o(n.amount),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付状态:</label>\n                            <p>').concat(function(n){var e="";switch(n){case 1:e="等待支付";break;case 2:e="已支付";break;default:e="未支付"}return e}(n.payStatus),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">下单时间:</label>\n                            <p> ').concat(Object(a.l)(n.time),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付类型:</label>\n                            <p>').concat(function(n){var e="";switch(n){case 0:e="支付宝";break;case 1:e="微信";break;case 3:e="工行支付";break;case 4:e="杉德支付"}return e}(n.payType),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">退款状态:</label>\n                            <p>').concat(function(n){var e="";switch(n){case 1:e="未退款";break;case 2:e="部分退款";break;case 3:e="全部退款";break;default:e="-"}return e}(n.refund),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货状态:</label>\n                            <p>').concat(function(n){var e="";switch(n){case 0:e="未出货";break;case 1:e="部分出货失败";break;case 2:e="全部出货成功";break;case 3:e="出货中";break;case 4:e="全部出货失败";break;case 5:e="光检失败"}return e}(n.shipStatus),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货详情:</label>\n                            <div>').concat(c,'</div>\n                        </div>\n                        <div class="flex">\n                            <label for="">销售经理:</label>\n                            <p>').concat(n.sales_no?n.sales_no:"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">收款方:</label>\n                            <p>').concat(n.payee,"</p>\n                        </div>\n                    </li>")}),$(".orderList").html(t)}).catch(function(n){Object(a.m)(n.message,"error")})}u(r,s),$(".pages3").on("click",".pageVal",function(){$(this).addClass("hui-pager-active").siblings().removeClass("hui-pager-active"),s=Number($(this).attr("val")),u(r,Number($(this).attr("val")))});var d=Object(a.n)(sessionStorage.machineID);$(".hui-icons-menu-point").click(function(){0!=d.length?Object(a.j)(".merchantsContent",".merchantsBox","top0"):Object(a.m)("您没有查看下级商户的权限","warn")}),$(".merchantsBox").click(function(){event.stopPropagation()}),$(".merchantsContent").click(function(){Object(a.b)(this,"top0")});var p='<ul class="sire">';!function n(e){$.each(e,function(e,a){a.children&&a.children.length?(p+='<li class="parent "> <img indexFlag="1" class="nextImg" src="'.concat(t(249),'" alt=""> <span class="').concat(0==e?"navFocus":"",'" mId="').concat(a.id,'">').concat(a.title,'</span> <ul class="parentOne">'),n(a.children),p+="</ul>"):p+='<li> <img src="'.concat(t(250),'" alt=""> <span mId="').concat(a.id,'">').concat(a.title,"</span>"),p+="</li>"})}(d),p+="</ul>",$(".merchantsBox").html(p),$(".merchantsBox").on("click",".parent span",function(){$(".merchantsBox .parent span").removeClass("navFocus"),$(this).addClass("navFocus"),u(r=Number($(this).attr("mId")),1),s=1}),$(".merchantsBox").on("click",".nextImg",function(){1==$(this).attr("indexFlag")?($(this).attr("indexFlag",2),$(this).addClass("navImg")):($(this).attr("indexFlag",1),$(this).removeClass("navImg")),$(this).siblings(".parentOne").slideToggle()});var f=null;$(".orderList").on("click",".orderIn",function(){var n,e;f=l[$(this).attr("dataIndex")],console.log(f),n=f.goodsList,e="",n.forEach(function(n,t){e+='\n                    <li class="list flex" goodsIndex="'.concat(t,'">\n                        <div class="img">\n                            <img\n                                src="').concat(n.goods_images,'" />\n                        </div>\n                        <div class="goodsInform">\n                            <h5>').concat(n.good_name_core,'</h5>\n                            <div class="flexThree of">\n                                <p>').concat(o(n.price),"</p>\n                                <p>x").concat(n.count,'</p>\n                            </div>\n                            <p style="margin:5px 0;">已退款数量：').concat(n.refund_count,"</p>\n                        </div>\n                    </li>")}),$(".goodsListCont").html(e),$(".goodsCont").show()}),$(".goodsCont .goodsHeader img").click(function(){$(".goodsCont").hide()});var m=null;$(".goodsListCont").on("click",".list",function(){m=f.goodsList[$(this).attr("goodsIndex")],2==f.payStatus&&m.count!=m.refund_count&&($(".twoPoles span").html(m.count-m.refund_count),$(".refundNumber input").val(1),$('.sumInput input[name="sum"]').val(m.price),Object(a.j)(".refundCont",".changeBox","top30"))}),$(".close").click(function(){Object(a.a)(this,"top30"),event.stopPropagation()}),$(".maskBox ").click(function(){event.stopPropagation()}),$(".refundCont ").click(function(){Object(a.b)(this,"top30")});var h=1;$(".refundNumber input").keyup(function(){var n=$(this).val();/^\d*$/.test(n)?(h=$(this).val(),$('.sumInput input[name="sum"]').val(Number($(this).val()*m.price))):(Object(a.m)("只能输入正整数","warn"),$(this).val(h),$('.sumInput input[name="sum"]').val(Number($(this).val()*m.price))),$('.sumInput input[name="sum"]').val(Number($(this).val()*m.price))}),$(".refundNumber input").change(function(){$('.sumInput input[name="sum"]').val(Number($(this).val()*m.price))}),$(".refundCont .confirmBtn").click(function(){$(".refundNumber input").val()>0&&$(".refundNumber input").val()<=m.count-m.refund_count?hui.confirm("确定退款？",["取消","确定"],function(){Object(a.j)(".validationContent",".validationBox","top50")}):Object(a.m)("请按照提示填写数量","warn")}),$(".validationContent .confirmBtn").click(function(){if($('.validationBody input[name="oldPass"]').val()){Object(a.e)("正在验证，请稍后");var n=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())});Object(a.d)("/user/verifyAlonePwd","post",sessionStorage.token,n,"",".validationContent","top").then(function(n){if(0==f.payType){var e=JSON.stringify({machineId:f.machineId,orderId:f.number,goodId:m.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),pay_id:f.pay_id});Object(a.d)("/pay/refund_alipay","post",sessionStorage.token,e,"mask",".refundCont","top30").then(function(n){Object(a.m)(n.message,"success"),u(r,s),$(".goodsCont").hide()}).catch(function(n){Object(a.m)(n.message,"error")})}else if(1==f.payType){e=JSON.stringify({machineId:f.machineId,orderId:f.number,goodId:m.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),transaction_id:f.transaction_id,total:f.amount,pay_id:f.pay_id});Object(a.d)("/pay/refund_wxpay","post",sessionStorage.token,e,"mask",".refundCont","top30").then(function(n){Object(a.m)(n.message,"success"),u(r,s),$(".goodsCont").hide()}).catch(function(n){Object(a.m)(n.message,"error")})}else if(3==f.payType){e=JSON.stringify({machineId:f.machineId,orderId:f.number,goodId:m.goods_Id,count:Number($(".refundNumber input").val()),transaction_id:f.transaction_id,amount:Number($('.sumInput input[name="sum"]').val()),pay_id:f.pay_id});Object(a.d)("/pay/refund_icbc","post",sessionStorage.token,e,"mask",".refundCont","top30").then(function(n){Object(a.m)(n.message,"success"),u(r,s),$(".goodsCont").hide()}).catch(function(n){Object(a.m)(n.message,"error")})}}).catch(function(n){loadingOut(),Object(a.m)(n.message,"error")})}else Object(a.m)("请输入独立密码！","warn")}),$("#test20").val(Object(a.c)().keyTimeData),jeDate("#test20",{format:"YYYY-MM-DD",range:" - ",isinitVal:!0,donefun:function(n){var e=n.val.split(" - ");c=e[0],i=e[1]},clearfun:function(n,e){c=Object(a.c)().startTime,i=Object(a.c)().endTime,$("#test20").val(Object(a.c)().keyTimeData)}});var v=1;$(".dowImg").click(function(){$(".dowContent").slideToggle();$(".dowContent");1==v?(v=2,$(this).children("img").addClass("active")):(v=1,$(this).children("img").removeClass("active"))}),$(".keyConfirmBtn").click(function(){Object(a.k)(c,i)?Object(a.m)("时间选择范围最多三个月","warn"):u(r,1)})},690:function(n,e){}});