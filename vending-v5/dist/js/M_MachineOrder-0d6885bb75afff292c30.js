/*! 版权所有，翻版必究 */!function(n){function t(t){for(var a,c,s=t[0],r=t[1],l=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var n,t=0;t<i.length;t++){for(var e=i[t],a=!0,s=1;s<e.length;s++){var r=e[s];0!==o[r]&&(a=!1)}a&&(i.splice(t--,1),n=c(c.s=e[0]))}return n}var a={},o={1:0},i=[];function c(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=n,c.c=a,c.d=function(n,t,e){c.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,t){if(1&t&&(n=c(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var a in n)c.d(e,a,function(t){return n[t]}.bind(null,a));return e},c.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(t,"a",t),t},c.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=r;i.push([612,0]),e()}({612:function(n,t,e){"use strict";e.r(t);var a=e(0);e(691);hui("#select1").selectBeautify(),hui("#select2").selectBeautify(),hui("#select3").selectBeautify();var o=Object(a.c)().startTime,i=Object(a.c)().endTime,c=1;$("#back").click(function(){window.location.href="M_managementCenter.html"});var s=sessionStorage.machineID,r=[];function l(n,t){var e=JSON.stringify({conditionFive:n,pageNum:t,pageSize:100,condition:o,conditionTwo:i,conditionSeven:0,conditionThree:$("#search").val(),conditionSix:hui("#select1").val(),refund:hui("#select2").val(),shipStatus:hui("#select3").val()});Object(a.d)("/order/getOrderList","post",sessionStorage.token,e).then(function(n){if(1==t){if(0==n.data.list.length)return $(".pages3").hide(),void $(".orderList").html("<h2>暂无数据</h2>");!function(n,t){var e=Number(n)/100;e=e%1==0?e:e+1;for(var a=Math.floor(e),o="",i=0;i<a;i++)o+=' <div class="pageVal '.concat(0==i?"hui-pager-active":"",'"  val="').concat(i+1,'"><a href="javascript:hui.toast(\'第').concat(i+1,"页');\" >").concat(i+1,"</a></div>");$("".concat(t," .hui-pager")).html(o)}(n.data.total,".pages3"),$(".pages3").show()}else $(".pages3").show();var e="";r=n.data.list,n.data.list.forEach(function(n,t){var o="";n.ship_info.forEach(function(n){o+="<p>\n                        ".concat(n.goods_Name,"(").concat(n.way,"货道").concat(0==n.ship_status?"出货失败":1==n.ship_status?"出货成功":"货道故障",")\n                          </p>")}),e+=' <li dataIndex="'.concat(t,'" class="orderIn">\n                        <div class="flex">\n                            <label for="">售货机名(编号):</label>\n                            <p>').concat(n.info,"(").concat(n.machineNumber,')</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单编号:</label>\n                            <p>').concat(n.number,'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">订单金额:</label>\n                            <p>').concat(Object(a.f)(n.amount),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付状态:</label>\n                            <p>').concat(1==n.payStatus?"等待支付":2==n.payStatus?"已支付":"未支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">下单时间:</label>\n                            <p> ').concat(Object(a.m)(n.time),'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">支付类型:</label>\n                            <p>').concat(1==n.payType?"微信":0==n.payType?"支付宝":"工行支付",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">退款状态:</label>\n                            <p>').concat(1==n.refund?"未退款":2==n.refund?"部分退款":3==n.refund?"全部退款":"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货状态:</label>\n                            <p>').concat(0==n.shipStatus?"未出货":1==n.shipStatus?"部分出货失败":2==n.shipStatus?"全部出货成功":"出货中",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">出货详情:</label>\n                            <div>').concat(o,'</div>\n                        </div>\n                        <div class="flex">\n                            <label for="">销售经理:</label>\n                            <p>').concat(n.sales_no?n.sales_no:"-",'</p>\n                        </div>\n                        <div class="flex">\n                            <label for="">收款方:</label>\n                            <p>').concat(n.payee,"</p>\n                        </div>\n                    </li>")}),$(".orderList").html(e)}).catch(function(n){Object(a.n)(n.message,"error")})}l(s,c),$(".pages3").on("click",".pageVal",function(){$(this).addClass("hui-pager-active").siblings().removeClass("hui-pager-active"),c=Number($(this).attr("val")),l(s,Number($(this).attr("val")))});var u=Object(a.o)(sessionStorage.machineID);$(".hui-icons-menu-point").click(function(){0!=u.length?Object(a.k)(".merchantsContent",".merchantsBox","top0"):Object(a.n)("您没有查看下级商户的权限","warn")}),$(".merchantsBox").click(function(){event.stopPropagation()}),$(".merchantsContent").click(function(){Object(a.b)(this,"top0")});var d='<ul class="sire">';!function n(t){$.each(t,function(t,a){a.children&&a.children.length?(d+='<li class="parent "> <img indexFlag="1" class="nextImg" src="'.concat(e(250),'" alt=""> <span class="').concat(0==t?"navFocus":"",'" mId="').concat(a.id,'">').concat(a.title,'</span> <ul class="parentOne">'),n(a.children),d+="</ul>"):d+='<li> <img src="'.concat(e(251),'" alt=""> <span mId="').concat(a.id,'">').concat(a.title,"</span>"),d+="</li>"})}(u),d+="</ul>",$(".merchantsBox").html(d),$(".merchantsBox").on("click",".parent span",function(){$(".merchantsBox .parent span").removeClass("navFocus"),$(this).addClass("navFocus"),l(s=Number($(this).attr("mId")),1),c=1}),$(".merchantsBox").on("click",".nextImg",function(){1==$(this).attr("indexFlag")?($(this).attr("indexFlag",2),$(this).addClass("navImg")):($(this).attr("indexFlag",1),$(this).removeClass("navImg")),$(this).siblings(".parentOne").slideToggle()});var p=null;$(".orderList").on("click",".orderIn",function(){var n,t;p=r[$(this).attr("dataIndex")],console.log(p),n=p.goodsList,t="",n.forEach(function(n,e){t+='\n                    <li class="list flex" goodsIndex="'.concat(e,'">\n                        <div class="img">\n                            <img\n                                src="').concat(n.goods_images,'" />\n                        </div>\n                        <div class="goodsInform">\n                            <h5>').concat(n.goods_Name,'</h5>\n                            <div class="flexThree of">\n                                <p>￥').concat(Object(a.f)(n.price),"</p>\n                                <p>x").concat(n.count,'</p>\n                            </div>\n                            <p style="margin:5px 0;">已退款数量：').concat(n.refund_count,"</p>\n                        </div>\n                    </li>")}),$(".goodsListCont").html(t),$(".goodsCont").show()}),$(".goodsCont .goodsHeader img").click(function(){$(".goodsCont").hide()});var f=null;$(".goodsListCont").on("click",".list",function(){f=p.goodsList[$(this).attr("goodsIndex")],2==p.payStatus&&f.count!=f.refund_count&&($(".twoPoles span").html(f.count-f.refund_count),$(".refundNumber input").val(1),$('.sumInput input[name="sum"]').val(f.price),Object(a.k)(".refundCont",".changeBox","top30"))}),$(".close").click(function(){Object(a.a)(this,"top30"),event.stopPropagation()}),$(".maskBox ").click(function(){event.stopPropagation()}),$(".refundCont ").click(function(){Object(a.b)(this,"top30")});var m=1;$(".refundNumber input").keyup(function(){var n=$(this).val();/^\d*$/.test(n)?(m=$(this).val(),$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))):(Object(a.n)("只能输入正整数","warn"),$(this).val(m),$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))),$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))}),$(".refundNumber input").change(function(){$('.sumInput input[name="sum"]').val(Number($(this).val()*f.price))}),$(".refundCont .confirmBtn").click(function(){$(".refundNumber input").val()>0&&$(".refundNumber input").val()<=f.count-f.refund_count?hui.confirm("确定退款？",["取消","确定"],function(){Object(a.k)(".validationContent",".validationBox","top50")}):Object(a.n)("请按照提示填写数量","warn")}),$(".validationContent .confirmBtn").click(function(){if($('.validationBody input[name="oldPass"]').val()){Object(a.e)("正在验证，请稍后");var n=JSON.stringify({alonePwd:hex_md5($('.validationBody input[name="oldPass"]').val())});Object(a.d)("/user/verifyAlonePwd","post",sessionStorage.token,n,"",".validationContent","top").then(function(n){if(0==p.payType){var t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),pay_id:p.pay_id});Object(a.d)("/pay/refund_alipay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(a.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(a.n)(n.message,"error")})}else if(1==p.payType){t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),amount:Number($('.sumInput input[name="sum"]').val()),transaction_id:p.transaction_id,total:p.amount,pay_id:p.pay_id});Object(a.d)("/pay/refund_wxpay","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(a.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(a.n)(n.message,"error")})}else if(3==p.payType){t=JSON.stringify({machineId:p.machineId,orderId:p.number,goodId:f.goods_Id,count:Number($(".refundNumber input").val()),transaction_id:p.transaction_id,amount:Number($('.sumInput input[name="sum"]').val()),pay_id:p.pay_id});Object(a.d)("/pay/refund_icbc","post",sessionStorage.token,t,"mask",".refundCont","top30").then(function(n){Object(a.n)(n.message,"success"),l(s,c),$(".goodsCont").hide()}).catch(function(n){Object(a.n)(n.message,"error")})}}).catch(function(n){loadingOut(),Object(a.n)(n.message,"error")})}else Object(a.n)("请输入独立密码！","warn")}),$("#test20").val(Object(a.c)().keyTimeData),jeDate("#test20",{format:"YYYY-MM-DD",range:" - ",isinitVal:!0,donefun:function(n){var t=n.val.split(" - ");o=t[0],i=t[1]},clearfun:function(n,t){o=Object(a.c)().startTime,i=Object(a.c)().endTime,$("#test20").val(Object(a.c)().keyTimeData)}});var v=1;$(".dowImg").click(function(){$(".dowContent").slideToggle();$(".dowContent");1==v?(v=2,$(this).children("img").addClass("active")):(v=1,$(this).children("img").removeClass("active"))}),$(".keyConfirmBtn").click(function(){Object(a.l)(o,i)?Object(a.n)("时间选择范围最多三个月","warn"):l(s,1)})},691:function(n,t){}});