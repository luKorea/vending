/*! 版权所有，翻版必究 */!function(r){function e(e){for(var t,i,n=e[0],a=e[1],o=e[2],c=0,l=[];c<n.length;c++)i=n[c],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&l.push(s[i][0]),s[i]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t]);for(p&&p(e);l.length;)l.shift()();return m.push.apply(m,o||[]),d()}function d(){for(var e,t=0;t<m.length;t++){for(var i=m[t],n=!0,a=1;a<i.length;a++){var o=i[a];0!==s[o]&&(n=!1)}n&&(m.splice(t--,1),e=c(c.s=i[0]))}return e}var i={},s={5:0},m=[];function c(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=r,c.c=i,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var t=(n=window.webpackJsonp=window.webpackJsonp||[]).push.bind(n);n.push=e;for(var n=n.slice(),a=0;a<n.length;a++)e(n[a]);var p=t;m.push([337,0]),d()}({337:function(e,t,i){"use strict";i.r(t);var t=i(351),v=i(1);layui.use(["table","form","layer","tree","util"],function(){sessionStorage.token||(window.parent.location.href="login.html");var e=JSON.parse(sessionStorage.roleData),t=permissionsVal1(permissionData,e);(t[8]?removeClass:addClass)(".addBtn"),(t[9]?removeClass:addClass)(".ListOperation .edit"),t[10]?removeClass(".list-table"):(addClass(".list-table"),removeClass(".role-text")),(t[11]?removeClass:addClass)(".ListOperation .topUpBtn"),(t[12]?removeClass:addClass)(".ListOperation .reductionsBtn"),(t[13]?removeClass:addClass)(".ListOperation .del"),(t[14]?removeClass:addClass)(".pushBtn"),(t[15]?removeClass:addClass)(".importBtn"),(t[16]?removeClass:addClass)(".ListOperation .use"),(t[17]?removeClass:addClass)(".ListOperation .top"),(t[27]?removeClass:addClass)(".importQuality");var a=layui.jquery,i=layui.table,o=layui.layer,n=layui.form,c=sessionStorage.token,l=i.render({elem:"#tableTest",url:"".concat(Vapi,"/company/getCompany"),method:"post",contentType:"application/json",headers:{token:c},height:"600",cols:[[{field:"bicId",fixed:"left",title:"商家ID",align:"center",templet:"#imgtmp",width:180},{field:"companyName",fixed:"left",width:250,title:"商家名称",align:"center"},{field:"startUsingStr",width:110,title:"是否启用",align:"center"},{field:"balance",width:160,title:"余额",align:"center",templet:function(e){return Object(v.i)(e.balance)}},{field:"freezeMoney",width:150,title:"冻结金额",align:"center",templet:function(e){return Object(v.i)(e.freezeMoney)}},{field:"usableBalance",width:150,title:"可用余额",align:"center",templet:function(e){return Object(v.i)(e.usableBalance)}},{field:"moneyRemind",width:150,title:"余额预警值",align:"center",templet:function(e){return Object(v.i)(e.moneyRemind)}},{field:"initialAmount",width:150,title:"初始化余额",align:"center",templet:function(e){return Object(v.i)(e.initialAmount||0)}},{field:"remark",title:"备注",align:"center"},{field:"operation",width:150,title:"操作",toolbar:"#barDemo",align:"center"}]],id:"tableId",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{},parseData:function(e){return 200===e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){for(var t in 403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),e.data)2==e.data[t].flag&&a(".data_list1 tr[data-index="+t+"]").addClass("warning");Object(v.c)()}});a(".playHeader .close").click(function(){a(this).parent().parent().addClass("margin0"),a(this).parents(".maskContnet").fadeOut()}),a(".queryBtnClick").click(function(){l.reload({where:{companyName:a('.addMember input[name="keyMerchants"]').val(),bicId:a('.addMember input[name="keyBIC"]').val()}})});var r=null,d=null;i.on("tool(tableTest)",function(e){if(event.stopPropagation(),r=e.data,console.log(r,"companyData"),"operation"===e.event){if(d==e.data.companyId)return a(".ListOperation").fadeOut(),void(d=null);d=e.data.companyId,a(".ListOperation").fadeIn(),a(".ListOperation").css({left:a(this).offset().left-35+"px",top:a(this).offset().top+35+"px"})}}),a(".addBtn").click(function(){Object(v.k)(".addMerchantsCont",".addMBox")}),a(".addMBox .cancel1").click(function(){Object(v.j)(".addMerchantsCont",".addMBox")}),a(".addMBox .determine1").click(function(){var e;a('.addMBody input[name="companyName"]').val()&&a('.addMBody input[name="bicId"]').val()&&a('.addMBody input[name="moneyRemind"]').val()?(Object(v.b)(),e=JSON.stringify({companyName:a('.addMBody input[name="companyName"]').val(),bicId:a('.addMBody input[name="bicId"]').val(),moneyRemind:Object(v.h)(Number(a('.addMBody input[name="moneyRemind"]').val()),100),startUsing:a('.addMBox input[name="open"]').prop("checked")?2:1,remark:a('.addMBody input[name="remark"]').val(),balance:Object(v.h)(Number(a('.addMBody input[name="balance"]').val()),100)}),Object(v.g)("/company/addCompany","post",sessionStorage.token,e,o,"mask",".addMerchantsCont",".addMBox").then(function(e){o.msg(e.message,{icon:1}),l.reload({where:{}}),a('.addMBody input[name="companyName"]').val(""),a('.addMBody input[name="bicId"]').val(""),a('.addMBody input[name="moneyRemind"]').val(""),a('.addMBody input[name="balance"]').val(""),a('.addMBody input[name="remark"]').val("")}).catch(function(e){o.msg(e.message,{icon:2})})):o.msg("带*为必填",{icon:"7"})}),a(".ListOperation .topUpBtn").click(function(){a('.topUPBox input[name="bicId"]').val(r.bicId),a('.topUPBox input[name="companyName"]').val(r.companyName),a('.topUPBox input[name="balance"]').val(r.balance),Object(v.k)(".topUPContent",".topUPBox")}),a(".topUPBox .determine1").click(function(){a('.topUPBox input[name="topUpNum"]').val()?0<a('.topUPBox input[name="topUpNum"]').val()?o.confirm("确定充值?",function(e){o.close(e),Object(v.b)();e=JSON.stringify({balance:Object(v.h)(Number(a('.topUPBox input[name="topUpNum"]').val()),100),companyId:r.companyId,remark:a('.topUPBox input[name="remark"]').val()});Object(v.g)("/company/addBalance","post",sessionStorage.token,e,o,"mask",".topUPContent",".topUPBox").then(function(e){o.msg(e.message,{icon:1}),l.reload({where:{}}),a('.topUPBox input[name="topUpNum"]').val(""),a('.topUPBox input[name="remark"]').val("")}).catch(function(e){o.msg(e.message,{icon:2})})}):o.msg("充值金额必须大于0",{icon:7}):o.msg("带*为必填",{icon:7})}),a(".topUPBox .cancel1").click(function(){Object(v.j)(".topUPContent",".topUPBox")}),a(".ListOperation .reductionsBtn").click(function(){a('.reductionsBox input[name="bicId"]').val(r.bicId),a('.reductionsBox input[name="companyName"]').val(r.companyName),a('.reductionsBox input[name="balance"]').val(r.balance),Object(v.k)(".reductionsCOntent",".reductionsBox")}),a(".reductionsBox .determine1").click(function(){a('.reductionsBox input[name="reductionsNum"]').val()?0<a('.reductionsBox input[name="reductionsNum"]').val()?o.confirm("确定调减?",function(e){o.close(e),Object(v.b)();e=JSON.stringify({balance:Object(v.h)(Number(a('.reductionsBox input[name="reductionsNum"]').val()),100),companyId:r.companyId,remark:a('.reductionsBox input[name="remark"]').val()});Object(v.g)("/company/subBalance","post",sessionStorage.token,e,o,"mask",".reductionsCOntent",".reductionsBox").then(function(e){o.msg(e.message,{icon:1}),l.reload({where:{}}),a('.reductionsBox input[name="reductionsNum"]').val(""),a('.reductionsBox input[name="remark"]').val("")}).catch(function(e){o.msg(e.message,{icon:2})})}):o.msg("调减金额必须大于0",{icon:7}):o.msg("带*为必填",{icon:7})}),a(".reductionsBox .cancel1").click(function(){Object(v.j)(".reductionsCOntent",".reductionsBox")}),a(".ListOperation .edit").click(function(){a('.editBox input[name="companyName"]').val(r.companyName),a('.editBox input[name="bicId"]').val(r.bicId),a('.editBox input[name="moneyRemind"]').val(r.moneyRemind),a('.editBox input[name="open"]').prop("checked",2==r.startUsing),a('.editBox input[name="remark"]').val(r.remark),n.render("checkbox"),Object(v.k)(".editContent",".editBox")}),a(".editBox .determine1").click(function(){var e;a('.editBox input[name="companyName"]').val()&&a('.editBox input[name="bicId"]').val()&&a('.editBox input[name="moneyRemind"]').val()?(Object(v.b)(),e=JSON.stringify({companyName:a('.editBox input[name="companyName"]').val(),bicId:a('.editBox input[name="bicId"]').val(),moneyRemind:Object(v.h)(Number(a('.editBox input[name="moneyRemind"]').val()),100),companyId:r.companyId,startUsing:a('.editBox input[name="open"]').prop("checked")?2:1,remark:a('.editBox input[name="remark"]').val()}),Object(v.g)("/company/updateCompany","post",sessionStorage.token,e,o,"mask",".editContent",".editBox").then(function(e){o.msg(e.message,{icon:1}),l.reload({where:{}})}).catch(function(e){o.msg(e.message,{icon:2})})):o.msg("带*为必填",{icon:"7"})}),a(".editBox .cancel1").click(function(){Object(v.j)(".editContent",".editBox")}),a("body").click(function(){a(".ListOperation").fadeOut(),a(".ListUseOperation").fadeOut(),a(".ListDateOperation").fadeOut(),d=null}),a(".ListOperation .del").click(function(){o.confirm("确定删除?",function(e){o.close(e),Object(v.b)();e={companyId:r.companyId};Object(v.g)("/company/deleteCompanyId","get",sessionStorage.token,e,o,"mask").then(function(e){o.msg(e.message,{icon:1}),l.reload({where:{}})}).catch(function(e){o.msg(e.message,{icon:2})})})}),a(".ListOperation .top").click(function(){Object(v.k)(".TopUpRecordContent",".topUpRecordBox"),s?s.reload({where:{companyId:r.companyId}}):s=i.render({elem:"#TopUpTable",url:"".concat(Vapi,"/logCompany/getTopUpLog"),method:"post",contentType:"application/json",headers:{token:c},height:"600",cols:[[{field:"logTime",width:180,title:"充值/调减时间",align:"center"},{field:"frontBalance",width:160,title:"充值/调减前余额",align:"center",templet:function(e){return Object(v.i)(e.frontBalance)}},{field:"money",width:160,title:"充值/调减金额",align:"center",templet:function(e){return 1==e.flag?"-"+Object(v.i)(e.money):Object(v.i)(e.money)}},{field:"laterBalance",width:160,title:"充值/调减后余额",align:"center",templet:function(e){return Object(v.i)(e.laterBalance)}},{field:"remark",width:160,title:"备注",align:"center"}]],id:"tioUpId",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{companyId:r.companyId},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".topUpRecordBox .playHeader span").html("".concat(r.companyName,"充值/调减记录"))}),a(".ListOperation .use").click(function(){m?m.reload({where:{bicId:r.companyId}}):m=i.render({elem:"#useTable",url:"".concat(Vapi,"/logCompany/orderStatistics"),method:"GET",headers:{token:c},height:"600",cols:[[{field:"statisticsTime",title:"使用月份",align:"center",templet:function(e){return e.statisticsTime?Object(v.m)(e.statisticsTime):"-"}},{field:"expressFee",width:150,title:"快递费用",event:"expressFee",align:"center",templet:function(e){return e.expressFee&&0<e.expressFee?'<span style="color: rgb(190, 149, 74);cursor: pointer;">'.concat(Object(v.i)(e.expressFee),"</span>"):"-"}},{field:"qualityInspectionFee",width:150,title:"质检费用",event:"qualityInspectionFee",align:"center",templet:function(e){return e.qualityInspectionFee&&0<e.qualityInspectionFee?'<span style="color: rgb(190, 149, 74);cursor: pointer;">'.concat(Object(v.i)(e.qualityInspectionFee),"</span>"):"-"}},{field:"monthMoney",width:150,title:"使用金额",align:"center",templet:function(e){return e.monthMoney||0==e.monthMoney?Object(v.i)(e.monthMoney):"-"}},{field:"updateTime",width:180,title:"更新时间",align:"center",templet:function(e){return e.updateTime?Object(v.d)(e.updateTime):"-"}},{field:"operationUse",width:120,title:"详情",toolbar:"#barUser",align:"center"}]],id:"useId",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{bicId:r.companyId},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".useRecordBox .playHeader span").html(r.companyName+"使用记录"),Object(v.k)(".useRecordContent",".useRecordBox")});var s=null;var m=null;var p=null;i.on("tool(useTable)",function(e){event.stopPropagation(),p=e.data,"operation"===e.event&&a(".ListUseOperation .detail").click(),"expressFee"===e.event&&(g?(console.log(Object(v.m)(p.statisticsTime),r.companyName,r.bicId),g.reload({where:{bicId:r.bicId,orderTime:Object(v.m)(p.statisticsTime),type:"1"}})):g=i.render({elem:"#expressTable",url:"".concat(Vapi,"/logCompany/getOrderByDayAndbicId"),method:"post",headers:{token:c},contentType:"application/json",height:"600",cols:[[{field:"orderId",width:180,title:"订单编号",align:"center"},{field:"orderYard",width:180,title:"订单码",align:"center"},{field:"bicId",width:160,title:"商家ID",align:"center"},{field:"companyName",width:160,title:"商家名称",align:"center"},{field:"orderAppointFlag",width:160,title:"订单履约状态",align:"center"},{field:"combinedBillFee",width:160,title:"合单费",align:"center"},{field:"ztBasicFreight",width:160,title:"中通基本运费",align:"center"},{field:"packingCharge",width:160,title:"打包费",align:"center"},{field:"ztFreightReceivable",width:160,title:"中通应收运费",align:"center"},{field:"jdFeedbackFreight",width:160,title:"京东反馈运费",align:"center"},{field:"jdBillingWeight",width:160,title:"京东计费重量",align:"center"},{field:"jdFirstWeightAmount",width:160,title:"京东首重金额",align:"center"},{field:"jdFreightReceivable",width:160,title:"京东应收运费",align:"center"},{field:"sfFeedbackFreight",width:160,title:"顺丰反馈的运费",align:"center"},{field:"sfBillingWeight",width:160,title:"顺丰计费重量",align:"center"},{field:"sfPartsType",width:160,title:"顺丰件类型",align:"center"},{field:"sfFirstWeightAmount",width:160,title:"顺丰首重金额",align:"center"},{field:"sfFreightReceivable",width:160,title:"顺丰应收运费",align:"center"},{field:"total",width:160,title:"合计",align:"center"},{field:"totalAfterDiscount",width:160,title:"优惠后合计",align:"center"},{field:"mergeBatch",width:160,title:"合并批次号",align:"center"},{field:"storageNumber",width:160,title:"入库件数",align:"center"},{field:"testingInstitutes",width:160,title:"质检机构",align:"center"},{field:"qualityResult",width:160,title:"质检结果",align:"center"},{field:"recheckResult",width:160,title:"复检结果",align:"center"},{field:"planExpress",width:160,title:"计划发货快递",align:"center"},{field:"realityExpress",width:160,title:"实际发货快递",align:"center"},{field:"expressNumber",width:160,title:"快递单号",align:"center"},{field:"placeReceipt",width:160,title:"收货省份",align:"center"},{field:"orderTime",width:180,title:"下单时间",align:"center"},{field:"storageTime",width:180,title:"入库时间",align:"center"},{field:"inspectTime",width:180,title:"送检时间",align:"center"},{field:"accomplishTime",width:180,title:"质检完成时间",align:"center"},{field:"deliveryTime",width:180,title:"出库时间",align:"center"}]],id:"orderId",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{bicId:r.bicId,orderTime:Object(v.m)(p.statisticsTime),type:"1"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".expressRecordBox .playHeader span").html("".concat(r.companyName,"(").concat(Object(v.m)(p.statisticsTime),") 快递费用")),Object(v.k)(".expressRecordContent",".expressRecordBox")),"qualityInspectionFee"===e.event&&(u?(console.log(Object(v.m)(p.statisticsTime),r.companyName,r.bicId),u.reload({where:{date:Object(v.m)(p.statisticsTime),bicName:r.companyName,type:"1"}})):u=i.render({elem:"#qualityTable",url:"".concat(Vapi,"/logCompany/getQualityTestingByDayAndbicName"),method:"post",headers:{token:c},contentType:"application/json",height:"600",cols:[[{field:"date",width:180,title:"质检日期",align:"center"},{field:"bicName",width:180,title:"商家名称",align:"center"},{field:"certificateType",width:180,title:"证书类型",align:"center"},{field:"unitPriceReceivable",width:180,title:"应收单价",align:"center"},{field:"number",width:180,title:"数量（件）",align:"center"},{field:"totalReceivables",width:180,title:"应收合计",align:"center"},{field:"preferentialAmount",width:180,title:"优惠金额",align:"center"},{field:"amountActuallyReceived",width:180,title:"实收金额",align:"center"},{field:"affiliatedInstitutions",width:180,title:"所属机构",align:"center"}]],id:"id",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{date:Object(v.m)(p.statisticsTime),bicName:r.companyName,type:"1"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".qualityRecordBox .playHeader span").html("".concat(r.companyName,"(").concat(Object(v.m)(p.statisticsTime),")质检费用")),Object(v.k)(".qualityRecordContent",".qualityRecordBox"))}),a(".ListUseOperation .detail").click(function(){f?(console.log(Object(v.m)(p.statisticsTime),r.companyName,r.bicId),f.reload({where:{bicId:r.bicId,time:Object(v.m)(p.statisticsTime)}})):f=i.render({elem:"#dayTable",url:"".concat(Vapi,"/company/findDayOrder"),method:"GET",headers:{token:c},height:"600",cols:[[{field:"day",title:"使用时间",align:"center"},{field:"expressFee",width:150,title:"快递费用",event:"expressFee",align:"center",templet:function(e){return e.expressFee&&0<e.expressFee?'<span style="color: rgb(190, 149, 74);cursor: pointer;">'.concat(Object(v.i)(e.expressFee),"</span>"):"-"}},{field:"qualityInspectionFee",width:150,title:"质检费用",event:"qualityInspectionFee",align:"center",templet:function(e){return e.qualityInspectionFee&&0<e.qualityInspectionFee?'<span style="color: rgb(190, 149, 74);cursor: pointer;">'.concat(Object(v.i)(e.qualityInspectionFee),"</span>"):"-"}},{field:"money",width:150,title:"使用金额",align:"center",templet:function(e){return Object(v.i)(e.money)}}]],id:"dayId",loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},initSort:{field:"day",type:"desc"},where:{bicId:r.bicId,time:Object(v.m)(p.statisticsTime)},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.length,data:e.data}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".dayRecordBox .playHeader span").html("".concat(r.companyName,"(").concat(Object(v.m)(p.statisticsTime),")使用记录")),Object(v.k)(".dayRecordContent",".dayRecordBox")});var u=null;var g=null;var f=null;var h=null;i.on("tool(dayTable)",function(e){event.stopPropagation(),console.log("obj.event",e.event),h=e.data,"operation"===e.event&&(a(".ListDateOperation").fadeIn(),a(".ListDateOperation").css({left:a(this).offset().left-35+"px",top:a(this).offset().top+35+"px"})),"expressFee"===e.event&&a(".ListDateOperation .express").click(),"qualityInspectionFee"===e.event&&a(".ListDateOperation .quality").click()}),a(".ListDateOperation .detail").click(function(){});var y=null;a(".ListDateOperation .quality").click(function(){y?y.reload({where:{date:h.day,bicName:r.companyName,type:"2"}}):y=i.render({elem:"#dayqualityTable",url:"".concat(Vapi,"/logCompany/getQualityTestingByDayAndbicName"),method:"post",headers:{token:c},contentType:"application/json",height:"600",cols:[[{field:"date",width:180,title:"质检日期",align:"center"},{field:"bicName",width:180,title:"商家名称",align:"center"},{field:"certificateType",width:180,title:"证书类型",align:"center"},{field:"unitPriceReceivable",width:180,title:"应收单价",align:"center"},{field:"number",width:180,title:"数量（件）",align:"center"},{field:"totalReceivables",width:180,title:"应收合计",align:"center"},{field:"preferentialAmount",width:180,title:"优惠金额",align:"center"},{field:"amountActuallyReceived",width:180,title:"实收金额",align:"center"},{field:"affiliatedInstitutions",width:180,title:"所属机构",align:"center"}]],id:"id",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{date:h.day,bicName:r.companyName,type:"2"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),console.log(h,"dateData"),a(".dayqualityRecordBox .playHeader span").html("".concat(r.companyName,"(").concat(h.day,") 的质检费用")),Object(v.k)(".dayqualityRecordContent",".dayqualityRecordBox")});var b=null;a(".ListDateOperation .express").click(function(){b?b.reload({where:{bicId:r.bicId,orderTime:h.day,type:"2"}}):b=i.render({elem:"#dayexpressTable",url:"".concat(Vapi,"/logCompany/getOrderByDayAndbicId"),method:"post",headers:{token:c},contentType:"application/json",height:"600",cols:[[{field:"orderId",width:180,title:"订单编号",align:"center"},{field:"orderYard",width:180,title:"订单码",align:"center"},{field:"bicId",width:160,title:"商家ID",align:"center"},{field:"companyName",width:160,title:"商家名称",align:"center"},{field:"orderAppointFlag",width:160,title:"订单履约状态",align:"center"},{field:"combinedBillFee",width:160,title:"合单费",align:"center"},{field:"ztBasicFreight",width:160,title:"中通基本运费",align:"center"},{field:"packingCharge",width:160,title:"打包费",align:"center"},{field:"ztFreightReceivable",width:160,title:"中通应收运费",align:"center"},{field:"jdFeedbackFreight",width:160,title:"京东反馈运费",align:"center"},{field:"jdBillingWeight",width:160,title:"京东计费重量",align:"center"},{field:"jdFirstWeightAmount",width:160,title:"京东首重金额",align:"center"},{field:"jdFreightReceivable",width:160,title:"京东应收运费",align:"center"},{field:"sfFeedbackFreight",width:160,title:"顺丰反馈的运费",align:"center"},{field:"sfBillingWeight",width:160,title:"顺丰计费重量",align:"center"},{field:"sfPartsType",width:160,title:"顺丰件类型",align:"center"},{field:"sfFirstWeightAmount",width:160,title:"顺丰首重金额",align:"center"},{field:"sfFreightReceivable",width:160,title:"顺丰应收运费",align:"center"},{field:"total",width:160,title:"合计",align:"center"},{field:"totalAfterDiscount",width:160,title:"优惠后合计",align:"center"},{field:"mergeBatch",width:160,title:"合并批次号",align:"center"},{field:"storageNumber",width:160,title:"入库件数",align:"center"},{field:"testingInstitutes",width:160,title:"质检机构",align:"center"},{field:"qualityResult",width:160,title:"质检结果",align:"center"},{field:"recheckResult",width:160,title:"复检结果",align:"center"},{field:"planExpress",width:160,title:"计划发货快递",align:"center"},{field:"realityExpress",width:160,title:"实际发货快递",align:"center"},{field:"expressNumber",width:160,title:"快递单号",align:"center"},{field:"placeReceipt",width:160,title:"收货省份",align:"center"},{field:"orderTime",width:180,title:"下单时间",align:"center"},{field:"storageTime",width:180,title:"入库时间",align:"center"},{field:"inspectTime",width:180,title:"送检时间",align:"center"},{field:"accomplishTime",width:180,title:"质检完成时间",align:"center"},{field:"deliveryTime",width:180,title:"出库时间",align:"center"}]],id:"orderId",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{bicId:r.bicId,orderTime:h.day,type:"2"},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),console.log(h,"dateData"),a(".dayexpressRecordBox .playHeader span").html("".concat(r.companyName,"(").concat(h.day,") 的快递费用")),Object(v.k)(".dayexpressRecordContent",".dayexpressRecordBox")});a(".pushBtn").click(function(){Object(v.b)();var n=new XMLHttpRequest,e=a("input[name='keyMerchants']").val(),t=a("input[name='keyBIC']").val();n.open("GET","".concat(Vapi,"/company/deriveExcel?bicId=").concat(t,"&companyName=").concat(e),!0),n.setRequestHeader("token",sessionStorage.token),n.responseType="blob",n.onload=function(e){var t,i;200==n.status?(Object(v.a)(),n.response.size<50?o.msg("导出失败",{icon:7}):(i=n.response,(t=document.createElement("a")).download="商家信息汇总.xlsx",t.style.display="none",i=new Blob([i]),t.href=URL.createObjectURL(i),document.body.appendChild(t),t.click(),document.body.removeChild(t))):(Object(v.a)(),o.msg("服务器请求超时",{icon:2}))},n.send()}),a(".importBtn").click(function(){Object(v.k)(".pushOrderContent",".pushOrderBox")}),a("#pushMerchants").change(function(e){var i,t;a(this).val()&&(i=this,(t=new FormData).append("file",e.target.files[0]),Object(v.b)(),a.ajax({type:"post",url:"".concat(Vapi,"/company/excelCompany"),processData:!1,contentType:!1,timeout:6e4,headers:{token:sessionStorage.token},data:t,success:function(e){var t;Object(v.a)(),a(i).val(""),200==e.code?(o.msg(e.message,{icon:1}),Object(v.j)(".pushOrderContent",".pushOrderBox"),l.reload({where:{}})):403==e.code?(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)):0<e.data.length?(Object(v.j)(".pushOrderContent",".pushOrderBox"),Object(v.k)(".catchContent",".messageBox"),e=e.data,t="",e.forEach(function(e){t+="<p>".concat(e,"</p>")}),a(".messageBox .message .import_fail").html(t)):a(".messageBox .message .import_fail").html("导入失败")},error:function(e){a(i).val(""),Object(v.a)(),a(".maskSpan").removeClass("maskIcon"),o.msg("服务器请求超时",{icon:2})}}))}),a(".importQuality").click(function(){console.log("导入质检费模块"),Object(v.k)(".pushQualityContent",".pushQualityBox")}),a("#pushQualityMerchants").change(function(e){var i,t;a(this).val()&&(i=this,(t=new FormData).append("file",e.target.files[0]),Object(v.b)(),console.log("导入质检费模块2"),a.ajax({type:"post",url:"".concat(Vapi,"/quelityTesting/excelOrder"),processData:!1,contentType:!1,timeout:6e4,headers:{token:sessionStorage.token},data:t,success:function(e){var t;Object(v.a)(),a(i).val(""),200==e.code?(o.msg(e.message,{icon:1}),Object(v.j)(".pushQualityContent",".pushQualityBox"),l.reload({where:{}})):403==e.code?(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)):(console.log(1),0<e.data.length?(Object(v.j)(".pushQualityContent",".pushQualityBox"),Object(v.k)(".catchQualityContent",".messageQualityBox"),e=e.data,t="",e.forEach(function(e){t+="<p>".concat(e,"</p>")}),a(".messageQualityBox .message .import_fail").html(t)):a(".messageQualityBox .message .import_fail").html("导入失败"))},error:function(e){a(i).val(""),Object(v.a)(),a(".maskSpan").removeClass("maskIcon"),o.msg("服务器请求超时",{icon:2})}}))}),a(".recordBtnShow").click(function(){w?w.reload({where:{type:2}}):w=i.render({elem:"#recordTable",url:"".concat(Vapi,"/excelTask/getExcelTaskList"),method:"GET",headers:{token:c},height:"600",cols:[[{field:"id",width:100,title:"ID",align:"center"},{field:"userName",title:"操作用户",align:"center",templet:function(e){return"".concat(e.name,"(").concat(e.userName,")")}},{field:"createTime",title:"导入开始时间",align:"center"},{field:"updateTime",title:"导入结束时间",align:"center"},{field:"status",width:150,title:"状态",align:"center",templet:function(e){return 0===e.status?"未完成":1===e.status?"已完成":2===e.status?"已失败":"部分数据导入失败"}},{field:"message",title:"消息",align:"center",templet:function(e){return e.excelTaskErrList.map(function(e){return e.message}).join("<br>")}}]],id:"id",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{type:2},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".recordOrderBox .playHeader span").html("导入质检费信息"),Object(v.k)(".recordOrderContent",".recordOrderBox")}),a(".queryBtnClickrecordIns").click(function(){w.reload({where:{type:2}})});var w=null;a(".record2BtnShow").click(function(){O?O.reload({where:{type:3}}):O=i.render({elem:"#record2Table",url:"".concat(Vapi,"/excelTask/getExcelTaskList"),method:"GET",headers:{token:c},height:"600",cols:[[{field:"id",width:100,title:"ID",align:"center"},{field:"userName",title:"操作用户",align:"center",templet:function(e){return"".concat(e.name,"(").concat(e.userName,")")}},{field:"createTime",title:"导入开始时间",align:"center"},{field:"updateTime",title:"导入结束时间",align:"center"},{field:"status",width:150,title:"状态",align:"center",templet:function(e){return 0===e.status?"未完成":1===e.status?"已完成":2===e.status?"已失败":"部分数据导入失败"}},{field:"message",title:"消息",align:"center",templet:function(e){return e.excelTaskErrList.map(function(e){return e.message}).join("<br>")}}]],id:"id",page:!0,loading:!0,even:!0,request:{pageName:"pageNum",limitName:"pageSize"},where:{type:3},parseData:function(e){return 200==e.code?{code:e.code,msg:e.message,count:e.data.total,data:e.data.list}:{code:e.code,msg:e.message}},response:{statusCode:200},done:function(e){403==e.code&&(o.msg("登录过期,请重新登录",{icon:2}),setTimeout(function(e){window.parent.location.href="login.html"},1500)),Object(v.c)()}}),a(".record2OrderBox .playHeader span").html("导入商家信息"),Object(v.k)(".record2OrderContent",".record2OrderBox")}),a(".queryBtnClickrecord2Ins").click(function(){O.reload({where:{type:3}})});var O=null})},351:function(e,t){}});