(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab8da"],{1687:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("avue-crud",e._g(e._b({attrs:{search:e.search,page:e.page},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"controlListForm",fn:function(t){return[o("controlTree",{key:t,attrs:{defaultExpandedKeys:e.form.controlList,data:e.controlList},on:{checked:e.checked}})]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},r=[],a=o("1c5e"),c=o("f374"),i=(o("b4fb"),o("2eeb"),o("08ba"),o("dbb3"),o("d718")),d=o("5880"),l=o("337a"),s=o("82ff"),f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","node-key":"controlId","default-expanded-keys":e.defaultExpandedKeys,"default-checked-keys":e.defaultExpandedKeys,props:e.defaultProps},on:{check:e.check}})],1)},u=[],h={props:{data:{},defaultExpandedKeys:{type:Array,default:[]}},watch:{},data:function(){return{defaultProps:{children:"controlList",label:"controlName"}}},created:function(){},methods:{check:function(){var e=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys());this.$emit("checked",e),console.log("check",e)}}},p=h,m=o("5d22"),b=Object(m["a"])(p,f,u,!1,null,null,null),k=b.exports,L={components:{controlTree:k},computed:Object(c["a"])({},Object(d["mapGetters"])(["name"])),mixins:[i["a"],s["a"]],data:function(){return{controlList:[],controlListChecked:[],isIndeterminate:!1,defaultProps:{children:"controlList",label:"controlName"},search:{conditionTwo:""},config:{detail:"/role/findByRId",save:"/role/addRole",delete:"/role/deRoleByUId",update:"/role/updateRole",list:"/role/findAll"},method:{detail:"GET",delete:"GET",list:"GET"},rowKey:"id",option:{addBtn:!0,viewBtn:!1,column:[].concat(Object(a["a"])(this.column_def("角色名","roleName",!0,{search:!0,searchSpan:6,fixed:"left",minWidth:180})),Object(a["a"])(this.column_textarea("备注","remark",!1,{minWidth:180})),[{label:"用户角色",prop:"controlList",minWidth:180,span:24,hide:!0,formslot:!0},{label:"创建人",prop:"addUser",display:!1,formatter:function(e,t,o,n){return e.addUser?e.addUser.username:""}},{label:"创建时间",prop:"addTime",display:!1,minWidth:180},{label:"最后更改人",prop:"updateUser",display:!1,formatter:function(e,t,o,n){return e.updateUser?e.updateUser.username:""}},{label:"最后更改时间",prop:"updateTime",display:!1,minWidth:180}])}}},methods:{updateBefore:function(){return this.form.controlList=this.controlListChecked,1},addBefore:function(){return this.form.controlList=this.controlListChecked,1},checked:function(e){this.controlListChecked=e},delBefore:function(e){var t=e;return t={roleId:e.roleId},t},openBefore:function(e){var t=this;"edit"==e&&(t.form.id=t.form.roleId),t.form=Object.assign(t.form,t.form)},openAfter:function(e,t,o,n){var r=this;t.controlList=e.data.map((function(e){return e.controlId}));var a={},c=function(){var e=function e(t){return t.forEach((function(t){t.controlList&&t.controlList.length>0?t.controlList=e(t.controlList||[]):a[t.controlId]=!0})),t};e(r.controlList)};c(),t.controlList=t.controlList.filter((function(e){return a[e]})),r.form=Object.assign(t,{})},listAfter:function(e){this.data.forEach((function(e){e.controlList=[]}))},findControl:function(){var e=this;Object(l["a"])("/role/findControl",{},"GET").then((function(t){e.controlList=t.data})).catch((function(e){console.log(e)}))}},created:function(){this.findControl()}},y=L,v=Object(m["a"])(y,n,r,!1,null,null,null);t["default"]=v.exports}}]);