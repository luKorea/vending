(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0afa1c"],{"0ec4":function(e,o,a){"use strict";a.r(o);var t=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"app-container"},[a("avue-crud",e._g(e._b({attrs:{page:e.page},on:{"update:page":function(o){e.page=o}},scopedSlots:e._u([{key:"bicId",fn:function(o){return a("div",{staticClass:"row-c"},[1!=o.row.flag?a("el-tooltip",{attrs:{content:"您的可用余额低于预警值，请及时充值",placement:"top"}},[a("svg-icon",{staticStyle:{"font-size":"25px","margin-right":"10px"},attrs:{"icon-class":"warning"}})],1):e._e(),a("span",[e._v(e._s(o.row.bicId))])],1)}},{key:"menuBtn",fn:function(o){return[e.hasPermission("/company/addBalance")?a("el-dropdown-item",{nativeOn:{click:function(a){return e.$refs.crud.rowEdit(Object.assign({},o.row,{editType:"Recharge",editTitle:"充值"}),o.index)}}},[e._v("充值")]):e._e(),e.hasPermission("/company/subBalance")?a("el-dropdown-item",{nativeOn:{click:function(a){return e.$refs.crud.rowEdit(Object.assign({},o.row,{editType:"Reduce",editTitle:"调减"}),o.index)}}},[e._v("调减")]):e._e(),e.hasPermission("/logCompany/getTopUpLog")?a("el-dropdown-item",{nativeOn:{click:function(a){return e.rowView(Object.assign({},o.row,{formslot:"reduceBalance",viewTitle:"商家["+o.row.companyName+"]的充值/调减记录"}),o.index)}}},[e._v(" 充值/调减记录")]):e._e(),e.hasPermission("/logCompany/orderStatistics")?a("el-dropdown-item",{nativeOn:{click:function(a){return e.rowView(Object.assign({},o.row,{formslot:"usageRecord",viewTitle:"商家["+o.row.companyName+"]的使用记录"}),o.index)}}},[e._v(" 使用记录")]):e._e()]}},{key:"uploadExcelCompanyForm",fn:function(o){return a("div",{},[e.form&&e.form.formslot==o.column.prop?a("uploadExcel",{attrs:{uploadData:o.column.uploadData,msg:o.column.msg},on:{closeDialog:function(o){return e.closeDialog("excelTask3")}}}):e._e(),a("excelTask",{ref:"excelTask3",attrs:{listurl:"/excelTask/getCompanyExcelTaskList",type:"3"}})],1)}},{key:"reduceBalanceForm",fn:function(o){return a("div",{},[e.form&&e.form.formslot==o.column.prop?a("balanceRecord",{attrs:{row:o.row}}):e._e()],1)}},{key:"usageRecordForm",fn:function(o){return a("div",{},[e.form&&e.form.formslot==o.column.prop?a("usageRecord",{attrs:{row:o.row}}):e._e()],1)}},{key:"getExportTaskListForm",fn:function(o){return a("div",{},[e.form&&e.form.formslot==o.column.prop?a("exportTask",{attrs:{title:"导出商家",exporturl:"/company/deriveExcel",listurl:"/exportTask/getCompanyExportTaskList",row:o.row,type:"3",exportParams:e.params}}):e._e()],1)}}]),model:{value:e.form,callback:function(o){e.form=o},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[a("template",{slot:"menuLeft"},[e.hasPermission("/company/excelCompany")?a("el-button",{staticClass:"el-icon-upload2",attrs:{size:"small"},on:{click:function(o){return e.rowView({formslot:"uploadExcelCompany",viewTitle:"导入商家"},0)}}},[e._v("导入商家")]):e._e(),e.hasPermission("/company/deriveExcel")?a("el-button",{staticClass:"el-icon-download",attrs:{size:"small"},on:{click:function(o){return e.rowView({formslot:"getExportTaskList",viewTitle:"导出商家"},0)}}},[e._v("导出商家")]):e._e()],1)],2)],1)},i=[],n=a("1c5e"),r=a("f374"),c=(a("b4fb"),a("08ba"),a("d718")),s=a("82ff"),l=a("e381"),p=a("7e3b"),d=a("47ad"),m=a("22a4"),u=a("99a4"),f={components:{uploadExcel:l["a"],balanceRecord:p["a"],usageRecord:d["a"],excelTask:u["a"],exportTask:m["a"]},mixins:[c["a"],s["a"]],props:{my:{}},data:function(){return{config:{detail:"",save:"/company/addCompany",delete:"/company/deleteCompanyId",update:"/company/updateCompany",list:"/company/getCompany"},method:{delete:"GET"},rowKey:"companyId",option:Object(r["a"])({index:!0,addBtn:!0,addBtnText:"新增商家",menuType:"menu",menuWidth:120,viewBtn:!1,column:[].concat(Object(n["a"])(this.column_def("商家ID","bicId",!0,{search:!0,searchSpan:6,editDisabled:!0,fixed:"left",viewDisplay:!1})),Object(n["a"])(this.column_def("商家名称","companyName",!0,{search:!0,searchSpan:6,fixed:"left",viewDisplay:!1})),Object(n["a"])(this.column_def("是否启用","startUsingStr",!1,{hide:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1})),Object(n["a"])(this.column_switch("是否启用","startUsing",!1,{hide:!0,value:2,addDisplay:!1,editDisplay:!1,viewDisplay:!1,dicData:[{value:1,label:"否"},{value:2,label:"是"}]})),Object(n["a"])(this.column_money("余额","balance",!0,{viewDisplay:!1,editDisabled:!0})),Object(n["a"])(this.column_money("冻结金额","freezeMoney",!0,{addDisplay:!1,viewDisplay:!1,editDisplay:!1})),Object(n["a"])(this.column_money("可用余额","usableBalance",!0,{addDisplay:!1,viewDisplay:!1,editDisplay:!1})),Object(n["a"])(this.column_money("余额预警值","moneyRemind",!0,{viewDisplay:!1,editDisabled:!0})),Object(n["a"])(this.column_money("充值金额","Recharge",!0,{addDisplay:!1,viewDisplay:!1,display:!0,hide:!0})),Object(n["a"])(this.column_money("调减金额","Reduce",!0,{addDisplay:!1,viewDisplay:!1,display:!0,hide:!0})),Object(n["a"])(this.column_textarea("备注","remark",!1,{viewDisplay:!1,editDisplay:!0})))},this.group_def([].concat(Object(n["a"])(this.group_column_formslot("uploadExcelCompany",{msg:"若商家在系统中已存在，余额将会以系统中余额为准，不做修改!",uploadData:{title:"商家",url:"/company/excelCompany",href:"./assets/uploadCompany.xlsx"}})),Object(n["a"])(this.group_column_formslot("uploadExcelOrder",{uploadData:{title:"质检费",url:"/quelityTesting/excelOrder",href:"./assets/uploadQuality.xlsx"}})),Object(n["a"])(this.group_column_formslot("reduceBalance",{})),Object(n["a"])(this.group_column_formslot("usageRecord",{})),Object(n["a"])(this.group_column_formslot("getExportTaskList",{})),Object(n["a"])(this.group_column_formslot("exportQualityTesting",{})))))}},created:function(){},methods:{By100:function(){var e=this;e.form.balance=100*e.form.balance,e.form.usableBalance=100*e.form.usableBalance,e.form.moneyRemind=100*e.form.moneyRemind},addBefore:function(){return this.By100(),1},updateBefore:function(){var e=this;return!e.form.editType||"Recharge"!=e.form.editType&&"Reduce"!=e.form.editType?e.config.update="company/updateCompany":("Recharge"==e.form.editType&&(e.config.update="company/addBalance",e.form.balance=e.form.Recharge),"Reduce"==e.form.editType&&(e.config.update="company/subBalance",e.form.balance=e.form.Reduce)),this.By100(),1},openBefore:function(e){var o=this;!o.form.editType||"Recharge"!=o.form.editType&&"Reduce"!=o.form.editType?(o.option.column.forEach((function(e){"Reduce"==e.prop&&(e.display=!1),"Recharge"==e.prop&&(e.display=!1),"companyName"==e.prop&&(e.editDisabled=!1),"moneyRemind"==e.prop&&(e.editDisplay=!0,e.editDisabled=!1),"balance"==e.prop&&(e.editDisplay=!1)})),o.option=Object.assign(o.option,{})):o.option.column.forEach((function(e){"Reduce"==e.prop&&"Recharge"==o.form.editType&&(e.display=!1),"Recharge"==e.prop&&"Reduce"==o.form.editType&&(e.display=!1),"Recharge"==e.prop&&"Recharge"==o.form.editType&&(e.display=!0),"Reduce"==e.prop&&"Reduce"==o.form.editType&&(e.display=!0),"moneyRemind"==e.prop&&(e.editDisplay=!1),"companyName"==e.prop&&(e.editDisabled=!0),"balance"==e.prop&&(e.editDisplay=!0)})),this.option.editTitle=this.form.editTitle,this.option=Object.assign(this.option,{}),console.log(this.option)},tableRowClassName:function(e){var o=e.row;e.rowIndex;return 1==o.flag?"":"warning-row "}}},y=f,g=a("5d22"),h=Object(g["a"])(y,t,i,!1,null,null,null);o["default"]=h.exports}}]);