(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1307226e"],{"0792":function(e,t,n){"use strict";function r(e){return[{required:!0,message:"请输入".concat(e),trigger:"blur"}]}n.d(t,"a",(function(){return r}))},1619:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n("513c"),n("20a5"),n("e18c"),n("1c2e"),n("e35a"),n("5e9f"),n("0d7a"),n("dbb3");function r(e){var t=e;if(e=Number(Number(e).toFixed(2)),isNaN(e))return t;var n=-1!==e.toString().indexOf(".")?e.toLocaleString():e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),r=n.split(".");return 1==r.length?n+=".00":1==r[1].length&&(n+="0"),n}function i(e,t,n,i){return r(n)}},"1a1a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("avue-crud",e._g(e._b({attrs:{search:e.search,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},i=[],o=n("f374"),a=(n("9302"),n("2eeb"),n("b4fb"),n("08ba"),n("d718")),s=n("82ff"),c=n("5880"),u=n("337a"),d=n("0792"),l={components:{},computed:Object(o["a"])({},Object(c["mapGetters"])(["name"])),mixins:[a["a"],s["a"]],data:function(){return{search:{conditionTwo:""},config:{detail:"",save:"/user/addUser",delete:"/user/deleteUserById",update:"/user/updateUser",list:"/user/getUser"},method:{delete:"GET"},rowKey:"uId",option:{addBtn:!0,viewBtn:!1,column:[{label:"用户名",prop:"username",fixed:"left",searchSpan:6,search:!0,minWidth:180,rules:Object(d["a"])("用户名")},{label:"姓名",prop:"name",minWidth:180,rules:Object(d["a"])("姓名")},{label:"商家名",prop:"company",type:"select",minWidth:180,dicData:[],overHidden:!0,formatter:function(e,t,n,r){return e.company?e.company.companyName:""},rules:Object(d["a"])("商家名")},{label:"登录密码",prop:"password",type:"password",hide:!0,viewDisplay:!1},{label:"确认密码",prop:"comfirmPassword",type:"password",hide:!0,viewDisplay:!1},{label:"是否启用",prop:"lockCount",addDisplay:!1,type:"select",dicData:[{label:"否",value:0},{label:"是",value:2}]},{label:"状态",prop:"lockCountStr",display:!1},{label:"用户角色",prop:"roleList",minWidth:180,multiple:!0,type:"checkbox",all:!0,span:24,dicData:[],overHidden:!0,formatter:function(e,t,n,r){return e.roleList&&e.roleList.map((function(e){return e.roleName})).join(",")}},{label:"创建人",prop:"addUser",display:!1,formatter:function(e,t,n,r){return e.addUser?e.addUser.username:""}},{label:"创建时间",prop:"addTime",display:!1,minWidth:180},{label:"更改人",prop:"updateUser",display:!1,formatter:function(e,t,n,r){return e.updateUser?e.updateUser.username:""}},{label:"更改时间",prop:"updateTime",display:!1,minWidth:180}]}}},methods:{listBefore:function(){this.params.conditionTwo=this.params.username},delBefore:function(e){var t=e;return t={uId:e.id},t},addBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},updateBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},openBefore:function(e){var t=this,n=this.findObject(this.option.column,"password"),r=this.findObject(this.option.column,"comfirmPassword"),i=[{required:!1,validator:function(e,n,r){t.form.password?""===n?r(new Error("请再次输入密码")):n!==t.form.password?r(new Error("两次输入密码不一致!")):r():r()},trigger:"blur"}];if("add"===e?(n.rules=Object(d["a"])("密码"),r.rules=Object(d["a"])("确认密码").concat(i)):(n.rules=[],r.rules=i),"edit"==e){var o=t.form.company;o&&o.companyId&&(t.form.company=o.companyId,t.form.companyId=o.companyId,t.form.companyName=o.companyName),t.form.roleList=t.form.roleList.map((function(e){return e.roleId})),t.form=Object.assign(t.form,{})}},getAll:function(){var e=this;Object(u["a"])("/company/getAll",{},"GET").then((function(t){e.option.column.forEach((function(e){"company"==e.prop&&(e.dicData=t.data.map((function(e){return{label:e.companyName,value:e.companyId}})))}))})).catch((function(e){console.log(e)}))},findAll:function(){var e=this;Object(u["a"])("/role/findAll",{pageNum:1,pageSize:1e3},"GET").then((function(t){e.option.column.forEach((function(e){"roleList"==e.prop&&(e.dicData=t.data.list.map((function(e){return{label:e.roleName,value:e.roleId}})))}))})).catch((function(e){console.log(e)}))}},created:function(){this.getAll(),this.findAll()}},f=l,p=n("5d22"),m=Object(p["a"])(f,r,i,!1,null,null,null);t["default"]=m.exports},"82ff":function(e,t,n){"use strict";n("dbb3"),n("9302");t["a"]={components:{},data:function(){return{}},methods:{hasPermission:function(e){var t=this.$store.state.user.roles.filter((function(t){return t.url==e}));return t&&t.length>0?1:0},configPermission:function(){var e=this,t=0;if(this.config.detail&&(this.permission.viewBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.detail})).join(","),this.permission.viewBtn&&t++),this.config.save&&(this.permission.addBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.save})).join(","),this.permission.addBtn&&t++),this.config.delete&&(this.permission.delBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.delete})).join(","),this.permission.delBtn&&t++),this.config.update&&(this.permission.editBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.update})).join(","),this.permission.editBtn&&t++),t||(this.permission.menu=!1),this.config.list){var n=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.list})).join(",");this.option.searchShow=n,this.option.searchShowBtn=n,this.option.refreshBtn=n}}},created:function(){this.configPermission()},mounted:function(){}}},d718:function(e,t,n){"use strict";var r=n("f206"),i=(n("6a61"),n("08ba"),n("337a")),o=n("1619");t["a"]={components:{},data:function(){var e=function(e,t,n){n()};return{dayjs:dayjs,page:{pageSize:10,pagerCount:5,currentPage:1},data:[],option:{index:!0,align:"center",headerAlign:"center",border:!0,stripe:!0,refreshBtn:!0,columnBtn:!1,excelBtn:!1,addBtn:!1,editBtn:!0,viewBtn:!0,indexLabel:"序号",searchMenuSpan:6,menuBtnTitle:"操作",viewTitle:"查看",editTitle:"编辑",column:[{label:"编号",prop:"id",hide:!0,disabled:!0,addDisabled:!0,editDisabled:!0,display:!1,viewDisplay:!1,addDisplay:!1,editDisplay:!1,slot:!0,formslot:!0,typeslot:!0,sortable:!0,precision:2,minRows:1,maxRows:10,rules:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"},{type:"date",required:!0,message:"请选择日期",trigger:"change"},{pattern:/^[a-z]+$/,message:"只能输入字母!"},{validator:e,trigger:"blur"}]}]},form:{},params:{},loading:!1,config:{},method:{detail:"",save:"",delete:"",update:"",list:""},search:{},permission:{}}},computed:{bindVal:function(){return{ref:"crud",data:this.data,option:this.option,tableLoading:this.loading,permission:this.permission}},onEvent:function(){return{"on-load":this.getList,"row-save":this.rowSave,"row-update":this.rowUpdate,"row-del":this.rowDel,"refresh-change":this.refreshChange,"search-reset":this.searchChange,"search-change":this.searchChange,"expand-change":this.toggleRowExpansion}},rowKey:function(){return this.config.rowKey||"id"}},filters:{filtersFormatMoney:o["a"]},methods:{closeDialog:function(e){this.$refs[e]&&this.$refs[e].getList(),this.getList()},rowView:function(e,t){this.option&&this.option.group&&this.option.group.length>0&&this.option.group[0].column.forEach((function(t){t.prop==e.formslot?t.viewDisplay=!0:t.viewDisplay=!1})),this.option.viewTitle=e.viewTitle,this.option=Object.assign(this.option,{}),this.$refs.crud.rowView(e,t)},tableRowClassName:function(e){e.row,e.rowIndex;return""},toggleRowExpansion:function(e,t){console.log("toggleRowExpansion"),console.log(e,t)},beforeOpen:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var a,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=n,s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.config["detail"]){e.next=7;break}return n={},n[a.rowKey]=a.form[a.rowKey],e.next=5,Object(i["a"])(a.config["detail"],n,a.method["detail"]||"post");case 5:r=e.sent,a.openAfter?a.openAfter(r,a.form,a.form.$index,t):a.form=Object.assign(a.form,r.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.openBefore&&a.openBefore(t),"edit"!=t&&"view"!=t){o.next=6;break}return o.next=6,s();case 6:e();case 7:case"end":return o.stop()}}),o)})))()},getList:function(){var e=this,t=function(){e.loading=!0;var t={};t["pageNum"]=e.page.currentPage,t["pageSize"]=e.page.pageSize;var n=Object.assign(t,e.params);e.data=[],Object(i["a"])(e.config["list"],n,e.method["list"]||"post").then((function(t){e.loading=!1;var n=t.data;e.data=Object.assign(t.data.list||[]),e.page.total=t.data.total,e.listAfter&&e.listAfter(n)})).catch((function(t){e.loading=!1}))};e.listBefore&&e.listBefore(),t()},rowSave:function(e,t,n){var r=this,o=function(){delete r.form.params,Object(i["a"])(r.config["save"],r.form,r.method["save"]||"post").then((function(e){r.getList(),r.addAfter?r.addAfter(e):r.$message.success("新增成功"),t()})).catch((function(){n()}))};r.validateFn&&r.validateFn("add")?n():r.addBefore?r.addBefore()?o():n():o()},rowUpdate:function(e,t,n,r){var o=this,a=function(){delete o.form.params,Object(i["a"])(o.config["update"],o.form,o.method["update"]||"post").then((function(e){o.getList(),o.updateAfter?o.updateAfter(e):o.$message.success("更新成功"),n()})).catch((function(){r()}))};o.validateFn&&o.validateFn("edit")?r():o.updateBefore?o.updateBefore()?a():r():a()},rowDel:function(e,t){var n=this,r=function(){Object(i["a"])(n.config["delete"],e,n.method["delete"]||"post").then((function(r){n.getList(),n.delAfter?n.delAfter(r,e,t):n.$message.success("删除成功")}))},o=(n.page.currentPage-1)*n.page.pageSize+t+1;n.$confirm("此操作将永久删除序号【".concat(o,"】的数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.delBefore?(e=n.delBefore(e),r()):r()})).catch((function(){}))},searchChange:function(e,t){t&&t(),this.params=e,this.page.currentPage=1,this.getList()},refreshChange:function(){this.getList()}},created:function(){},mounted:function(){}}}}]);