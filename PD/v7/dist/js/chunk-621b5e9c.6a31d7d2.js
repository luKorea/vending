(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-621b5e9c"],{1619:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));n("513c"),n("20a5"),n("e18c"),n("1c2e"),n("e35a"),n("5e9f"),n("0d7a"),n("dbb3");function i(e){var t=e;if(e=Number(Number(e).toFixed(2)),isNaN(e))return t;var n=-1!==e.toString().indexOf(".")?e.toLocaleString():e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),i=n.split(".");return 1==i.length?n+=".00":1==i[1].length&&(n+="0"),n}function r(e,t,n,r){return i(n)}},1687:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("avue-crud",e._g(e._b({attrs:{search:e.search,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},r=[],o=n("f374"),a=(n("2eeb"),n("08ba"),n("d718")),s=n("5880"),c=n("337a"),u=n("82ff"),d=(n("1619"),{components:{},computed:Object(o["a"])({},Object(s["mapGetters"])(["name"])),mixins:[a["a"],u["a"]],data:function(){return{search:{conditionTwo:""},config:{detail:"/role/findByRId",save:"/role/addRole",delete:"/role/deRoleByUId",update:"/role/updateRole",list:"/role/findAll"},method:{detail:"GET",delete:"GET",list:"GET"},rowKey:"id",option:{addBtn:!0,viewBtn:!1,column:[{label:"角色名",prop:"roleName",fixed:"left",searchSpan:6,search:!0,minWidth:180,rules:[{required:!0,message:"请输入角色名",trigger:"blur"}]},{label:"备注",prop:"remark",type:"textarea",minWidth:180},{label:"用户角色",prop:"controlList",minWidth:180,type:"checkbox",all:!0,multiple:!0,span:24,hide:!0,dicData:[]},{label:"创建人",prop:"addUser",display:!1,formatter:function(e,t,n,i){return e.addUser?e.addUser.username:""}},{label:"创建时间",prop:"addTime",display:!1,minWidth:180},{label:"最后更改人",prop:"updateUser",display:!1,formatter:function(e,t,n,i){return e.updateUser?e.updateUser.username:""}},{label:"最后更改时间",prop:"updateTime",display:!1,minWidth:180}]}}},methods:{delBefore:function(e){var t=e;return t={roleId:e.roleId},t},openBefore:function(e){var t=this;"edit"==e&&(t.form.id=t.form.roleId),t.form=Object.assign(t.form,t.form)},openAfter:function(e,t,n,i){var r=this;t.controlList=e.data.map((function(e){return e.controlId})),r.form=Object.assign(t,{})},listAfter:function(e){this.data.forEach((function(e){e.controlList=[]}))},getControl:function(){var e=this;Object(c["a"])("/control/getControl",{},"GET").then((function(t){var n={};t.data.forEach((function(e){n[e.controlId]=e}));var i=[];for(var r in n)i.push(n[r]);e.option.column.forEach((function(e){"controlList"==e.prop&&(e.dicData=i.map((function(e){return{label:e.controlName,value:e.controlId}})))}))})).catch((function(e){console.log(e)}))}},created:function(){this.getControl()}}),l=d,f=n("5d22"),p=Object(f["a"])(l,i,r,!1,null,null,null);t["default"]=p.exports},"82ff":function(e,t,n){"use strict";n("dbb3"),n("9302");t["a"]={components:{},data:function(){return{}},methods:{hasPermission:function(e){var t=this.$store.state.user.roles.filter((function(t){return t.url==e}));return t&&t.length>0?1:0},configPermission:function(){var e=this,t=0;if(this.config.detail&&(this.permission.viewBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.detail})).join(","),this.permission.viewBtn&&t++),this.config.save&&(this.permission.addBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.save})).join(","),this.permission.addBtn&&t++),this.config.delete&&(this.permission.delBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.delete})).join(","),this.permission.delBtn&&t++),this.config.update&&(this.permission.editBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.update})).join(","),this.permission.editBtn&&t++),t||(this.permission.menu=!1),this.config.list){var n=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.list})).join(",");this.option.searchShow=n,this.option.searchShowBtn=n,this.option.refreshBtn=n}}},created:function(){this.configPermission()},mounted:function(){}}},d718:function(e,t,n){"use strict";var i=n("f206"),r=(n("6a61"),n("08ba"),n("337a")),o=n("1619");t["a"]={components:{},data:function(){var e=function(e,t,n){n()};return{dayjs:dayjs,page:{pageSize:10,pagerCount:5,currentPage:1},data:[],option:{index:!0,align:"center",headerAlign:"center",border:!0,stripe:!0,refreshBtn:!0,columnBtn:!1,excelBtn:!1,addBtn:!1,editBtn:!0,viewBtn:!0,indexLabel:"序号",searchMenuSpan:6,menuBtnTitle:"操作",viewTitle:"查看",editTitle:"编辑",column:[{label:"编号",prop:"id",hide:!0,disabled:!0,addDisabled:!0,editDisabled:!0,display:!1,viewDisplay:!1,addDisplay:!1,editDisplay:!1,slot:!0,formslot:!0,typeslot:!0,sortable:!0,precision:2,minRows:1,maxRows:10,rules:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"},{type:"date",required:!0,message:"请选择日期",trigger:"change"},{pattern:/^[a-z]+$/,message:"只能输入字母!"},{validator:e,trigger:"blur"}]}]},form:{},params:{},loading:!1,config:{},method:{detail:"",save:"",delete:"",update:"",list:""},search:{},permission:{}}},computed:{bindVal:function(){return{ref:"crud",data:this.data,option:this.option,tableLoading:this.loading,permission:this.permission}},onEvent:function(){return{"on-load":this.getList,"row-save":this.rowSave,"row-update":this.rowUpdate,"row-del":this.rowDel,"refresh-change":this.refreshChange,"search-reset":this.searchChange,"search-change":this.searchChange,"expand-change":this.toggleRowExpansion}},rowKey:function(){return this.config.rowKey||"id"}},filters:{filtersFormatMoney:o["a"]},methods:{closeDialog:function(e){this.$refs[e]&&this.$refs[e].getList(),this.getList()},rowView:function(e,t){this.option&&this.option.group&&this.option.group.length>0&&this.option.group[0].column.forEach((function(t){t.prop==e.formslot?t.viewDisplay=!0:t.viewDisplay=!1})),this.option.viewTitle=e.viewTitle,this.option=Object.assign(this.option,{}),this.$refs.crud.rowView(e,t)},tableRowClassName:function(e){e.row,e.rowIndex;return""},toggleRowExpansion:function(e,t){console.log("toggleRowExpansion"),console.log(e,t)},beforeOpen:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var a,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=n,s=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.config["detail"]){e.next=7;break}return n={},n[a.rowKey]=a.form[a.rowKey],e.next=5,Object(r["a"])(a.config["detail"],n,a.method["detail"]||"post");case 5:i=e.sent,a.openAfter?a.openAfter(i,a.form,a.form.$index,t):a.form=Object.assign(a.form,i.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.openBefore&&a.openBefore(t),"edit"!=t&&"view"!=t){o.next=6;break}return o.next=6,s();case 6:e();case 7:case"end":return o.stop()}}),o)})))()},getList:function(){var e=this,t=function(){e.loading=!0;var t={};t["pageNum"]=e.page.currentPage,t["pageSize"]=e.page.pageSize;var n=Object.assign(t,e.params);e.data=[],Object(r["a"])(e.config["list"],n,e.method["list"]||"post").then((function(t){e.loading=!1;var n=t.data;e.data=Object.assign(t.data.list||[]),e.page.total=t.data.total,e.listAfter&&e.listAfter(n)})).catch((function(t){e.loading=!1}))};e.listBefore&&e.listBefore(),t()},rowSave:function(e,t,n){var i=this,o=function(){delete i.form.params,Object(r["a"])(i.config["save"],i.form,i.method["save"]||"post").then((function(e){i.getList(),i.addAfter?i.addAfter(e):i.$message.success("新增成功"),t()})).catch((function(){n()}))};i.validateFn&&i.validateFn("add")?n():i.addBefore?i.addBefore()?o():n():o()},rowUpdate:function(e,t,n,i){var o=this,a=function(){delete o.form.params,Object(r["a"])(o.config["update"],o.form,o.method["update"]||"post").then((function(e){o.getList(),o.updateAfter?o.updateAfter(e):o.$message.success("更新成功"),n()})).catch((function(){i()}))};o.validateFn&&o.validateFn("edit")?i():o.updateBefore?o.updateBefore()?a():i():a()},rowDel:function(e,t){var n=this,i=function(){Object(r["a"])(n.config["delete"],e,n.method["delete"]||"post").then((function(i){n.getList(),n.delAfter?n.delAfter(i,e,t):n.$message.success("删除成功")}))},o=(n.page.currentPage-1)*n.page.pageSize+t+1;n.$confirm("此操作将永久删除序号【".concat(o,"】的数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.delBefore?(e=n.delBefore(e),i()):i()})).catch((function(){}))},searchChange:function(e,t){t&&t(),this.params=e,this.page.currentPage=1,this.getList()},refreshChange:function(){this.getList()}},created:function(){},mounted:function(){}}}}]);