(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4394222e"],{"0792":function(e,a,o){"use strict";function r(e){return[{required:!0,message:"请输入".concat(e),trigger:"blur"}]}o.d(a,"a",(function(){return r}))},"1a1a":function(e,a,o){"use strict";o.r(a);var r=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"app-container"},[o("avue-crud",e._g(e._b({attrs:{search:e.search,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(a){e.search=a},"update:page":function(a){e.page=a}},model:{value:e.form,callback:function(a){e.form=a},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},t=[],n=o("f374"),i=(o("9302"),o("2eeb"),o("b4fb"),o("08ba"),o("d718")),s=o("82ff"),c=o("5880"),l=o("337a"),p=o("0792"),d={components:{},computed:Object(n["a"])({},Object(c["mapGetters"])(["name"])),mixins:[i["a"],s["a"]],data:function(){return{search:{conditionTwo:""},config:{detail:"",save:"/user/addUser",delete:"/user/deleteUserById",update:"/user/updateUser",list:"/user/getUser"},method:{delete:"GET"},rowKey:"uId",option:{addBtn:!0,viewBtn:!1,column:[{label:"用户名",prop:"username",fixed:"left",searchSpan:6,search:!0,minWidth:180,rules:Object(p["a"])("用户名")},{label:"姓名",prop:"name",minWidth:180,rules:Object(p["a"])("姓名")},{label:"商家名",prop:"company",type:"select",minWidth:180,dicData:[],overHidden:!0,formatter:function(e,a,o,r){return e.company?e.company.companyName:""},rules:Object(p["a"])("商家名")},{label:"登录密码",prop:"password",type:"password",hide:!0,viewDisplay:!1},{label:"确认密码",prop:"comfirmPassword",type:"password",hide:!0,viewDisplay:!1},{label:"是否启用",prop:"lockCount",addDisplay:!1,type:"select",dicData:[{label:"否",value:0},{label:"是",value:2}]},{label:"状态",prop:"lockCountStr",display:!1},{label:"用户角色",prop:"roleList",minWidth:180,multiple:!0,type:"checkbox",all:!0,span:24,dicData:[],overHidden:!0,formatter:function(e,a,o,r){return e.roleList&&e.roleList.map((function(e){return e.roleName})).join(",")}},{label:"创建人",prop:"addUser",display:!1,formatter:function(e,a,o,r){return e.addUser?e.addUser.username:""}},{label:"创建时间",prop:"addTime",display:!1,minWidth:180},{label:"更改人",prop:"updateUser",display:!1,formatter:function(e,a,o,r){return e.updateUser?e.updateUser.username:""}},{label:"更改时间",prop:"updateTime",display:!1,minWidth:180}]}}},methods:{listBefore:function(){this.params.conditionTwo=this.params.username},delBefore:function(e){var a=e;return a={uId:e.id},a},addBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},updateBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},openBefore:function(e){var a=this,o=this.findObject(this.option.column,"password"),r=this.findObject(this.option.column,"comfirmPassword"),t=[{required:!1,validator:function(e,o,r){a.form.password?""===o?r(new Error("请再次输入密码")):o!==a.form.password?r(new Error("两次输入密码不一致!")):r():r()},trigger:"blur"}];if("add"===e?(o.rules=Object(p["a"])("密码"),r.rules=Object(p["a"])("确认密码").concat(t)):(o.rules=[],r.rules=t),"edit"==e){var n=a.form.company;n&&n.companyId&&(a.form.company=n.companyId,a.form.companyId=n.companyId,a.form.companyName=n.companyName),a.form.roleList=a.form.roleList.map((function(e){return e.roleId})),a.form=Object.assign(a.form,{})}},getAll:function(){var e=this;Object(l["a"])("/company/getAll",{},"GET").then((function(a){e.option.column.forEach((function(e){"company"==e.prop&&(e.dicData=a.data.map((function(e){return{label:e.companyName,value:e.companyId}})))}))})).catch((function(e){console.log(e)}))},findAll:function(){var e=this;Object(l["a"])("/role/findAll",{pageNum:1,pageSize:1e3},"GET").then((function(a){e.option.column.forEach((function(e){"roleList"==e.prop&&(e.dicData=a.data.list.map((function(e){return{label:e.roleName,value:e.roleId}})))}))})).catch((function(e){console.log(e)}))}},created:function(){this.getAll(),this.findAll()}},u=d,m=o("5d22"),f=Object(m["a"])(u,r,t,!1,null,null,null);a["default"]=f.exports}}]);