(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2121a02f"],{1619:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));i("513c"),i("20a5"),i("e18c"),i("1c2e"),i("e35a"),i("5e9f"),i("0d7a"),i("dbb3");function n(e){var t=e;if(e=Number(Number(e).toFixed(2)),isNaN(e))return t;var i=-1!==e.toString().indexOf(".")?e.toLocaleString():e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),n=i.split(".");return 1==n.length?i+=".00":1==n[1].length&&(i+="0"),i}function a(e,t,i,a){return n(i)}},"22a4":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("avue-crud",e._g(e._b({attrs:{"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"filePath",fn:function(t){return[t.row.filePath&&1==t.row.status?i("el-link",{staticClass:"dowloadX",staticStyle:{"font-size":"12px"},attrs:{href:t.row.filePath,download:t.row.fileName+".xlsx",type:"primary",icon:"el-icon-download"}},[e._v(" 下载")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[i("template",{slot:"menuLeft"},[2==e.type?i("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.exportQualityTesting(t)}}},[e._v("导出质检费")]):e._e(),3==e.type?i("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.deriveExcel(t)}}},[e._v("导出商家")]):e._e(),1==e.type?i("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.exportOrder(t)}}},[e._v("导出订单")]):e._e()],1)],2)],1)},a=[],o=(i("b4fb"),i("053b"),i("d718")),r=i("337a"),s={components:{},mixins:[o["a"]],props:{type:{},exportParams:{}},data:function(){return{deriveExcelloading:!1,config:{detail:"",save:"",delete:"",update:"",list:"/exportTask/getExportTaskList"},method:{list:"GET"},rowKey:"id",option:{index:!1,menu:!1,column:[{label:"ID",prop:"id",width:60},{label:"操作用户",prop:"name",formatter:function(e,t,i,n){return"".concat(e.name,"(").concat(e.userName,")")}},{label:"创建时间",prop:"createTime"},{label:"状态",prop:"status",type:"select",width:60,dicData:[{value:0,label:"未完成"},{value:1,label:"已完成"},{value:2,label:"已失败"}]},{label:"文件名",prop:"fileName",solt:!0},{label:"文件下载",prop:"filePath",solt:!0}]}}},created:function(){},methods:{exportOrder:function(){var e=this;e.deriveExcelloading=!0,Object(r["a"])("/order/exportOrder",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},exportQualityTesting:function(){var e=this;e.deriveExcelloading=!0,Object(r["a"])("/quelityTesting/exportQualityTesting",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},deriveExcel:function(){var e=this;e.deriveExcelloading=!0,Object(r["a"])("/company/deriveExcel",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},listBefore:function(){this.params.type=this.type}}},l=s,c=i("5d22"),u=Object(c["a"])(l,n,a,!1,null,null,null);t["a"]=u.exports},"82ff":function(e,t,i){"use strict";i("dbb3"),i("9302");t["a"]={components:{},data:function(){return{}},methods:{hasPermission:function(e){var t=this.$store.state.user.roles.filter((function(t){return t.url==e}));return t&&t.length>0?1:0},configPermission:function(){var e=this,t=0;if(this.config.detail&&(this.permission.viewBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.detail})).join(","),this.permission.viewBtn&&t++),this.config.save&&(this.permission.addBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.save})).join(","),this.permission.addBtn&&t++),this.config.delete&&(this.permission.delBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.delete})).join(","),this.permission.delBtn&&t++),this.config.update&&(this.permission.editBtn=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.update})).join(","),this.permission.editBtn&&t++),t||(this.permission.menu=!1),this.config.list){var i=!!this.$store.state.user.roles.filter((function(t){return t.url==e.config.list})).join(",");this.option.searchShow=i,this.option.searchShowBtn=i,this.option.refreshBtn=i}}},created:function(){this.configPermission()},mounted:function(){}}},"99a4":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("avue-crud",e._g(e._b({attrs:{"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},a=[],o=(i("b4fb"),i("053b"),i("9302"),i("2eeb"),i("d718")),r={components:{},mixins:[o["a"]],props:{type:{}},data:function(){return{config:{detail:"",save:"",delete:"",update:"",list:"/excelTask/getExcelTaskList"},method:{list:"GET"},rowKey:"id",option:{index:!0,menu:!1,column:[{label:"ID",prop:"id",width:60},{label:"操作用户",prop:"name",formatter:function(e,t,i,n){return"".concat(e.name,"(").concat(e.userName,")")}},{label:"导入开始时间",prop:"createTime"},{label:"导入结束时间",prop:"updateTime"},{label:"状态",prop:"status",type:"select",width:60,dicData:[{value:0,label:"未完成"},{value:1,label:"已完成"},{value:2,label:"已失败"},{value:3,label:"部分数据导入失败"}]},{label:"消息",prop:"message",minWidth:200,overHidden:!0,formatter:function(e,t,i,n){return e.excelTaskErrList.map((function(e,t){return"".concat(t+1,":").concat(e.message,"  ")})).join(",")}}]}}},created:function(){},methods:{listBefore:function(){this.params.type=this.type}}},s=r,l=i("5d22"),c=Object(l["a"])(s,n,a,!1,null,null,null);t["a"]=c.exports},d718:function(e,t,i){"use strict";var n=i("f206"),a=(i("6a61"),i("08ba"),i("337a")),o=i("1619");t["a"]={components:{},data:function(){var e=function(e,t,i){i()};return{dayjs:dayjs,page:{pageSize:10,pagerCount:5,currentPage:1},data:[],option:{index:!0,align:"center",headerAlign:"center",border:!0,stripe:!0,refreshBtn:!0,columnBtn:!1,excelBtn:!1,addBtn:!1,editBtn:!0,viewBtn:!0,indexLabel:"序号",searchMenuSpan:6,menuBtnTitle:"操作",viewTitle:"查看",editTitle:"编辑",column:[{label:"编号",prop:"id",hide:!0,disabled:!0,addDisabled:!0,editDisabled:!0,display:!1,viewDisplay:!1,addDisplay:!1,editDisplay:!1,slot:!0,formslot:!0,typeslot:!0,sortable:!0,precision:2,minRows:1,maxRows:10,rules:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"},{type:"date",required:!0,message:"请选择日期",trigger:"change"},{pattern:/^[a-z]+$/,message:"只能输入字母!"},{validator:e,trigger:"blur"}]}]},form:{},params:{},loading:!1,config:{},method:{detail:"",save:"",delete:"",update:"",list:""},search:{},permission:{}}},computed:{bindVal:function(){return{ref:"crud",data:this.data,option:this.option,tableLoading:this.loading,permission:this.permission}},onEvent:function(){return{"on-load":this.getList,"row-save":this.rowSave,"row-update":this.rowUpdate,"row-del":this.rowDel,"refresh-change":this.refreshChange,"search-reset":this.searchChange,"search-change":this.searchChange,"expand-change":this.toggleRowExpansion}},rowKey:function(){return this.config.rowKey||"id"}},filters:{filtersFormatMoney:o["a"]},methods:{closeDialog:function(e){this.$refs[e]&&this.$refs[e].getList(),this.getList()},rowView:function(e,t){this.option&&this.option.group&&this.option.group.length>0&&this.option.group[0].column.forEach((function(t){t.prop==e.formslot?t.viewDisplay=!0:t.viewDisplay=!1})),this.option.viewTitle=e.viewTitle,this.option=Object.assign(this.option,{}),this.$refs.crud.rowView(e,t)},tableRowClassName:function(e){e.row,e.rowIndex;return""},toggleRowExpansion:function(e,t){console.log("toggleRowExpansion"),console.log(e,t)},beforeOpen:function(e,t){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var r,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r=i,s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.config["detail"]){e.next=7;break}return i={},i[r.rowKey]=r.form[r.rowKey],e.next=5,Object(a["a"])(r.config["detail"],i,r.method["detail"]||"post");case 5:n=e.sent,r.openAfter?r.openAfter(n,r.form,r.form.$index,t):r.form=Object.assign(r.form,n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.openBefore&&r.openBefore(t),"edit"!=t&&"view"!=t){o.next=6;break}return o.next=6,s();case 6:e();case 7:case"end":return o.stop()}}),o)})))()},getList:function(){var e=this,t=function(){e.loading=!0;var t={};t["pageNum"]=e.page.currentPage,t["pageSize"]=e.page.pageSize;var i=Object.assign(t,e.params);e.data=[],Object(a["a"])(e.config["list"],i,e.method["list"]||"post").then((function(t){e.loading=!1;var i=t.data;e.data=Object.assign(t.data.list||[]),e.page.total=t.data.total,e.listAfter&&e.listAfter(i)})).catch((function(t){e.loading=!1}))};e.listBefore&&e.listBefore(),t()},rowSave:function(e,t,i){var n=this,o=function(){delete n.form.params,Object(a["a"])(n.config["save"],n.form,n.method["save"]||"post").then((function(e){n.getList(),n.addAfter?n.addAfter(e):n.$message.success("新增成功"),t()})).catch((function(){i()}))};n.validateFn&&n.validateFn("add")?i():n.addBefore?n.addBefore()?o():i():o()},rowUpdate:function(e,t,i,n){var o=this,r=function(){delete o.form.params,Object(a["a"])(o.config["update"],o.form,o.method["update"]||"post").then((function(e){o.getList(),o.updateAfter?o.updateAfter(e):o.$message.success("更新成功"),i()})).catch((function(){n()}))};o.validateFn&&o.validateFn("edit")?n():o.updateBefore?o.updateBefore()?r():n():r()},rowDel:function(e,t){var i=this,n=function(){Object(a["a"])(i.config["delete"],e,i.method["delete"]||"post").then((function(n){i.getList(),i.delAfter?i.delAfter(n,e,t):i.$message.success("删除成功")}))},o=(i.page.currentPage-1)*i.page.pageSize+t+1;i.$confirm("此操作将永久删除序号【".concat(o,"】的数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.delBefore?(e=i.delBefore(e),n()):n()})).catch((function(){}))},searchChange:function(e,t){t&&t(),this.params=e,this.page.currentPage=1,this.getList()},refreshChange:function(){this.getList()}},created:function(){},mounted:function(){}}},e381:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row-c"},[i("el-upload",{ref:"upload",staticStyle:{margin:"auto"},attrs:{limit:1,accept:".xlsx, .xls",action:e.uploadData.url,disabled:e.isUploading,"http-request":e.handleFileUpload,"auto-upload":!0,drag:""}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",staticStyle:{color:"#ff0000","text-align":"center"},attrs:{slot:"tip"},slot:"tip"},[i("el-link",{staticClass:"dowloadX",staticStyle:{"font-size":"12px"},attrs:{href:e.uploadData.href,download:e.uploadData.title+"导入模板.xlsx",type:"primary",icon:"el-icon-warning-outline"}},[e._v(" 下载"+e._s(e.uploadData.title)+"导入模板")]),e.msg?i("br"):e._e(),e._v(" "+e._s(e.msg)+" "),i("br"),e._v(" 提示：仅允许导入“xls”或“xlsx”格式文件！ ")],1)])],1)},a=[],o=(i("9302"),i("337a")),r={components:{},props:{uploadData:{type:Object,default:{title:"",url:"",href:""}},msg:""},watch:{allClassList:function(e){this.setallClassList(e)}},data:function(){return{isUploading:!1}},created:function(){},methods:{handleFileUpload:function(e){var t=this,i=new FormData;i.append("file",e.file),t.isUploading=!0;var n=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["a"])(t.uploadData.url,i,"upload",!0,!0).then((function(e){console.log(e),t.$refs.upload.clearFiles(),t.isUploading=!1,t.$emit("closeDialog"),n.close(),200!=e.code&&t.$alert(e.data&&e.data.join(","),"提示",{confirmButtonText:"确定",callback:function(e){}})})).catch((function(e){t.$refs.upload.clearFiles(),t.isUploading=!1,n.close()}))}}},s=r,l=i("5d22"),c=Object(l["a"])(s,n,a,!1,null,null,null);t["a"]=c.exports}}]);