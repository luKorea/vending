(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-319ad021"],{"22a4":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("avue-crud",e._g(e._b({attrs:{"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"filePath",fn:function(t){return[t.row.filePath&&1==t.row.status?a("el-link",{staticClass:"dowloadX",staticStyle:{"font-size":"12px"},attrs:{href:t.row.filePath,download:t.row.fileName+".xlsx",type:"primary",icon:"el-icon-download"}},[e._v(" 下载")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[a("template",{slot:"menuLeft"},[2==e.type?a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.exportQualityTesting(t)}}},[e._v("导出质检费")]):e._e(),3==e.type?a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.deriveExcel(t)}}},[e._v("导出商家")]):e._e(),1==e.type?a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small",loading:e.deriveExcelloading},nativeOn:{click:function(t){return e.exportOrder(t)}}},[e._v("导出订单")]):e._e()],1)],2)],1)},i=[],o=(a("b4fb"),a("053b"),a("d718")),n=a("337a"),r={components:{},mixins:[o["a"]],props:{type:{},exportParams:{}},data:function(){return{deriveExcelloading:!1,config:{detail:"",save:"",delete:"",update:"",list:"/exportTask/getExportTaskList"},method:{list:"GET"},rowKey:"id",option:{index:!1,menu:!1,column:[{label:"ID",prop:"id",width:60},{label:"操作用户",prop:"name",formatter:function(e,t,a,l){return"".concat(e.name,"(").concat(e.userName,")")}},{label:"创建时间",prop:"createTime"},{label:"状态",prop:"status",type:"select",width:60,dicData:[{value:0,label:"未完成"},{value:1,label:"已完成"},{value:2,label:"已失败"}]},{label:"文件名",prop:"fileName"},{label:"文件下载",prop:"filePath",solt:!0}]}}},created:function(){},methods:{exportOrder:function(){var e=this;e.deriveExcelloading=!0,Object(n["a"])("/order/exportOrder",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},exportQualityTesting:function(){var e=this;e.deriveExcelloading=!0,Object(n["a"])("/quelityTesting/exportQualityTesting",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},deriveExcel:function(){var e=this;e.deriveExcelloading=!0,Object(n["a"])("/company/deriveExcel",this.exportParams,"GET",!0).then((function(t){e.deriveExcelloading=!1,e.getList()})).catch((function(t){e.deriveExcelloading=!1}))},listBefore:function(){this.params.type=this.type}}},s=r,c=a("5d22"),p=Object(c["a"])(s,l,i,!1,null,null,null);t["a"]=p.exports},"99a4":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("avue-crud",e._g(e._b({attrs:{"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},i=[],o=(a("b4fb"),a("053b"),a("9302"),a("2eeb"),a("d718")),n={components:{},mixins:[o["a"]],props:{type:{}},data:function(){return{config:{detail:"",save:"",delete:"",update:"",list:"/excelTask/getExcelTaskList"},method:{list:"GET"},rowKey:"id",option:{index:!0,menu:!1,column:[{label:"ID",prop:"id",width:60},{label:"操作用户",prop:"name",formatter:function(e,t,a,l){return"".concat(e.name,"(").concat(e.userName,")")}},{label:"导入开始时间",prop:"createTime"},{label:"导入结束时间",prop:"updateTime"},{label:"状态",prop:"status",type:"select",width:60,dicData:[{value:0,label:"未完成"},{value:1,label:"已完成"},{value:2,label:"已失败"},{value:3,label:"部分数据导入失败"}]},{label:"消息",prop:"message",minWidth:200,overHidden:!0,formatter:function(e,t,a,l){return e.excelTaskErrList.map((function(e,t){return"".concat(t+1,":").concat(e.message,"  ")})).join(",")}}]}}},created:function(){},methods:{listBefore:function(){this.params.type=this.type}}},r=n,s=a("5d22"),c=Object(s["a"])(r,l,i,!1,null,null,null);t["a"]=c.exports},e381:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row-c"},[a("el-upload",{ref:"upload",staticStyle:{margin:"auto"},attrs:{limit:1,accept:".xlsx, .xls",action:e.uploadData.url,disabled:e.isUploading,"http-request":e.handleFileUpload,"auto-upload":!0,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"#ff0000","text-align":"center"},attrs:{slot:"tip"},slot:"tip"},[a("el-link",{staticClass:"dowloadX",staticStyle:{"font-size":"12px"},attrs:{href:e.uploadData.href,download:e.uploadData.title+"导入模板.xlsx",type:"primary",icon:"el-icon-warning-outline"}},[e._v(" 下载"+e._s(e.uploadData.title)+"导入模板")]),e.msg?a("br"):e._e(),e._v(" "+e._s(e.msg)+" "),a("br"),e._v(" 提示：仅允许导入“xls”或“xlsx”格式文件！ ")],1)])],1)},i=[],o=(a("9302"),a("337a")),n={components:{},props:{uploadData:{type:Object,default:{title:"",url:"",href:""}},msg:""},watch:{allClassList:function(e){this.setallClassList(e)}},data:function(){return{isUploading:!1}},created:function(){},methods:{handleFileUpload:function(e){var t=this,a=new FormData;a.append("file",e.file),t.isUploading=!0;var l=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["a"])(t.uploadData.url,a,"upload",!0,!0).then((function(e){console.log(e),t.$refs.upload.clearFiles(),t.isUploading=!1,t.$emit("closeDialog"),l.close(),200!=e.code&&t.$alert(e.data&&e.data.join(","),"提示",{confirmButtonText:"确定",callback:function(e){}})})).catch((function(e){t.$refs.upload.clearFiles(),t.isUploading=!1,l.close()}))}}},r=n,s=a("5d22"),c=Object(s["a"])(r,l,i,!1,null,null,null);t["a"]=c.exports},f9d0:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("avue-crud",e._g(e._b({attrs:{"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"uploadExcelOrderForm",fn:function(t){return[a("div",[e.form&&e.form.formslot==t.column.prop?a("uploadExcel",{attrs:{uploadData:t.column.uploadData,msg:t.column.msg},on:{closeDialog:function(t){return e.closeDialog("excelTask2")}}}):e._e(),a("excelTask",{ref:"excelTask2",attrs:{type:"2"}})],1)]}},{key:"exportQualityTestingForm",fn:function(t){return[a("div",[e.form&&e.form.formslot==t.column.prop?a("exportTask",{attrs:{row:t.row,type:"2",exportParams:e.params}}):e._e()],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[a("template",{slot:"menuLeft"},[e.hasPermission("/quelityTesting/excelOrder")?a("el-button",{staticClass:"el-icon-upload2",attrs:{size:"small"},on:{click:function(t){return e.rowView({formslot:"uploadExcelOrder",viewTitle:"导入质检费"},0)}}},[e._v("导入质检费")]):e._e(),a("el-button",{staticClass:"el-icon-download",attrs:{size:"small"},on:{click:function(t){return e.rowView({formslot:"exportQualityTesting",viewTitle:"导出质检费"},0)}}},[e._v(" 导出质检费")])],1)],2)],1)},i=[],o=a("d718"),n=a("82ff"),r=a("e381"),s=a("22a4"),c=a("99a4"),p=(a("337a"),a("1619")),u={components:{uploadExcel:r["a"],exportTask:s["a"],excelTask:c["a"]},mixins:[o["a"],n["a"]],data:function(){var e=this,t=dayjs().format("YYYY-MM-DD"),a=dayjs().subtract(1,"month").format("YYYY-MM-DD");return{Excelloading:!1,endTime:t,startTime:a,config:{detail:"",save:"",delete:"",update:"",list:"/quelityTesting/getQualityTesting"},rowKey:"id",option:{menu:!1,clearExclude:["date"],column:[{label:"质检日期",prop:"date",type:"date",searchSpan:6,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd",searchValue:[a,t],viewDisplay:!1,searchClearable:!1,pickerOptions:{onPick:function(t){var a=t.maxDate,l=t.minDate;e.selectDate=l.getTime(),a&&(e.selectDate="")},disabledDate:function(t){if(""!==e.selectDate){var a=7776e6,l=e.selectDate-a,i=e.selectDate+a;return t.getTime()<l||t.getTime()>i}}}},{label:"商家名称",prop:"bicName",search:!0,searchSpan:6,viewDisplay:!1},{label:"证书类型",prop:"certificateType",viewDisplay:!1},{label:"应收单价",prop:"unitPriceReceivable",type:"number",value:0,viewDisplay:!1,minRows:0,precision:2,formatter:function(e,t,a,l){return Object(p["a"])(a)}},{label:"数量（件）",prop:"number",viewDisplay:!1},{label:"应收合计",prop:"totalReceivables",type:"number",value:0,viewDisplay:!1,minRows:0,precision:2,formatter:function(e,t,a,l){return Object(p["a"])(a)}},{label:"优惠金额",prop:"preferentialAmount",type:"number",value:0,viewDisplay:!1,minRows:0,precision:2,formatter:function(e,t,a,l){return Object(p["a"])(a)}},{label:"实收金额",prop:"amountActuallyReceived",type:"number",value:0,viewDisplay:!1,minRows:0,precision:2,formatter:function(e,t,a,l){return Object(p["a"])(a)}},{label:"所属机构",prop:"affiliatedInstitutions",viewDisplay:!1}],group:[{prop:"group",arrow:!1,addDisplay:!1,viewDisplay:!0,editDisplay:!1,column:[{prop:"uploadExcelOrder",uploadData:{title:"质检费",url:"quelityTesting/excelOrder",href:"./assets/uploadQuality.xlsx"},hide:!0,editDisplay:!1,viewDisplay:!0,addDisplay:!1,formslot:!0,span:24,labelWidth:0},{prop:"exportQualityTesting",hide:!0,editDisplay:!1,viewDisplay:!0,addDisplay:!1,formslot:!0,span:24,labelWidth:0}]}]}}},methods:{listBefore:function(){this.params.date&&this.params.date.length>0&&(this.params.startTime=this.params.date[0],this.params.endTime=this.params.date[1],delete this.params.date)}},created:function(){this.params.startTime=this.startTime,this.params.endTime=this.endTime},mounted:function(){}},d=u,m=a("5d22"),f=Object(m["a"])(d,l,i,!1,null,null,null);t["default"]=f.exports}}]);