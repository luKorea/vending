<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="../../js/public/documentWrite.js"></script>
	<link rel="stylesheet" href="../../MyCss/my/ThePublic.css">
	<title>关联公众号</title>
</head>

<body>
	<div class="public-wrap">
		<div class="aboutGxh">
			<div>
				<button class="layui-btn layui-btn-normal query-btn btn">
					<i class="layui-icon layui-icon-refresh"></i>
					<span>刷新</span>
				</button>
				<button class="layui-btn layui-btn-normal query-btn btn" style="margin-left: 30px;">
					<i class="layui-icon layui-icon-add-1"></i>
					<span>添加</span>
				</button>
			</div>
			<!-- 数据列表 -->
			<div class="data-list" style="margin-top: 15px;">
				<div>
					<table class="layui-hide" id="moneyData" lay-filter="moneyData"></table>
				</div>
			</div>
		</div>
	</div>
	<div>
		<div id="test12" class="demo-tree-more"></div>
	</div>
</body>
<script>
	layui.use(['element', 'laydate', 'table', 'tree', 'layer'], function () {
		var $ = layui.jquery,
			element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
		var table = layui.table;
		table.render({
			elem: '#moneyData',
			cols: [
				[{
					field: 'username',
					width: 160,
					title: '姓名',
					sort: true
				},
				{
					field: 'phone',
					width: 200,
					title: '接收通知微信',
				},
				{
					field: 'CreationTime',
					width: 220,
					title: '是否关注公众号',
				},
				{
					field: 'amendTime',
					width: 140,
					title: '关联售货机',
				},
				{
					field: 'jine',
					width: 200,
					title: '操作 ',
					toolbar: '#barDemo'
				},

				]
			],
			data: [{
				username: '2222',
				phone: 'cs45121',
				CreationTime: '否',
				amendTime: '99'
			},
			{
				username: '2222',
				phone: 'cs45121',
				CreationTime: '否',
				amendTime: '99'
			}
			],
			page: true
		});

		var tree = layui.tree,
			//渲染
			data = [{
				title: '一级1'
				, id: 1
				, field: 'name1'
				, checked: false,
				disabled:true
				, spread: true
				, children: [{
					title: '二级1-1 可允许跳转'
					, id: 3
					, field: 'name11'
					, href: 'https://www.layui.com/'
					, children: [{
						title: '三级1-1-3'
						, id: 23
						, field: ''
						, children: [{
							title: '四级1-1-3-1'
							, id: 24
							, field: ''
							, children: [{
								title: '五级1-1-3-1-1'
								, id: 30
								, field: ''
							}, {
								title: '五级1-1-3-1-2'
								, id: 31
								, field: ''
							}]
						}]
					}, {
						title: '三级1-1-1'
						, id: 7
						, field: ''
						, children: [{
							title: '四级1-1-1-1 可允许跳转'
							, id: 15
							, field: ''
							, href: 'https://www.layui.com/doc/'
						}]
					}, {
						title: '三级1-1-2'
						, id: 8
						, field: ''
						, children: [{
							title: '四级1-1-2-1'
							, id: 32
							, field: ''
						}]
					}]
				}, {
					title: '二级1-2'
					, id: 4
					, spread: true
					, children: [{
						title: '三级1-2-1'
						, id: 9
						, field: ''
						, disabled: true
					}, {
						title: '三级1-2-2'
						, id: 10
						, field: ''
					}]
				}, {
					title: '二级1-3'
					, id: 20
					, field: ''
					, children: [{
						title: '三级1-3-1'
						, id: 21
						, field: ''
					}, {
						title: '三级1-3-2'
						, id: 22
						, field: ''
					}]
				}]
			}, {
				title: '一级2'
				, id: 2
				, field: ''
				, spread: true
				, children: [{
					title: '二级2-1'
					, id: 5
					, field: ''
					, spread: true
					, children: [{
						title: '三级2-1-1'
						, id: 11
						, field: ''
					}, {
						title: '三级2-1-2'
						, id: 12
						, field: ''
					}]
				}, {
					title: '二级2-2'
					, id: 6
					, field: ''
					, children: [{
						title: '三级2-2-1'
						, id: 13
						, field: ''
					}, {
						title: '三级2-2-2'
						, id: 14
						, field: ''
						, disabled: true
					}]
				}]
			}, {
				title: '一级3'
				, id: 16
				, field: ''
				, children: [{
					title: '二级3-1'
					, id: 17
					, field: ''
					, fixed: true
					, children: [{
						title: '三级3-1-1'
						, id: 18
						, field: ''
					}, {
						title: '三级3-1-2'
						, id: 19
						, field: ''
					}]
				}, {
					title: '二级3-2'
					, id: 27
					, field: ''
					, children: [{
						title: '三级3-2-1'
						, id: 28
						, field: ''
					}, {
						title: '三级3-2-2'
						, id: 29
						, field: ''
					}]
				}]
			}]
		tree.render({
			elem: '#test12'
			, data: data
			, showCheckbox: true  //是否显示复选框
			, id: 'demoId1'
			, isJump: true //是否允许点击节点时弹出新窗口跳转
			, click: function (obj) {
				var data = obj.data;  //获取当前点击的节点数据
				// layer.msg('状态：' + obj.state + '<br>节点数据：' + JSON.stringify(data));
				// console.log(obj)
				var checkedData = tree.getChecked('demoId1');
				console.log(checkedData)
			}
		});


















		// 	var inst1 = tree.render({
		// 	elem: '#test1',
		// 	id: 'treelist',
		// 	showLine: !0 //连接线
		// 	,
		// 	onlyIconControl: !1 //左侧图标控制展开收缩
		// 	,
		// 	isJump: !1 //弹出新窗口跳转
		// 	,
		// 	edit: false //开启节点的操作
		// 	,
		// 	data: dataList,
		// 	text: {
		// 		defaultNodeName: '无数据',
		// 		none: '加载数据失败！'
		// 	},
		// 	click: function (obj) {
		// 		console.log(obj);
		// 		var nodes = document.getElementsByClassName("layui-tree-txt");
		// 		for (var i = 0; i < nodes.length; i++) {
		// 			if (nodes[i].innerHTML === obj.data.title)
		// 				nodes[i].style.color = "#be954a";
		// 			else
		// 				nodes[i].style.color = "#555";
		// 		}
		// 		if (!obj.data.children) {
		// 			$.ajax({
		// 				type: 'post',
		// 				url: '/api/merchant/getMerchantGroup',
		// 				headers: {
		// 					token,
		// 					"Content-Type": "application/json",
		// 				},
		// 				async: false,
		// 				data: JSON.stringify({
		// 					topId: obj.data.id
		// 				}),
		// 				success: function (res) {
		// 					if (res.code == 200) {
		// 						if (res.data[0].childMerchant.length > 0) {
		// 							console.log(res)
		// 							obj.data.spread = true;
		// 							obj.data.children = [];
		// 							res.data[0].childMerchant.forEach((item, index) => {

		// 								var childrenObj = {
		// 									id: item.id,
		// 									title: item.name
		// 								}
		// 								obj.data.children.push(childrenObj)
		// 							});
		// 							tree.reload('treelist', {

		// 							});
		// 						}

		// 					}
		// 				}
		// 			})
		// 		}

		// 	},
		// });


	});
</script>

</html>